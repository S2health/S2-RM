<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.20">
<meta name="description" content="S2 Data Staging Information Model specification">
<meta name="keywords" content="EHR, integration, S2">
<title>Data Staging Model</title>
<link rel="stylesheet" href="https://platform.s2health.org/css/s2.css">
</head>
<body class="book toc2 toc-left">
<div id="header">
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel0">
<li><a href="#_data_staging_model">Data Staging Model</a>
<ul class="sectlevel1">
<li><a href="#_revision_history">Revision History</a></li>
<li><a href="#_acknowledgements">Acknowledgements</a></li>
<li><a href="#_preface">1. Preface</a>
<ul class="sectlevel2">
<li><a href="#_purpose">1.1. Purpose</a></li>
<li><a href="#_related_documents">1.2. Related Documents</a></li>
<li><a href="#_status">1.3. Status</a>
<ul class="sectlevel3">
<li><a href="#_prior_art">1.3.1. Prior Art</a></li>
</ul>
</li>
<li><a href="#_feedback">1.4. Feedback</a></li>
<li><a href="#_conformance">1.5. Conformance</a></li>
</ul>
</li>
<li><a href="#_data_staging_package">2. Data_staging Package</a>
<ul class="sectlevel2">
<li><a href="#_requirements">2.1. Requirements</a></li>
<li><a href="#_design_basis">2.2. Design Basis</a>
<ul class="sectlevel3">
<li><a href="#_overview">2.2.1. Overview</a></li>
<li><a href="#_semantics_of_generic_entry">2.2.2. Semantics of Generic_entry</a></li>
<li><a href="#_use_with_openehr_extracts">2.2.3. Use with openEHR Extracts</a></li>
<li><a href="#_integration_with_iso_13606">2.2.4. Integration with ISO 13606</a></li>
</ul>
</li>
<li><a href="#_data_conversion_architecture">2.3. Data Conversion Architecture</a></li>
<li><a href="#_class_descriptions">2.4. Class Descriptions</a>
<ul class="sectlevel3">
<li><a href="#_generic_entry_class">2.4.1. Generic_entry Class</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="imageblock text-center">
<div class="content">
<img src="http://s2health.org/resources/logos/s2logo.svg" alt="S2 logo">
</div>
</div>
</div>
</div>
<h1 id="_data_staging_model" class="sect0"><a class="anchor" href="#_data_staging_model"></a>Data Staging Model</h1>
<div class="openblock partintro">
<div class="content">
<table class="tableblock frame-all grid-all fit-content spread">
<colgroup>
<col>
<col>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top" colspan="2"><strong>Issuer</strong>: <a href="http://www.s2health.org" target="_blank" rel="noopener">S2 Health</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Release</strong>: S2-RM dev</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Status</strong>: DEVELOPMENT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Revision</strong>: <a href="#latest_issue">[latest_issue]</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Date</strong>: <a href="#latest_issue_date">[latest_issue_date]</a></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>Keywords</strong>: EHR, integration, S2</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top" colspan="2">&#169; 2023 - 2025 S2 Health</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><a href="http://www.s2health.org" target="_blank" rel="noopener">S2 Health</a> is an independent, non-profit foundation.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>Licence</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="https://specifications.openehr.org/images/cc-by-nd-88x31.png" alt="image"></span> Creative Commons Attribution-NoDerivs 4.0 Unported. <a href="https://creativecommons.org/licenses/by-nd/4.0/" class="bare">https://creativecommons.org/licenses/by-nd/4.0/</a></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>Support</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Issues: <a href="https://github.com/S2health/S2-RM/issues?q=is%3Aissue%20state%3Aopen%20label%3Adocumentation%20label%3Aenhancement%20label%3Aerror" target="_blank" rel="noopener">Report an Issue</a><br>
 Web: <a href="https://platform.s2health.org" target="_blank" rel="noopener">https://platform.s2health.org</a></p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_revision_history"><a class="anchor" href="#_revision_history"></a>Revision History</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 9.0909%;">
<col style="width: 54.5454%;">
<col style="width: 18.1818%;">
<col style="width: 18.1819%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Issue</th>
<th class="tableblock halign-left valign-top">Details</th>
<th class="tableblock halign-left valign-top">Raiser</th>
<th class="tableblock halign-left valign-top">Completed</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="latest_issue"></a>0.1.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Initial Writing: based on openEHR RM Integration Model</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="latest_issue_date"></a>20 Jul 2023</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_acknowledgements"><a class="anchor" href="#_acknowledgements"></a>Acknowledgements</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The work reported in this paper has been funded in part by the following organisations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>University College London - Centre for Health Informatics and Multi-professional Education (CHIME);</p>
</li>
<li>
<p>Ocean Informatics.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Special thanks to David Ingram, Emeritus Professor of Health Informatics at UCL, who provided a vision and collegial working environment ever since the days of GEHR (1992).</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_preface"><a class="anchor" href="#_preface"></a>1. Preface</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose"><a class="anchor" href="#_purpose"></a>1.1. Purpose</h3>
<div class="paragraph">
<p>This document defines the S2 INTG component Data Staging Model.</p>
</div>
<div class="paragraph">
<p>The intended audience includes implementers, integrators and health data managers.</p>
</div>
</div>
<div class="sect2">
<h3 id="_related_documents"><a class="anchor" href="#_related_documents"></a>1.2. Related Documents</h3>
<div class="paragraph">
<p>Prerequisite documents for reading this document include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <a href="https://platform.s2health.org/releases/RM/dev/docs/architecture_overview.html" target="_blank" rel="noopener">S2 Architecture Overview</a>;</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_status"><a class="anchor" href="#_status"></a>1.3. Status</h3>
<div class="paragraph">
<p>This specification is in the DEVELOPMENT state. The development version of this document can be found at <a href="https://platform.s2health.org/releases/S2-RM-BASE/dev/docs/data_types.html" target="_blank" rel="noopener">https://platform.s2health.org/releases/S2-RM-BASE/dev/docs/data_types.html</a>.</p>
</div>
<div class="paragraph">
<p>Known omissions or questions are indicated in the text with a 'to be determined' paragraph, as follows:</p>
</div>
<div class="paragraph tbd">
<p><strong>TBD</strong>: (example To Be Determined paragraph)</p>
</div>
<div class="sect3">
<h4 id="_prior_art"><a class="anchor" href="#_prior_art"></a>1.3.1. Prior Art</h4>
<div class="paragraph">
<p>This specification draws from the <a href="https://specifications.openehr.org/releases/RM/dev/data_types.html" target="_blank" rel="noopener">openEHR Data Types</a> specification and the <a href="http://build.fhir.org/datatypes.html" target="_blank" rel="noopener">HL7 FHIR Data Types</a>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_feedback"><a class="anchor" href="#_feedback"></a>1.4. Feedback</h3>
<div class="paragraph">
<p>Feedback may be provided on the <a href="https://discourse.s2health.org" target="_blank" rel="noopener">S2 forum</a>.</p>
</div>
<div class="paragraph">
<p>Issues may be raised on the <a href="https://github.com/S2health/S2-RM/issues?q=is%3Aissue%20state%3Aopen%20label%3Adocumentation%20label%3Aenhancement%20label%3Aerror" target="_blank" rel="noopener">specifications Problem Report tracker</a>.</p>
</div>
<div class="paragraph">
<p>To see changes made due to previously reported issues, see the <a href="https://github.com/S2health/S2-RM/milestones?state=closed" target="_blank" rel="noopener">S2-RM component Change Request tracker</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_conformance"><a class="anchor" href="#_conformance"></a>1.5. Conformance</h3>
<div class="paragraph">
<p>Conformance of a data or software artifact to an S2 specification is determined by a formal test of that artifact against the relevant S2 Implementation Technology Specification(s) (ITSs), such as a JSON-schema or OpenAPI specification. Since ITSs are formal derivations from underlying models, ITS conformance indicates model conformance.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_data_staging_package"><a class="anchor" href="#_data_staging_package"></a>2. Data_staging Package</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_requirements"><a class="anchor" href="#_requirements"></a>2.1. Requirements</h3>
<div class="paragraph">
<p>Getting data in and out of the EHR is one of the most basic requirements openEHR aims to satisfy. In
"greenfield" (new build) situations, and for data being created by GUI applications via the openEHR
EHR APIs, there is no issue, since native openEHR structures and semantics are being used. In almost
all other situations, existing data sources and sinks have to be accounted for. In general, external or
'legacy' data (here the term is used for convenience, and does not imply anything about the age or
quality of the systems in question) have different syntactic and semantic formats than openEHR data,
and seamless conversion requires addressing both levels.</p>
</div>
<div class="paragraph">
<p>Typical examples of legacy data sources and sinks include relational databases, HL7v2 messages, and
HL7 CDA documents. HL7v2 messages are probably one of the most common sources of pathology
messages in many countries; EDIFACT messages are another. More recently, HL7v2 messages have
been designed for referrals and even discharge summaries. Not all legacy systems are standardised;
many if not most hospitals as well as GP and other desktop products have their own private models of
data and terminology usage. Technically speaking, there is not much difference between standardised
and non-standardised legacy models; only the reusability of the solution differs.</p>
</div>
<div class="paragraph">
<p>Another important category of externally sourced data addressed by the Integration package
described here is data expressed in a form of a <a href="https://www.iso.org/standard/40784.html" target="_blank" rel="noopener">ISO 13606 Extract</a>. Part 1 of ISO 13606 defines a
information model which is nearly identical to that of openEHR at the <code>Composition</code> and <code>Section</code>
levels. The ISO 13606 <code>Entry</code> class is a generic structure with a minimum of contextual metadata,
and can easily be mapped to the openEHR Entry type described in this specification.</p>
</div>
<div class="paragraph">
<p>The primary need with respect to legacy data is to be able to convert data from multiple mutually
incompatible sources into a single, standardised patient-centric EHR for each patient, that can then be
longitudinally viewed and queried. This is what enables GP and specialist notes, diagnoses and plans
to be integrated with laboratory results from multiple sources, patient notes, administrative data and
so on, to provide a coherent record of the patient journey.</p>
</div>
<div class="paragraph">
<p>In technical terms, a number of types of incompatibility have to be dealt with. There is no guarantee
of correspondence of scope of incoming transactions and target openEHR structures - an incoming
document for example might correspond to a number of clinical archetypes. Structure will not usually
correspond, with legacy data (particularly messages) usually having flatter structures than those
defined in target archetypes. Terminology use is extremely variable in existing systems and messages,
and also has to be dealt with. Data types will also not correspond directly, so that for example, a mapping
between an incoming string "110/80 mmHg" and the target openEHR form of two
<code>Dv_quantity</code> objects each with their own value and units has to be made.</p>
</div>
</div>
<div class="sect2">
<h3 id="_design_basis"><a class="anchor" href="#_design_basis"></a>2.2. Design Basis</h3>
<div class="sect3">
<h4 id="_overview"><a class="anchor" href="#_overview"></a>2.2.1. Overview</h4>
<div class="paragraph">
<p>The design basis for connecting existing systems to openEHR is founded upon a clear separation of
the syntactic and semantic transformations required on data. The syntactic transformation converts
source data from its original form (or whatever intermediate form it may have been converted to) to a
format obeying a special class in the openEHR reference model, but whose logical structure and
semantics are controlled by 'integration' archetypes so as to mimic the design of the source data. This
step brings the data into the openEHR computational context. The second step causes transformation
on this intermediate openEHR data into data which are a) instances of the main openEHR reference
model, and b) obey 'designed' clinical archetypes.</p>
</div>
<div class="paragraph">
<p>The additional elements of the openEHR architecture which make this transformation possible are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>a class <code>Generic_entry</code>, which is a sibling of <code>Section</code> and <code>Entry</code>, and contains completely generic, archetypable structures;</p>
</li>
<li>
<p>'integration' archetypes, i.e. archetypes defined against the <code>Generic_entry</code> class;</p>
</li>
<li>
<p>semantic transformation rules from openEHR data based on <code>Generic_entry</code> and integration archetypes to data based on the subtypes of <code>Entry</code>, and designed archetypes.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The figure below illustrates the <code>rm.intg.data_staging</code> package, which contains a single class
<code>Generic_entry</code>. Unlike other classes in the openEHR reference model, <code>Generic_entry</code> contains
no hard-wired attributes at all, only one generic attribute, <code><em>data</em></code>. No assumptions at all are made about
the actual shape of such data.</p>
</div>
<div id="data_staging_package" class="imageblock text-center text-center">
<div class="content">
<img src="UML/diagrams/RM-data_staging.svg" alt="RM data staging">
</div>
<div class="title">Figure 1. rm.intg.data_staging Package</div>
</div>
</div>
<div class="sect3">
<h4 id="_semantics_of_generic_entry"><a class="anchor" href="#_semantics_of_generic_entry"></a>2.2.2. Semantics of Generic_entry</h4>
<div class="paragraph">
<p>A number of useful consequences follow from this modelling approach. Firstly, instances of
<code>Generic_entry</code> will contain attributes inherited from the <code>Locatable</code> class, including
<code><em>archetype_node_id</em></code>, and are thus archetypable in the same way as all other classes in the openEHR
reference model. The <code>Locatable</code> attribute feeder_audit is also inherited, and may be used to mark
every node of data with relevant meta-data from the source system record or message. Secondly, as a
subtype of <code>Content_item</code>, <code>Generic_entry</code> is a valid value for <code>Composition</code>.<code><em>content</em></code>. This is a
completely desirable situation, since the same rules apply to <code>Generic_entry</code> as to other content:
instances can only be committed to the record as part of a <code>Composition</code> instance. <code>Generic_entry</code>
data are thus audit-trailed and versioned in the normal way. Thirdly, <code>Generic_entry</code> instances can
occur within a hierarchy of <code>Sections</code>, which is useful for data sources which have headings or section
equivalents (this is quite common in hospital information systems containing physician notes).
Lastly, in common with all other openEHR data, design-time paths can be constructed for archetypes
of <code>Generic_entry</code>, while runtime paths can be extracted from data based on such archetypes. These
path sets can be used for writing the data transformation rules.</p>
</div>
<div class="paragraph">
<p>It should be remembered that while <code>Generic_entry</code> provides a standardised syntactic form for
externally sourced data within openEHR, it provides no semantic coherence. This is particularly true
for <code>Generic_entry</code> instances sourced from numerous data sources: there is no guarantee that the
<code>Generic_entry</code> representations of "cholesterol result" from system A will be congruent with those
sourced from system B. It is not even required that the data sources be vastly different for this problem
to occur. Examples of messages can be found coming from different pathology laboratories,
which obey the same minor version of HL7v2 (e.g. 2.3.1) and supposedly implement the same message
type (e.g. "complete blood picture") but which differ in actual structure and content.
The consequence of this situation is that <code>Generic_entry</code> data cannot in general be safely used for
clinical computation (e.g. decision support), and will not in general even support reliable clinical querying.
In other words, a repository of <code>Generic_entries</code> (within appropriate <code>Composition</code> structures)
does not constitute a reliable or interoperable health record - it can only be considered a
standardised health information data store whose primary purpose is as the input to or output of
semantic conversion processes, or for other auditing or non-clinical data management purposes.</p>
</div>
</div>
<div class="sect3">
<h4 id="_use_with_openehr_extracts"><a class="anchor" href="#_use_with_openehr_extracts"></a>2.2.3. Use with openEHR Extracts</h4>
<div class="paragraph">
<p>The <code>Generic_entry</code> class provides a way to represent data from non-openEHR systems that implement
the openEHR Extract specification in order to either communicate with openEHR systems, or to
communicate with other systems also implementing the openEHR Extract specification.</p>
</div>
</div>
<div class="sect3">
<h4 id="_integration_with_iso_13606"><a class="anchor" href="#_integration_with_iso_13606"></a>2.2.4. Integration with ISO 13606</h4>
<div class="paragraph">
<p>The <code>Generic_entry</code> class provides a convenient basis for making openEHR systems ISO 13606-
compliant, which in turn gives openEHR a gateway capability in heterogeneous environments where
ISO 13606 is being used to communicate data. A ISO 13606 EHR Extract can be converted to a
series of <code>Compositions</code> containing <code>Generic_entry</code> objects which obey appropriate integration
archetypes; this data can then be semantically converted into orthodox openEHR objects for integration
into a coherent EHR. Similarly, openEHR data can be converted into the <code>Generic_entry</code>-based
intermediate form for further conversion into ISO 13606 EHR Extracts.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_data_conversion_architecture"><a class="anchor" href="#_data_conversion_architecture"></a>2.3. Data Conversion Architecture</h3>
<div class="paragraph">
<p>The integration archetype-based strategy for importing data into an openEHR system, shown in the following figure, consists of two steps.</p>
</div>
<div id="integration_environment" class="imageblock text-center text-center">
<div class="content">
<img src="data_staging/diagrams/integration_environment.png" alt="integration environment" width="80%">
</div>
<div class="title">Figure 2. Data Integration using openEHR</div>
</div>
<div class="paragraph">
<p>Firstly, data are converted from their original syntactic format into openEHR <code>Composition</code>/<code>Section</code>/
<code>Generic_entry</code> structures, shown in the openEHR integration switch. Most of the data will
appear in the <code>Generic_entry</code> part, controlled by an integration archetype designed to mimic the
incoming structure (such as an HL7v2 lab message) as closely as possible; <code>Feeder_audit</code> structures
are used to contain integration meta-data. The result of this step is data that are expressed in the
openEHR type system (i.e. as instances of the openEHR reference model), and are immediately amenable
to processing with normal openEHR software.</p>
</div>
<div class="paragraph">
<p>In the second step, semantic transformation is effected, by the use of mappings between integration
and designed archetypes. Such mappings are created by archetype authors using tools. The mapping
rules are the key to defining structural transformations, use of terminological codes, and other
changes. Serious challenges of course remain in the business of integrating heterogeneous systems;
some of these are dealt with in the Common IM document sections on Feeder systems.</p>
</div>
</div>
<div class="sect2">
<h3 id="_class_descriptions"><a class="anchor" href="#_class_descriptions"></a>2.4. Class Descriptions</h3>
<div class="sect3">
<h4 id="_generic_entry_class"><a class="anchor" href="#_generic_entry_class"></a>2.4.1. Generic_entry Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>Generic_entry</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>This class is used to create intermediate representations of data from sources not otherwise conforming to openEHR classes, such as HL7 messages, relational databases and so on.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="/releases/S2-CARE/dev/docs/ehr.html#_content_item_class" target="_blank" rel="noopener">Content_item</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>data</strong>: <code><a href="/releases/S2-BASE/dev/docs/patterns.html#_node_class" target="_blank" rel="noopener">Node</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The data from the source message or record. May be recorded in any structural openEHR representation.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2025-03-13 11:29:31 -0600
</div>
</div>
</body>
</html>