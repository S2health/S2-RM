<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.16">
<meta name="description" content="S2 Entry Model">
<meta name="keywords" content="EHR, EMR, reference model, S2">
<title>Entry Model</title>
<link rel="stylesheet" href="https://specifications.openehr.org/styles/openehr.css">
</head>
<body class="book toc2 toc-left">
<div id="header">
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel0">
<li><a href="#_entry_model">Entry Model</a>
<ul class="sectlevel1">
<li><a href="#_amendment_record">Amendment Record</a></li>
<li><a href="#_acknowledgements">Acknowledgements</a>
<ul class="sectlevel2">
<li><a href="#_editor">Editor</a></li>
<li><a href="#_contributors">Contributors</a></li>
<li><a href="#_support">Support</a></li>
<li><a href="#_trademarks">Trademarks</a></li>
</ul>
</li>
<li><a href="#_preface">1. Preface</a>
<ul class="sectlevel2">
<li><a href="#_purpose">1.1. Purpose</a></li>
<li><a href="#_related_documents">1.2. Related Documents</a></li>
<li><a href="#_status">1.3. Status</a></li>
<li><a href="#_feedback">1.4. Feedback</a></li>
<li><a href="#_conformance">1.5. Conformance</a></li>
</ul>
</li>
<li><a href="#_overview">2. Overview</a>
<ul class="sectlevel2">
<li><a href="#_the_entry_class">2.1. The Entry class</a></li>
<li><a href="#_admin_entry">2.2. Admin_entry</a></li>
<li><a href="#_care_entry">2.3. Care_entry</a></li>
<li><a href="#_care_act_entry">2.4. Care_act_entry</a></li>
<li><a href="#_class_descriptions">2.5. Class Descriptions</a></li>
</ul>
</li>
<li><a href="#_observations">3. Observations</a>
<ul class="sectlevel2">
<li><a href="#_overview_2">3.1. Overview</a></li>
<li><a href="#_direct_observations">3.2. Direct Observations</a></li>
<li><a href="#_indirect_observations">3.3. Indirect Observations</a></li>
<li><a href="#_scores">3.4. Scores</a></li>
<li><a href="#_questionnaire_response">3.5. Questionnaire Response</a>
<ul class="sectlevel3">
<li><a href="#_class_descriptions_2">3.5.1. Class Descriptions</a></li>
</ul>
</li>
<li><a href="#_time_series_data">3.6. Time-series Data</a>
<ul class="sectlevel3">
<li><a href="#_basic_semantics">3.6.1. Basic semantics</a></li>
<li><a href="#_two_ways_of_recording_state">3.6.2. Two ways of Recording State</a></li>
</ul>
</li>
<li><a href="#_instance_examples">3.7. Instance Examples</a>
<ul class="sectlevel3">
<li><a href="#_heart_rate_measurement_series">3.7.1. Heart-rate Measurement Series</a></li>
<li><a href="#_blood_pressure_with_protocol">3.7.2. Blood Pressure with Protocol</a></li>
<li><a href="#_glucose_tolerance_test">3.7.3. Glucose Tolerance Test</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_assertion">4. Assertion</a>
<ul class="sectlevel2">
<li><a href="#_overview_3">4.1. Overview</a></li>
<li><a href="#_semantics">4.2. Semantics</a></li>
<li><a href="#_class_descriptions_3">4.3. Class Descriptions</a></li>
<li><a href="#_instance_examples_2">4.4. Instance Examples</a>
<ul class="sectlevel3">
<li><a href="#_partial_asthma_management_plan">4.4.1. Partial Asthma Management Plan</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_orders_and_actions">5. Orders and Actions</a>
<ul class="sectlevel2">
<li><a href="#_overview_4">5.1. Overview</a></li>
<li><a href="#_design_concept">5.2. Design Concept</a></li>
<li><a href="#_model_overview">5.3. Model Overview</a></li>
<li><a href="#_the_standard_order_state_machine_ism">5.4. The Standard Order State Machine (ISM)</a></li>
<li><a href="#_order_aggregate_state">5.5. Order Aggregate State</a></li>
<li><a href="#_careflow_process_to_state_machine_mapping">5.6. Careflow Process to State Machine Mapping</a></li>
<li><a href="#_relationship_to_archetypes">5.7. Relationship to Archetypes</a></li>
<li><a href="#_class_descriptions_4">5.8. Class Descriptions</a></li>
<li><a href="#_instance_examples_3">5.9. Instance Examples</a>
<ul class="sectlevel3">
<li><a href="#_chained_medication_order">5.9.1. Chained Medication Order</a></li>
<li><a href="#_multi_drug_therapy">5.9.2. Multi-drug Therapy</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_references">References</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="imageblock text-center">
<div class="content">
<img src="https://uploads-ssl.webflow.com/63570cd7d4eda80d654ccf14/64027a592d749e7df28c6248_primary-s2.svg" alt="openEHR logo">
</div>
</div>
</div>
</div>
<h1 id="_entry_model" class="sect0"><a class="anchor" href="#_entry_model"></a>Entry Model</h1>
<div class="openblock partintro">
<div class="content">
<table class="tableblock frame-all grid-all fit-content spread">
<colgroup>
<col>
<col>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top" colspan="2"><strong>Issuer</strong>: <a href="http://s2health.io" target="_blank" rel="noopener">S2 Foundation</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Release</strong>: RM latest</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Status</strong>: TRIAL</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Revision</strong>: <a href="#latest_issue">[latest_issue]</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Date</strong>: <a href="#latest_issue_date">[latest_issue_date]</a></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>Keywords</strong>: EHR, EMR, reference model, S2</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top" colspan="2">&#169; 2023 - 2023 S2 Foundation</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><a href="http://s2health.io" target="_blank" rel="noopener">S2 Foundation</a> is an independent, non-profit foundation.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>Licence</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="https://specifications.openehr.org/images/cc-by-nd-88x31.png" alt="image"></span> Creative Commons Attribution-NoDerivs 3.0 Unported. <a href="https://creativecommons.org/licenses/by-nd/3.0/" class="bare">https://creativecommons.org/licenses/by-nd/3.0/</a></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>Support</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Issues: <a href="https://specifications.s2health.io/components/RM/open_issues" target="_blank" rel="noopener">Report an Issue</a><br>
 Web: <a href="https://specifications.s2health.io" target="_blank" rel="noopener">specifications.S2.io</a></p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_amendment_record"><a class="anchor" href="#_amendment_record"></a>Amendment Record</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 9.0909%;">
<col style="width: 54.5454%;">
<col style="width: 18.1818%;">
<col style="width: 18.1819%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Issue</th>
<th class="tableblock halign-left valign-top">Details</th>
<th class="tableblock halign-left valign-top">Raiser</th>
<th class="tableblock halign-left valign-top">Completed</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="latest_issue"></a>0.1.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Initial Writing: based on openEHR EHR Information Model</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="latest_issue_date"></a>10 Apr 2023</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_acknowledgements"><a class="anchor" href="#_acknowledgements"></a>Acknowledgements</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_editor"><a class="anchor" href="#_editor"></a>Editor</h3>
<div class="ulist">
<ul>
<li>
<p>Graphite Informatics group.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_contributors"><a class="anchor" href="#_contributors"></a>Contributors</h3>
<div class="paragraph">
<p>This specification benefited from input from the wider health informatics community. The openEHR Foundation would like to recognise the following people for their contributions.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>xxx</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_support"><a class="anchor" href="#_support"></a>Support</h3>
<div class="paragraph">
<p>The work reported in this paper has been funded in part by the following organisations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>xxx</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_trademarks"><a class="anchor" href="#_trademarks"></a>Trademarks</h3>
<div class="ulist">
<ul>
<li>
<p>'openEHR' is a trademark of the openEHR Foundation</p>
</li>
<li>
<p>'Java' is a registered trademark of Oracle Corporation</p>
</li>
<li>
<p>'Microsoft' and '.Net' are trademarks of the Microsoft Corporation</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_preface"><a class="anchor" href="#_preface"></a>1. Preface</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose"><a class="anchor" href="#_purpose"></a>1.1. Purpose</h3>
<div class="paragraph">
<p>This document describes the S2 Entry Model, part of the S2 Canonical Model.</p>
</div>
<div class="paragraph">
<p>The intended audience includes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The open source healthcare community;</p>
</li>
<li>
<p>Solution vendors;</p>
</li>
<li>
<p>Medical informaticians and clinicians interested in health information.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_related_documents"><a class="anchor" href="#_related_documents"></a>1.2. Related Documents</h3>
<div class="paragraph">
<p>Prerequisite documents for reading this document include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <a href="https://specifications.openehr.org/releases/BASE/latest/architecture_overview.html" target="_blank" rel="noopener">openEHR Architecture Overview</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Related documents include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The {S2base_data_types}[S2 Data Types Model^];</p>
</li>
<li>
<p>The {S2base_base_types}[S2 Base Types Model^];</p>
</li>
<li>
<p>The <a href="https://specifications.s2health.io/releases/RM/latest/data_structures.html" target="_blank" rel="noopener">S2 Data Structures Model</a>;</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_status"><a class="anchor" href="#_status"></a>1.3. Status</h3>
<div class="paragraph">
<p>This specification is in the TRIAL state. The development version of this document can be found at <a href="https://specifications.s2health.io/releases/RM/latest/entry.html" target="_blank" rel="noopener">https://specifications.s2health.io/releases/RM/latest/entry.html</a>.</p>
</div>
<div class="paragraph">
<p>Known omissions or questions are indicated in the text with a 'to be determined' paragraph, as follows:</p>
</div>
<div class="paragraph tbd">
<p><strong>TBD</strong>: (example To Be Determined paragraph)</p>
</div>
</div>
<div class="sect2">
<h3 id="_feedback"><a class="anchor" href="#_feedback"></a>1.4. Feedback</h3>
<div class="paragraph">
<p>Feedback may be provided on the <a href="https://discourse.openehr.org/c/specifications/rm" target="_blank" rel="noopener">S2 specifications forum</a>.</p>
</div>
<div class="paragraph">
<p>Issues may be raised on the <a href="https://specifications.s2health.io/components/RM/open_issues" target="_blank" rel="noopener">specifications Problem Report tracker</a>.</p>
</div>
<div class="paragraph">
<p>To see changes made due to previously reported issues, see the <a href="https://specifications.s2health.io/components/RM/history" target="_blank" rel="noopener">RM component Change Request tracker</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_conformance"><a class="anchor" href="#_conformance"></a>1.5. Conformance</h3>
<div class="paragraph">
<p>Conformance of a data or software artifact to a S2 specification is determined by a formal test of that artifact against the relevant openEHR Implementation Technology Specification(s) (ITSs), such as an IDL interface or an XML-schema. Since ITSs are formal derivations from underlying models, ITS conformance indicates model conformance.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_overview"><a class="anchor" href="#_overview"></a>2. Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Entry model is defined by the <code>gcm.entry</code> package, shown in the UML diagram below. The concept of 'Entry' corresponds to an entry in a longitudinal record of care, and may also be understood as a 'statement'.</p>
</div>
<div id="entry_taxonomy" class="imageblock text-center text-center">
<div class="content">
<img src="UML/diagrams/RM-entry-taxonomy.svg" alt="RM entry taxonomy">
</div>
<div class="title">Figure 1. gcm.entry package</div>
</div>
<div class="paragraph">
<p>The descendants of <code>Entry</code> are based on the taxonomy described in (<a href="#Beale_Heard2007">Beale &amp; Heard&#44; 2007</a>), and are described in the section below.</p>
</div>
<div class="sect2">
<h3 id="_the_entry_class"><a class="anchor" href="#_the_entry_class"></a>2.1. The Entry class</h3>
<div class="paragraph">
<p>All Entries have a number of properties in common. The optional <code><em>language</em></code> attribute indicates how all text data within the Entry are to be interpreted linguistically if different from the enclosing Composition.</p>
</div>
<div class="paragraph">
<p>The other properties defined in Entry are as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code><em>subject</em></code>: records the subject of the Entry as an instance of a subtype of <code>Party_proxy</code>. When this is the record subject, (i.e. the patient), the value is an instance of <code>Party_self</code>. Otherwise it is typically a fetus (of a pregnant subject), a family member, sexual partner, or organ donor. The latter is expressed in the form of a <code>Party_identified</code> or <code>Related_party</code> instance, which describes the kind of relationship, and optionally, identifies the demographic entity.</p>
</li>
<li>
<p><code><em>reporter</em></code>: the agent who provided the information. This is usually the patient or the clinician, but may be the subject, a family member or an autonomous software application or device. If participation details of the reporter (e.g. mode of communication) need to be recorded, the details should be recorded once in the <code>Event_context.<em>participations</em></code>. The reporter attribute is optional, since it is often implicit in the information that was recorded.</p>
</li>
<li>
<p><code><em>authorization_actions</em></code>: authorizations for this Entry.</p>
</li>
<li>
<p><code><em>other_participations</em></code>: other participations for this Entry, e.g. a nurse who administered a drug recorded in an Action.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The information reporter is optional, and in many cases will not be recorded, since it will be obvious from the <code><em>composer</em></code> and <code><em>other_participations</em></code> of the enclosing Composition. It is expected to be used only when the composer of the Composition really needs to specify the origin of specific statements, such as in the following circumstances:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the information reporter is specifically accountable for the Entry data (it is their opinion, their decision, they carried out the test etc.) - they might also need to attest it;</p>
</li>
<li>
<p>the information reporter is an authoritative source, or has provided information from a unique perspective (e.g. the view of a spouse/ carer on the patient&#8217;s functional health status or mental state);</p>
</li>
<li>
<p>the information reporter&#8217;s view might not reflect the consensus (e.g. a patient opinion not held by the composer, a difference between father and mother on a description of a child&#8217;s sleeping pattern);</p>
</li>
<li>
<p>the information reporter is not one of the Composition-level participants (e.g. an outside information reporter such as someone telephoned during the encounter to provide a lab result, or an automated measurement device, or a decision support software component).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <code><em>authorization_actions</em></code> attribute is used to record any authorization action, generally signing or counter-signing. Each such action is assumed to advance the Entry through a lifecycle, recorded in the Entry attribute <code><em>lifecycle_state</em></code>, and defined by the Entry State Machine, which is illustrated below.</p>
</div>
<div id="Entry_state_machine" class="imageblock text-center text-center">
<div class="content">
<img src="UML/diagrams/RM-Entry_state_machine.svg" alt="RM Entry state machine">
</div>
<div class="title">Figure 2. Entry state machine</div>
</div>
<div class="paragraph">
<p>The following sections describe Entry sub-types.</p>
</div>
</div>
<div class="sect2">
<h3 id="_admin_entry"><a class="anchor" href="#_admin_entry"></a>2.2. Admin_entry</h3>
<div class="paragraph">
<p>The <code>Admin_entry</code> class defines the structure of administrative statements made in the record. Administrative information has the following characteristics:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>it is created by non-clinical staff, or clinical staff acting in an administrative capacity (e.g. a nurse or doctor who has to fill out an admission form in A&amp;E);</p>
</li>
<li>
<p>it expresses details to do with coordinating the clinical process, by recording e.g. admission information (enables clinical staff to know who is in the hospital and where they can be found), appointments (ensuring patient and physician get together at an agreed time and place), discharge/dismissal (allowing clinical staff to know that a patient has been sent home healthy, or transferred to another institution), billing and insurance information (where such information is required in the EHR; it may well be in its own system);</p>
</li>
<li>
<p>removing administrative information from the EHR would not compromise its clinical integrity, it would simply mean that carers and patients would no longer know when and where they were supposed to meet, or when the patient has entered or left a health care facility.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The data of Admin_entry is a single Cluster and is structured by archetyping.</p>
</div>
</div>
<div class="sect2">
<h3 id="_care_entry"><a class="anchor" href="#_care_entry"></a>2.3. Care_entry</h3>
<div class="paragraph">
<p>The <code>Care_entry</code> class is an abstract precursor of classes that express information of any clinical activity in the patient care process. It includes two attributes particular to all clinical entries, namely <code><em>qualifiers</em></code> and <code><em>guideline_ids</em></code>. These attributes enable the 'how' and 'why' aspects of any clinical recording to be expressed. The <code><em>qualifiers</em></code> property is used to record <em>method_</em> recorded for Observations, e.g. staining method in microscopy, and Instructions, e.g. Bruce protocol for ECG test.</p>
</div>
<div class="paragraph">
<p>TODO: review guideline_ids</p>
</div>
</div>
<div class="sect2">
<h3 id="_care_act_entry"><a class="anchor" href="#_care_act_entry"></a>2.4. Care_act_entry</h3>
<div class="paragraph">
<p>The <code>Care_act_entry</code> class represents the category of <em>concrete</em> acts undertaken in the course of care of the subject. These are usually costed and billable and often relate to an order. Accordingly, the <code><em>order_tracking</em></code> attribute enables both order-related identifiers, and more complex (archetyped) order-related information to be represented.</p>
</div>
</div>
<div class="sect2">
<h3 id="_class_descriptions"><a class="anchor" href="#_class_descriptions"></a>2.5. Class Descriptions</h3>
<div class="paragraph">
<p>Unresolved directive in master02-overview.adoc - include::../UML/classes/org.s2.grm.entry.entry.adoc[]</p>
</div>
<div class="paragraph">
<p>Unresolved directive in master02-overview.adoc - include::../UML/classes/org.s2.grm.entry.entry_lifecycle_states.adoc[]</p>
</div>
<div class="paragraph">
<p>Unresolved directive in master02-overview.adoc - include::../UML/classes/org.s2.grm.entry.care_entry.adoc[]</p>
</div>
<div class="paragraph">
<p>Unresolved directive in master02-overview.adoc - include::../UML/classes/org.s2.grm.entry.care_act_entry.adoc[]</p>
</div>
<div class="paragraph">
<p>Unresolved directive in master02-overview.adoc - include::../UML/classes/org.s2.grm.entry.order_tracking.adoc[]</p>
</div>
<div class="paragraph">
<p>Unresolved directive in master02-overview.adoc - include::../UML/classes/org.s2.grm.entry.admin_entry.adoc[]</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_observations"><a class="anchor" href="#_observations"></a>3. Observations</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_overview_2"><a class="anchor" href="#_overview_2"></a>3.1. Overview</h3>
<div class="paragraph">
<p>A number of types are used to record observations of any phenomenon or state of interest to do with the patient, including lab results, vital signs, family history, patient responses during a physical examination, and questionnaire response.</p>
</div>
<div class="paragraph">
<p>The following UML diagram illustrates the classes representing various kinds of Observation.</p>
</div>
<div id="entry_observation" class="imageblock text-center text-center">
<div class="content">
<img src="UML/diagrams/RM-entry-observation.svg" alt="RM entry observation">
</div>
<div class="title">Figure 3. Observation</div>
</div>
<div class="paragraph">
<p>Observations are formally modelled by the <code>Observation</code> class and its descendants. The <code>Observation</code> class provides the following properties common to all varieties of Observation:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code><em>data</em></code>: the focal data being recorded;</p>
</li>
<li>
<p><code><em>state</em></code>: any particular information about the state of the subject necessary to correctly interpret the data, which is not already known in the health record (i.e. facts such as the patient being female, pregnant, or currently undergoing chemotherapy). For example, exertion level (resting, post-marathon&#8230;&#8203;), position (lying, standing), post-glucose challenge, and so on.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Both the <code><em>data</em></code> and <code><em>state</em></code> properties are of type <code>List&lt;Item&gt;</code>.</p>
</div>
<div class="paragraph">
<p>Observations are further differentiated on <em>modality</em> of interaction with the subject used to obtain the intended data. The detailed semantics of Observation data are described in the following subsections.</p>
</div>
</div>
<div class="sect2">
<h3 id="_direct_observations"><a class="anchor" href="#_direct_observations"></a>3.2. Direct Observations</h3>
<div class="paragraph">
<p>Direct observations, represented by the <code>Direct_observation</code> class, are those for which the focal datum is directly provided by the observational activity. Examples include manual physical examination, e.g. palpation, auscultation, evaluation of skin color etc; machine observations such as heart-rate, oxygen and blood pressure. Note that some machines do not directly measure the reported data but compute it instead from related measurables. For example mean arterial pressure is usually machine-calculated from measured diastolic and systolic blood pressures. Such devices are treated for practical purposes as if they directly measure the target datum.</p>
</div>
</div>
<div class="sect2">
<h3 id="_indirect_observations"><a class="anchor" href="#_indirect_observations"></a>3.3. Indirect Observations</h3>
<div class="paragraph">
<p>Indirect observations are those obtained by some process that produces an artefact that can subsequently be analyzed to provide the focal data item. Examples include lab test results, imaging and genetic testing. In general, the analysis process takes some time. They are represented by the <code>Indirect_observation</code> class, which includes the property <code><em>result_time</em></code>, used to capture the time the result became available. The clinically relevant time is corresponds to the time of sampling, imaging etc, and is captured in the inherited <code><em>time</em></code> property.</p>
</div>
</div>
<div class="sect2">
<h3 id="_scores"><a class="anchor" href="#_scores"></a>3.4. Scores</h3>
<div class="paragraph">
<p>Scores are a kind of Observation</p>
</div>
</div>
<div class="sect2">
<h3 id="_questionnaire_response"><a class="anchor" href="#_questionnaire_response"></a>3.5. Questionnaire Response</h3>
<div class="paragraph">
<p>Another common kind of observational information is the response to a <em>questionnaire</em>, which is assumed to be a controlled document published by some provider authority or jurisdiction. This is represented by the <code>Questionnaire_response</code> class. This class does not attempt to represent any conditional or other logic relating fields together, or any other computational logic of the original questionnaire, which typically takes the form of an interactive UI form - it only represents the responses.</p>
</div>
<div class="paragraph">
<p>The interior structure of a <code>Questionnaire_response</code> consists of <code>Clusters</code> and <code>Elements</code>, where the former are assumed to be named according to 'sections' in the original questionnaire.</p>
</div>
<div class="sect3">
<h4 id="_class_descriptions_2"><a class="anchor" href="#_class_descriptions_2"></a>3.5.1. Class Descriptions</h4>
<div class="paragraph">
<p>Unresolved directive in master04-observation.adoc - include::../UML/classes/org.s2.grm.entry.observation.adoc[leveloffset=+1]</p>
</div>
<div class="paragraph">
<p>Unresolved directive in master04-observation.adoc - include::../UML/classes/org.s2.grm.entry.direct_observation.adoc[leveloffset=+1]</p>
</div>
<div class="paragraph">
<p>Unresolved directive in master04-observation.adoc - include::../UML/classes/org.s2.grm.entry.indirect_observation.adoc[leveloffset=+1]</p>
</div>
<div class="paragraph">
<p>Unresolved directive in master04-observation.adoc - include::../UML/classes/org.s2.grm.entry.imaging.adoc[leveloffset=+1]</p>
</div>
<div class="paragraph">
<p>Unresolved directive in master04-observation.adoc - include::../UML/classes/org.s2.grm.entry.lab_result.adoc[leveloffset=+1]</p>
</div>
<div class="paragraph">
<p>Unresolved directive in master04-observation.adoc - include::../UML/classes/org.s2.grm.entry.score.adoc[leveloffset=+1]</p>
</div>
<div class="paragraph">
<p>Unresolved directive in master04-observation.adoc - include::../UML/classes/org.s2.grm.entry.questionnaire_response.adoc[leveloffset=+1]</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_time_series_data"><a class="anchor" href="#_time_series_data"></a>3.6. Time-series Data</h3>
<div class="sect3">
<h4 id="_basic_semantics"><a class="anchor" href="#_basic_semantics"></a>3.6.1. Basic semantics</h4>
<div class="paragraph">
<p>Multi-sample observational data is modeled by the <code>Observation_series</code> class, which represents samples in historical time using the History/Event structure defined in the <code>data_structures</code> package. This package defines a <code>History</code> class with an <code><em>origin</em></code> attribute, and a series of <code>Event</code> instances each containing a <code><em>time</em></code> attribute. Instantaneous and interval events are represented via the <code>Event</code> subtypes <code>Point_event</code> and <code>Interval_event</code>.</p>
</div>
<div class="paragraph">
<p>One of the aims of the model of <code>Observation_series</code> class is to represent in the same way single sample and multi-sample time-based data for which measurement method is invariant. It is not intended for long-running series of measurements taken by different people, different instruments, or with any other difference in data-gathering technique. In these cases, separate, histories are used, usually occurring in distinct container objects (e.g. distinct Compositions, in the EHR).</p>
</div>
<div class="paragraph">
<p>Accordingly, in the general practice setting, the use of <code>History</code> will correspond to measurement series which occur during the clinical session (i.e. during a patient contact). In a hospital setting, nurses' observations might occur in 4-hourly intervals, and there is no well-defined clinical session - simply a series of <code>Entries</code> during the time of the episode. Two approaches are possible here.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If each Observation is to be committed to the EHR as soon as it is made, the result will be distinct <code>Compositions</code> in time, each with its <code><em>event_context</em></code> corresponding to the period of the nurse&#8217;s presence. Each Composition will contain one or more Observation_series, each containing in their data a History of one sample of the measured vital sign.</p>
</li>
<li>
<p>If observations are not committed to the EHR immediately, but are stored elsewhere and only committed (say) at the end of each day, then the result will be a single Composition whose <code><em>event_context</em></code> corresponds to the total data gathering period, and which contains Observation_series whose data are multi-event Histories representing the multiple measurements made over the day.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Whether time-based data remain outside the record until a series of desired length is gathered, or entered as it occurs is up to the design of applications and systems; the approach taken should be based on the desired availability of the data in the system in question. If for example, it must be visible in the EHR as soon as the appropriate Compositions are written, then it should be represented as Histories in each relevant Composition; if it need only be available at some much later point in time (e.g. because it is known that no-one but the treating clinician is interested in it), then it can be stored in another system until sufficient items have been gathered for committal to the EHR.</p>
</div>
</div>
<div class="sect3">
<h4 id="_two_ways_of_recording_state"><a class="anchor" href="#_two_ways_of_recording_state"></a>3.6.2. Two ways of Recording State</h4>
<div class="paragraph">
<p>State information is optional, and is not needed if the data are meaningful on their own. If it is recorded, it can either be as a History of its own (i.e. using the <code>Observation_series.<em>state</em></code> attribute described above), or else as state values within the <code>EVENT</code> instances in the <code>Observation_series.<em>data</em></code> History structure. Both methods are useful in different circumstances. A separate state history is more likely to be used in a correlation study such as a sports medicine study on heart-rate with respect to specific types of exercise. In this method, the state information is a History of Events whose times and widths need not match those of the History in the data attribute. The state data under this approach generally express the condition of the subject in absolute terms, i.e. they are standalone statements about the subject&#8217;s state at certain points in time, such as "walking on treadmill 10km/h, 10<sup>o</sup> incline".</p>
</div>
<div class="paragraph">
<p>The other method will be used in most general medicine, e.g. for recording fasting and post glucose challenge states of a patient undergoing a glucose tolerance test. (See the Data Structures Information Model for more details). State values stored within the <code><em>data</em></code> History represent the situation in the subject at the time of the Event within the History and usually in relation to it, for example "post 8 hour fast". Recording the latter example in an independent state History would require an Event of 8 hours' duration called 'fast'. The latter would be technically still correct, but would be very unnatural to most clinicians. The figure below illustrates the two methods of recording state.</p>
</div>
<div id="recording_state" class="imageblock text-center text-center">
<div class="content">
<img src="entry/diagrams/recording_state.png" alt="recording state" width="65%">
</div>
<div class="title">Figure 4. Alternative ways of recording state</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_instance_examples"><a class="anchor" href="#_instance_examples"></a>3.7. Instance Examples</h3>
<div class="paragraph">
<p>The following subsections illustrate typical Entry instance structures. For guidance on how to best model particular clinical statements, see the archetype part of the <a href="https://www.openehr.org/ckm" target="_blank" rel="noopener">openEHR Clinical Knowledge Manager repository</a>.</p>
</div>
<div class="sect3">
<h4 id="_heart_rate_measurement_series"><a class="anchor" href="#_heart_rate_measurement_series"></a>3.7.1. Heart-rate Measurement Series</h4>
<div class="paragraph">
<p>The following figure illustrates three heart-rate measurements over 10 minutes.</p>
</div>
<div id="periodic_series" class="imageblock text-center text-center">
<div class="content">
<img src="entry/diagrams/periodic_series.png" alt="periodic series" width="80%">
</div>
<div class="title">Figure 5. Periodic series instance structure</div>
</div>
</div>
<div class="sect3">
<h4 id="_blood_pressure_with_protocol"><a class="anchor" href="#_blood_pressure_with_protocol"></a>3.7.2. Blood Pressure with Protocol</h4>
<div class="paragraph">
<p>The following figure illustrates a blood pressure observation with method.</p>
</div>
<div id="BP_measurement" class="imageblock text-center text-center">
<div class="content">
<img src="entry/diagrams/BP_measurement.png" alt="BP measurement" width="70%">
</div>
<div class="title">Figure 6. Blood Pressure Measurement Observation</div>
</div>
</div>
<div class="sect3">
<h4 id="_glucose_tolerance_test"><a class="anchor" href="#_glucose_tolerance_test"></a>3.7.3. Glucose Tolerance Test</h4>
<div class="paragraph">
<p>An oral glucose tolerance test takes the following form, although the number and timing of the blood sugar levels may be slightly different in practice:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>challenge: no calories fasting from 12pm to 8am</p>
</li>
<li>
<p>datum: BSL - 8am</p>
</li>
<li>
<p>challenge: 75 g glucose orally - 8:01 am</p>
</li>
<li>
<p>datum: BSL - 9 am</p>
</li>
<li>
<p>datum: BSL - 10 am</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>OGTT is treated as a single clinical concept, and thus requires only one archetype. A typical instance structure is shown in the figure below. In this example, the three blood sugars are represented by <code>Events</code>, with the fasting and glucose challenges being expressed as states on the relevant events.</p>
</div>
<div id="OGTT_structure" class="imageblock text-center text-center">
<div class="content">
<img src="entry/diagrams/OGTT_structure.png" alt="OGTT structure" width="80%">
</div>
<div class="title">Figure 7. OGTT instance structure</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_assertion"><a class="anchor" href="#_assertion"></a>4. Assertion</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_overview_3"><a class="anchor" href="#_overview_3"></a>4.1. Overview</h3>
<div class="paragraph">
<p>The <code>Assertion</code> class is used to represent clinical assertions about the patient, beyond pure observable phenomena. Assertions incorporate professional opinion, and generally represent some kind of inference drawn from a comparison of evidence (i.e. prior observations) and knowledge.</p>
</div>
<div class="paragraph">
<p>The following UML diagram shows the <code>Assertion</code> class and related sub-structure.</p>
</div>
<div id="entry_assertion" class="imageblock text-center text-center">
<div class="content">
<img src="UML/diagrams/RM-entry-assertion.svg" alt="RM entry assertion">
</div>
<div class="title">Figure 8. Assertion</div>
</div>
</div>
<div class="sect2">
<h3 id="_semantics"><a class="anchor" href="#_semantics"></a>4.2. Semantics</h3>
<div class="paragraph">
<p>Following the openEHR <code>EVALUATION</code> Reference Model class, the <code>Assertion</code> classis intended to cover a number of concrete types of clinical information, as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>problem/diagnosis</em>: the assignment of a known diagnosis or problem label to a set of observed signs and symptoms in the patient, for the purpose of determining and managing treatment. The physician will usually include a date of initial onset, date clinically recognised, date of last occurrence, date of resolution of last occurrence and possibly other timing information.</p>
</li>
<li>
<p><em>risk assessment</em>: an evaluation of the likelihood and timing of a certain event occurring or condition appearing.</p>
</li>
<li>
<p><em>scenario</em>: an opinion about the outcome if a certain intervention is proceeded with.</p>
</li>
<li>
<p><em>goal</em>: statement of a target, and a time at which it should be reached.</p>
</li>
<li>
<p><em>recommendation</em>: a description in general terms of a suggested care approach for the patient, based on diagnosis; includes various times or time-periods for activities, such as monitoring, taking of medications, and review.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The design of the <code>Assertion</code> class is very simple. In addition to the attributes inherited from <code>Entry</code> and <code>Care_entry</code>, it has only one attribute, <code><em>data</em>:Cluster</code> which may be archetyped so as to model the details of any particular clinical assertion. No timing attributes are included, since there is no time associated with creation or capturing of Evaluation information as such, only times included in the information. The only times of generic significance are (potentially) the time of a patient consultation during which the Assertion was created (recorded in <code>Composition.<em>event_context</em>.<em>start_time</em></code> and <code><em>end_time</em></code>) and the time of committal to the EHR system (recorded in <code>Version.<em>commit_audit</em></code> attribute).</p>
</div>
</div>
<div class="sect2">
<h3 id="_class_descriptions_3"><a class="anchor" href="#_class_descriptions_3"></a>4.3. Class Descriptions</h3>
<div class="paragraph">
<p>Unresolved directive in master06-assessment.adoc - include::../UML/classes/org.s2.grm.entry.assessment.adoc[]</p>
</div>
</div>
<div class="sect2">
<h3 id="_instance_examples_2"><a class="anchor" href="#_instance_examples_2"></a>4.4. Instance Examples</h3>
<div class="sect3">
<h4 id="_partial_asthma_management_plan"><a class="anchor" href="#_partial_asthma_management_plan"></a>4.4.1. Partial Asthma Management Plan</h4>
<div class="paragraph">
<p>The following figure illustrates a partial asthma management plan in which monitoring (peak flow) with dependent actions (review and admission to ER) and therapy (bronchodilator) are shown. In a complete plan, symptom monitoring and other medications might be shown. The parts of the plan are linked to the root <code>Assertion</code> node via the <code><em>links</em>:Set&lt;Link&gt;</code> attribute inherited from the <code>Locatable</code> class.</p>
</div>
<div id="partial_asthma_plan" class="imageblock text-center text-center">
<div class="content">
<img src="entry/diagrams/partial_asthma_plan.png" alt="partial asthma plan" width="80%">
</div>
<div class="title">Figure 9. Partial Asthma Management Plan</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_orders_and_actions"><a class="anchor" href="#_orders_and_actions"></a>5. Orders and Actions</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_overview_4"><a class="anchor" href="#_overview_4"></a>5.1. Overview</h3>
<div class="paragraph">
<p>The <code>Order</code> class is used to represent any formal order, i.e. request to perform actions for the care of a subject. It specifies actions in sufficient detail such that a competent performer(s) may execute the order.</p>
</div>
<div class="paragraph">
<p>Actions actually executed subsequent to an Order are represented by instances of the <code>Action</code> class.</p>
</div>
<div class="paragraph">
<p>The following UML diagram illustrates the <code>Order</code> and <code>Action</code> classes.</p>
</div>
<div id="entry_order" class="imageblock text-center text-center">
<div class="content">
<img src="UML/diagrams/RM-entry-order.svg" alt="RM entry order">
</div>
<div class="title">Figure 10. Order and Action</div>
</div>
<div class="paragraph">
<p>The following subsections describe Order and Action in some detail.</p>
</div>
</div>
<div class="sect2">
<h3 id="_design_concept"><a class="anchor" href="#_design_concept"></a>5.2. Design Concept</h3>
<div class="paragraph">
<p>The <code>Order</code> and <code>Action</code> classes are slightly adjusted from the openEHR <code>INSTRUCTION</code> and <code>ACTION</code> Reference Model classes, and support the same requirements and design principles described by the <a href="https://specifications.openehr.org/releases/RM/latest/ehr.html#_instruction_and_action" target="_blank" rel="noopener">openEHR model</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_model_overview"><a class="anchor" href="#_model_overview"></a>5.3. Model Overview</h3>
<div class="paragraph">
<p>An <code>Order</code> instance includes the narrative description of the order, and a list of <code>Activity</code> instances. It also includes all the attributes inherited from the <code>Care_entry</code> class, including subject, participations and so on.</p>
</div>
<div class="paragraph">
<p>Most Orders will have only one Activity, describing a single kind of therapy or medication and its timing. Some will have more than one, usually variant forms of the original. Activity instances may be completely absent from an Order, in which case only the narrative will be present. This will typically occur with imported legacy data which itself has no structured representation of medications.</p>
</div>
<div class="paragraph">
<p>The following figure illustrates the correspondence between Order and Activity structures, and Action objects that are created due to executing the Orders. Each Activity has a standard Order State Machine logically associated with it, indicated in blue. When any step in an Order Activity is executed within an ICT-supported environment, an <code>Action</code> instance describing what was done should be created and committed to the EHR. In some cases, ad hoc Actions are created even when there is no Order, such as by self-medicating patients and nurses reacting quickly to patient changes. For such Actions, there is always a notional Activity understood by the health professional.</p>
</div>
<div id="actions_and_orders" class="imageblock text-center text-center">
<div class="content">
<img src="entry/diagrams/actions_and_orders.png" alt="actions and orders" width="70%">
</div>
<div class="title">Figure 11. Correspondence of Actions to Orders</div>
</div>
<div class="paragraph">
<p>All <code>Actions</code> include the inherited <code>Care_entry</code> attributes, along with the time of being performed, a description of what was performed, and an <code>State_transition</code> object indicating the state of the Activity (whether explicit in an Order or not). The current state of an Activity is thus found not in the <code>Activity</code> instance but in the most recent <code>Action</code> instance for that Activity.</p>
</div>
<div class="paragraph">
<p>If the Action did correspond to an Order, it will also include an <code>Order_tracking</code> instance, which indicates which Activity of which Order was executed, including workflow execution details if relevant.</p>
</div>
<div class="paragraph">
<p>Under this scheme, the state of each intervention happening to the patient can be ascertained by querying, regardless of whether explicit Orders exist.</p>
</div>
<div class="paragraph">
<p>Note particularly that Actions are often performed in a different provider location, or the home, rather than the provider organisation responsible for the Order. Action objects for a given Order can thus easily appear in multiple health record systems.</p>
</div>
</div>
<div class="sect2">
<h3 id="_the_standard_order_state_machine_ism"><a class="anchor" href="#_the_standard_order_state_machine_ism"></a>5.4. The Standard Order State Machine (ISM)</h3>
<div class="paragraph">
<p>When an intervention defined by an Activity is unfolding in a clinical context, EHR users want to know things such as the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>what is the current status of an Order for the patient?</p>
</li>
<li>
<p>what is the current step in the Activity for the patient?</p>
</li>
<li>
<p>for a given patient, what Activities are planned, active, suspended, completed?</p>
</li>
<li>
<p>for the populations of patients, what is the state of a particular workflow, such as a recall, for each one?</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The approach chosen here to support such functionality is to define a standard Order state machine whose state transitions can be mapped to the steps of a specific care pathway, enabling it to be used as a descriptive device for indicating the state of any Activity. The status of an Order is determined algorithmically from the states of the constituent Activities, as described below. The state machine is illustrated below.</p>
</div>
<div id="Order_state_machine" class="imageblock text-center text-center">
<div class="content">
<img src="UML/diagrams/RM-order_state_machine.svg" alt="RM order state machine">
</div>
<div class="title">Figure 12. openEHR standard Order State Machine</div>
</div>
<div class="paragraph">
<p>This state machine is the result of long term experience with clinical workflows and act management systems. The states are as follows.</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
INITIAL
</td>
<td class="hdlist2">
<p>initial state, prior to planning activity (default starting state for computable representation of state machine).</p>
</td>
</tr>
<tr>
<td class="hdlist1">
PLANNED
</td>
<td class="hdlist2">
<p>the action has been described, but has not as yet been performed.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
POSTPONED
</td>
<td class="hdlist2">
<p>the action has not been performed and will not without specific conditions being met. Specifically, events and conditions that would normally 'activate' the Order will be ignored, until a restore event occurs.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
SCHEDULED
</td>
<td class="hdlist2">
<p>the action will be performed at some designated future time, and has been booked in a scheduling system.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
CANCELLED
</td>
<td class="hdlist2">
<p>the action was defined, but was cancelled before being performed.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
ACTIVE
</td>
<td class="hdlist2">
<p>the action is being performed according to its definition. The entire course of medication or therapy corresponds to this state.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
SUSPENDED
</td>
<td class="hdlist2">
<p>the action was begun, but has been stopped temporarily, and will not be restarted until explicitly resumed.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
ABORTED
</td>
<td class="hdlist2">
<p>the action began but was permanently terminated before normal completion.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
COMPLETED
</td>
<td class="hdlist2">
<p>the action began and was completed normally.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
EXPIRED
</td>
<td class="hdlist2">
<p>the time during which the action could have been relevant has expired; the action may have completed, been cancelled, or never occurred.</p>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>States <code>CANCELLED</code>, <code>ABORTED</code> and <code>COMPLETED</code> are all terminal states. The <code>EXPIRED</code> state is a pseudo-terminal state, from which transitions are allowed to proceed to any of the true terminal states, due to information being received after the fact (such as a patient reporting that they did indeed finish a course of antibiotics). However it is likely in the EHR that Orders for many simple medications will finish in the <code>EXPIRED</code> state and remain there.</p>
</div>
<div class="paragraph">
<p>The transitions are self-explanatory for the most part, however a few deserve comment. The <code>start</code> and <code>finish</code> events correspond to situations when the administration is not instantaneous, as is the situation with most medications. The <code>do</code> event is equivalent to the <code>finish</code> event occurring immediately after the <code>start</code> event, corresponding to an instantaneous administration, completion of which puts the Activity in the completed state. A single shot vaccination or patient taking a single tablet are typical examples. The states <code>PLANNED</code>, <code>POSTPONED</code>, <code>ACTIVE</code>, <code>SUSPENDED</code>, each have a <code>xxx_step</code> transition which return the state machine to the same state. Workflow steps that cause no transition are mapped to these events and thus leave the Order in the same state. An example is a medication review, which will leave the medication in the <code>ACTIVE</code> state, if the physician chooses to continue.</p>
</div>
<div class="paragraph">
<p>In the future, if delegation of an Order to another Order is required, nesting of a new Order state machine within the Active state of a previous one might need to be supported.</p>
</div>
<div class="paragraph">
<p>The state machine states and transition names are defined in the openEHR terminology groups "Order states" and "Order transitions" respectively.</p>
</div>
</div>
<div class="sect2">
<h3 id="_order_aggregate_state"><a class="anchor" href="#_order_aggregate_state"></a>5.5. Order Aggregate State</h3>
<div class="paragraph">
<p>Each Activity within an Order constitutes a clinically identifiable medication or therapy of some kind, while the Order usually corresponds to a grouping or combination of therapies designed to treat an overall problem. Accordingly, the Order can be seen as having an aggregate state derived from the states of the Activities, as shown in the figure below. The rules for entering each aggregate state are indicated in terms of the states of the constituent Activities.</p>
</div>
<div id="aggregate_order_state" class="imageblock text-center text-center">
<div class="content">
<img src="entry/diagrams/aggregate_order_state.png" alt="aggregate order state" width="70%">
</div>
<div class="title">Figure 13. Aggregate Order state</div>
</div>
<div class="paragraph">
<p>This state machine is not formally modelled or coded in openEHR, although it may be useful to do so within an application.</p>
</div>
</div>
<div class="sect2">
<h3 id="_careflow_process_to_state_machine_mapping"><a class="anchor" href="#_careflow_process_to_state_machine_mapping"></a>5.6. Careflow Process to State Machine Mapping</h3>
<div class="paragraph">
<p>From a health professional&#8217;s point of view, a healthcare workflow, or 'careflow', consists of steps and events designed to meet one or more goals. The steps are highly dependent on the particular kind of workflow, and will usually be named in terms familiar to the relevant kinds of clinical professionals, such as "prescribe", "book", "suspend" and so on (note that some of these names may be the same as ISM transitions, but may or may not indicate the same thing). However, the need of users of health information is to know what state the execution of an Order is in, regardless of which particular careflow step might have just been executed. This is achieved by defining the mapping between the steps of a particular careflow to the states of the ISM in an Action archetype. When each Action corresponding to a particular Order Activity is performed, it will be known both which careflow step it corresponds to and which ISM state the Activity is now in. The following table provides an example of the mapping for a UK GP medication order workflow.</p>
</div>
<table class="tableblock frame-all grid-all" style="width: 50%;">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">UK GP<br>
 Workflow Step</th>
<th class="tableblock halign-left valign-top">State machine transition</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Start</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">initiate (initial &#8594; planned)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prescribe</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">plan_step (planned &#8594; planned)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dispense</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">start (planned &#8594; active)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Administer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">active_step (active &#8594; active)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Request</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Renewal active_step (active &#8594; active)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Re-issue</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">active_step (active &#8594; active)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Review</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">active_step (active &#8594; active)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Finish</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">finish (active &#8594; completed)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cancel</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">abort (active &#8594; aborted)</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Mappings like this are specified in the <code>Action</code> archetypes for the Order. When an <code>Action</code> instance is committed to the EHR, the <code>State_transition</code> object records the step performed and the ISM state and transition. The careflow step must be one of the steps from the corresponding Order.</p>
</div>
<div class="paragraph">
<p>An optional <code><em>reason</em></code> property (of type <code>List&lt;Dv_text&gt;</code>) is provided in the <code>State_transition</code> class in order to enable one or more specific reasons for the step having occurred to be recorded.</p>
</div>
<div class="paragraph">
<p>The following section provides details of how archetypes are used to represent such mappings.</p>
</div>
</div>
<div class="sect2">
<h3 id="_relationship_to_archetypes"><a class="anchor" href="#_relationship_to_archetypes"></a>5.7. Relationship to Archetypes</h3>
<div class="paragraph">
<p>Much of the semantics of particular Orders and Actions derive from archetypes. Currently, archetypes are used to define two groups of Order semantics. The first is the descriptions of activities that are defined in Orders (<code>Activity.<em>description</em></code>) and executed in Actions (<code>Action.<em>description</em></code>). These descriptions are always of the same form for any given Order, and it is highly desirable to have the same archetype component for both. An example is where the description is of a medication, commonly consisting of a tree or list of ten or more elements describing the drug, its name, form, dose, route and so on. The same information structure is needed in the Order, where it defines what is to be administered, and in the Action, where it describes what has been administered. In any particular instance, there may be small differences in what was administered (e.g. dose or route are modified) even though the archetype model will be the same for both.</p>
</div>
<div class="paragraph">
<p>In terms of archetypes therefore, definition of two <code>Activities</code> in an <code>Order</code> (see example illustrated below) will actually create separate archetypes of the Activity structures, each of which will be one of the subtypes of <code>Cluster</code> (since this is the type of <code>Activity.<em>description</em></code> and <code>Action.<em>description</em></code>). The archetypes will then be used by both the <code>Order</code> archetype and the <code>Action</code> archetype, via the archetype slot mechanism (i.e. the standard way of composing archetypes from other archetypes; see <code>use_archetype</code> statements in the figure below).</p>
</div>
<div id="Order_and_action_archetypes" class="imageblock text-center text-center">
<div class="content">
<img src="entry/diagrams/order_and_action_archetypes.png" alt="order and action archetypes" width="70%">
</div>
<div class="title">Figure 14. Order and Action Archetypes</div>
</div>
<div class="paragraph">
<p>The second category of archetypable semantics is the correspondence between steps in a healthcare business process and the standard Order state machine, as described above. This mapping is an archetype of the <code><em>ism_transition</em></code> attribute of an <code>Action</code> attribute, and therefore defines part of the <code>Action</code> archetype. <a href="#Order_and_action_archetypes">Figure 14</a> shows how logical archetype elements in the archetyped editor environment corresponds to the resulting archetypes.</p>
</div>
<div class="paragraph">
<p>Consequently, the set of archetypes defining the clinical semantics of a specific kind of intervention will normally consists of archetypes of <code>Order</code>, <code>Action</code> and potentially component archetypes of the <code>Cluster</code> classes.</p>
</div>
</div>
<div class="sect2">
<h3 id="_class_descriptions_4"><a class="anchor" href="#_class_descriptions_4"></a>5.8. Class Descriptions</h3>
<div class="paragraph">
<p>Unresolved directive in master07-order_and_action.adoc - include::../UML/classes/org.s2.grm.entry.order.adoc[]</p>
</div>
<div class="paragraph">
<p>Unresolved directive in master07-order_and_action.adoc - include::../UML/classes/org.s2.grm.entry.activity.adoc[]</p>
</div>
<div class="paragraph">
<p>Unresolved directive in master07-order_and_action.adoc - include::../UML/classes/org.s2.grm.entry.action.adoc[]</p>
</div>
<div class="paragraph">
<p>Unresolved directive in master07-order_and_action.adoc - include::../UML/classes/org.s2.grm.entry.state_transition.adoc[]</p>
</div>
<div class="paragraph">
<p>Unresolved directive in master07-order_and_action.adoc - include::../UML/classes/org.s2.grm.entry.order_execution_state.adoc[]</p>
</div>
<div class="paragraph">
<p>Unresolved directive in master07-order_and_action.adoc - include::../UML/classes/org.s2.grm.entry.order_execution_transition.adoc[]</p>
</div>
</div>
<div class="sect2">
<h3 id="_instance_examples_3"><a class="anchor" href="#_instance_examples_3"></a>5.9. Instance Examples</h3>
<div class="sect3">
<h4 id="_chained_medication_order"><a class="anchor" href="#_chained_medication_order"></a>5.9.1. Chained Medication Order</h4>
<div class="paragraph">
<p>Often, a medication order for one drug consists of segments in which one or more of the administration details of route, form, frequency, dose etc. is changed. In hospitals, intravenous antibiotics and pain relief drugs may be followed by a tablet form of the same drug to be taken orally. Other examples are common in general practice, such as the following order:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>trade name = Panafcortelone; generic name = Prednisolone; form = tablets; dose = 25mg; route = oral; freq = bd x 3 days; od x 2 days.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The figure below illustrates the instance structure for this Order. Note that the timing attribute of the <code>Activity</code> instance is shown in human-readable form; in reality it will be a GTS string or similar (see Timing Specification section of openEHR Data Types IM).</p>
</div>
<div id="chained_medication_order" class="imageblock text-center text-center">
<div class="content">
<img src="entry/diagrams/chained_medication_order.png" alt="chained medication order" width="80%">
</div>
<div class="title">Figure 15. Chained medication order</div>
</div>
</div>
<div class="sect3">
<h4 id="_multi_drug_therapy"><a class="anchor" href="#_multi_drug_therapy"></a>5.9.2. Multi-drug Therapy</h4>
<div class="paragraph">
<p>A common regime for treating duodenal ulcer and related complaints is using Losec with other drugs, such as in the following combination:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Losec 40 mg od x 4w or until no symptoms</p>
</li>
<li>
<p>amoxicillin 500 mg 3td x 7d</p>
</li>
<li>
<p>metronidizole 400 mg 3td x 7d</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The Order for this therapy is illustrated below.</p>
</div>
<div id="multi_drug_therapy_order" class="imageblock text-center text-center">
<div class="content">
<img src="entry/diagrams/multi_drug_therapy_order.png" alt="multi drug therapy order" width="80%">
</div>
<div class="title">Figure 16. Multi-drug therapy Order</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_references"><a class="anchor" href="#_references"></a>References</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a id="Beale_Heard2007"></a>Beale, T., &amp; Heard, S. (2007). An Ontology-based Model of Clinical Information. In K. K. et al. (Ed.), <em>Proceedings MedInfo 2007</em> (pp. 760–764). IOS Publishing. Retrieved from <a href="http://www.openehr.org/publications/health_ict/MedInfo2007-BealeHeard.pdf" class="bare">http://www.openehr.org/publications/health_ict/MedInfo2007-BealeHeard.pdf</a></p>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2023-09-28 16:32:38 -0600
</div>
</div>
</body>
</html>