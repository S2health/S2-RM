<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.16">
<meta name="description" content="Graphite Entry Model">
<meta name="keywords" content="EHR, EMR, reference model, Graphite">
<title>Entry Model</title>
<link rel="stylesheet" href="https://specifications.openehr.org/styles/openehr.css">
</head>
<body class="book toc2 toc-left">
<div id="header">
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel0">
<li><a href="#_entry_model">Entry Model</a>
<ul class="sectlevel1">
<li><a href="#_amendment_record">Amendment Record</a></li>
<li><a href="#_acknowledgements">Acknowledgements</a>
<ul class="sectlevel2">
<li><a href="#_editor">Editor</a></li>
<li><a href="#_contributors">Contributors</a></li>
<li><a href="#_support">Support</a></li>
<li><a href="#_trademarks">Trademarks</a></li>
</ul>
</li>
<li><a href="#_preface">1. Preface</a>
<ul class="sectlevel2">
<li><a href="#_purpose">1.1. Purpose</a></li>
<li><a href="#_related_documents">1.2. Related Documents</a></li>
<li><a href="#_status">1.3. Status</a></li>
<li><a href="#_feedback">1.4. Feedback</a></li>
<li><a href="#_conformance">1.5. Conformance</a></li>
</ul>
</li>
<li><a href="#_overview">2. Overview</a>
<ul class="sectlevel2">
<li><a href="#_design_principles">2.1. Design Principles</a></li>
</ul>
</li>
<li><a href="#_entry_and_its_subtypes">3. Entry and its Subtypes</a>
<ul class="sectlevel2">
<li><a href="#_the_entry_class">3.1. The Entry class</a></li>
<li><a href="#_care_entry_and_admin_entry">3.2. Care_entry and Admin_entry</a></li>
<li><a href="#_class_descriptions">3.3. Class Descriptions</a>
<ul class="sectlevel3">
<li><a href="#_entry_class">3.3.1. Entry Class</a></li>
<li><a href="#_admin_entry_class">3.3.2. Admin_entry Class</a></li>
<li><a href="#_care_entry_class">3.3.3. Care_entry Class</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_observation">4. Observation</a>
<ul class="sectlevel2">
<li><a href="#_overview_2">4.1. Overview</a></li>
<li><a href="#_semantics">4.2. Semantics</a></li>
<li><a href="#_timing_in_observations">4.3. Timing in Observations</a></li>
<li><a href="#_valid_contents_of_a_history">4.4. Valid Contents of a History</a></li>
<li><a href="#_clinical_semantics_of_event_time">4.5. Clinical Semantics of Event Time</a></li>
<li><a href="#_two_ways_of_recording_state">4.6. Two ways of Recording State</a></li>
<li><a href="#_class_descriptions_2">4.7. Class Descriptions</a>
<ul class="sectlevel3">
<li><a href="#_observation_class">4.7.1. Observation Class</a></li>
</ul>
</li>
<li><a href="#_instance_structures">4.8. Instance Structures</a>
<ul class="sectlevel3">
<li><a href="#_heart_rate_measurement_series">4.8.1. Heart-rate Measurement Series</a></li>
<li><a href="#_blood_pressure_with_protocol">4.8.2. Blood Pressure with Protocol</a></li>
<li><a href="#_glucose_tolerance_test">4.8.3. Glucose Tolerance Test</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_questionnaire_response">5. Questionnaire Response</a>
<ul class="sectlevel2">
<li><a href="#_overview_3">5.1. Overview</a></li>
<li><a href="#_semantics_2">5.2. Semantics</a></li>
<li><a href="#_class_descriptions_3">5.3. Class Descriptions</a>
<ul class="sectlevel3">
<li><a href="#_questionnaire_response_class">5.3.1. Questionnaire_response Class</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_assertion">6. Assertion</a>
<ul class="sectlevel2">
<li><a href="#_overview_4">6.1. Overview</a></li>
<li><a href="#_semantics_3">6.2. Semantics</a></li>
<li><a href="#_class_descriptions_4">6.3. Class Descriptions</a>
<ul class="sectlevel3">
<li><a href="#_assertion_class">6.3.1. Assertion Class</a></li>
</ul>
</li>
<li><a href="#_instance_structures_2">6.4. Instance Structures</a>
<ul class="sectlevel3">
<li><a href="#_partial_asthma_management_plan">6.4.1. Partial Asthma Management Plan</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_orders_and_actions">7. Orders and Actions</a>
<ul class="sectlevel2">
<li><a href="#_overview_5">7.1. Overview</a></li>
<li><a href="#_requirements">7.2. Requirements</a></li>
<li><a href="#_design_principles_2">7.3. Design Principles</a></li>
<li><a href="#_model_overview">7.4. Model Overview</a></li>
<li><a href="#_order_activity_timing">7.5. Order Activity Timing</a></li>
<li><a href="#_the_standard_order_state_machine_ism">7.6. The Standard Order State Machine (ISM)</a></li>
<li><a href="#_order_aggregate_state">7.7. Order Aggregate State</a></li>
<li><a href="#_careflow_process_to_state_machine_mapping">7.8. Careflow Process to State Machine Mapping</a></li>
<li><a href="#_relationship_to_archetypes">7.9. Relationship to Archetypes</a></li>
<li><a href="#_class_descriptions_5">7.10. Class Descriptions</a>
<ul class="sectlevel3">
<li><a href="#_order_class">7.10.1. Order Class</a></li>
<li><a href="#_activity_class">7.10.2. Activity Class</a></li>
<li><a href="#_action_class">7.10.3. Action Class</a></li>
<li><a href="#_order_details_class">7.10.4. Order_details Class</a></li>
<li><a href="#_ism_transition_class">7.10.5. Ism_transition Class</a></li>
</ul>
</li>
<li><a href="#_instance_structures_3">7.11. Instance Structures</a>
<ul class="sectlevel3">
<li><a href="#_chained_medication_order">7.11.1. Chained Medication Order</a></li>
<li><a href="#_multi_drug_therapy">7.11.2. Multi-drug Therapy</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_references">References</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="imageblock text-center">
<div class="content">
<img src="https://uploads-ssl.webflow.com/63570cd7d4eda80d654ccf14/64027a592d749e7df28c6248_primary-graphite.svg" alt="openEHR logo">
</div>
</div>
</div>
</div>
<h1 id="_entry_model" class="sect0"><a class="anchor" href="#_entry_model"></a>Entry Model</h1>
<div class="openblock partintro">
<div class="content">
<table class="tableblock frame-all grid-all fit-content spread">
<colgroup>
<col>
<col>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top" colspan="2"><strong>Issuer</strong>: <a href="http://graphitehealth.io" target="_blank" rel="noopener">Graphite Platform Community</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Release</strong>: GCM latest</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Status</strong>: TRIAL</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Revision</strong>: <a href="#latest_issue">[latest_issue]</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Date</strong>: <a href="#latest_issue_date">[latest_issue_date]</a></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>Keywords</strong>: EHR, EMR, reference model, Graphite</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top" colspan="2">&#169; 2023 - 2023 Graphite Platform Publishing</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><a href="http://graphitehealth.io" target="_blank" rel="noopener">Graphite Platforms</a> is an independent, non-profit foundation.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>Licence</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="https://specifications.openehr.org/images/cc-by-nd-88x31.png" alt="image"></span> Creative Commons Attribution-NoDerivs 3.0 Unported. <a href="https://creativecommons.org/licenses/by-nd/3.0/" class="bare">https://creativecommons.org/licenses/by-nd/3.0/</a></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>Support</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Issues: <a href="https://specifications.graphitehealth.io/components/GCM/open_issues" target="_blank" rel="noopener">Report an Issue</a><br>
 Web: <a href="https://specifications.graphitehealth.io" target="_blank" rel="noopener">specifications.GraphiteHealth.io</a></p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_amendment_record"><a class="anchor" href="#_amendment_record"></a>Amendment Record</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 9.0909%;">
<col style="width: 54.5454%;">
<col style="width: 18.1818%;">
<col style="width: 18.1819%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Issue</th>
<th class="tableblock halign-left valign-top">Details</th>
<th class="tableblock halign-left valign-top">Raiser</th>
<th class="tableblock halign-left valign-top">Completed</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="latest_issue"></a>0.1.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Initial Writing: based on openEHR EHR Information Model</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="latest_issue_date"></a>10 Apr 2023</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_acknowledgements"><a class="anchor" href="#_acknowledgements"></a>Acknowledgements</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_editor"><a class="anchor" href="#_editor"></a>Editor</h3>
<div class="ulist">
<ul>
<li>
<p>Graphite Informatics group.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_contributors"><a class="anchor" href="#_contributors"></a>Contributors</h3>
<div class="paragraph">
<p>This specification benefited from input from the wider health informatics community. The openEHR Foundation would like to recognise the following people for their contributions.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>xxx</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_support"><a class="anchor" href="#_support"></a>Support</h3>
<div class="paragraph">
<p>The work reported in this paper has been funded in part by the following organisations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>xxx</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_trademarks"><a class="anchor" href="#_trademarks"></a>Trademarks</h3>
<div class="ulist">
<ul>
<li>
<p>'openEHR' is a trademark of the openEHR Foundation</p>
</li>
<li>
<p>'Java' is a registered trademark of Oracle Corporation</p>
</li>
<li>
<p>'Microsoft' and '.Net' are trademarks of the Microsoft Corporation</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_preface"><a class="anchor" href="#_preface"></a>1. Preface</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose"><a class="anchor" href="#_purpose"></a>1.1. Purpose</h3>
<div class="paragraph">
<p>This document describes the Graphite Entry Model, part of the Graphite Canonical Model.</p>
</div>
<div class="paragraph">
<p>The intended audience includes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The open source healthcare community;</p>
</li>
<li>
<p>Solution vendors;</p>
</li>
<li>
<p>Medical informaticians and clinicians interested in health information.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_related_documents"><a class="anchor" href="#_related_documents"></a>1.2. Related Documents</h3>
<div class="paragraph">
<p>Prerequisite documents for reading this document include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <a href="https://specifications.openehr.org/releases/BASE/latest/architecture_overview.html" target="_blank" rel="noopener">openEHR Architecture Overview</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Related documents include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <a href="https://specifications.openehr.org/releases/RM/latest/support.html" target="_blank" rel="noopener">openEHR Support Information Model</a>;</p>
</li>
<li>
<p>The <a href="https://specifications.openehr.org/releases/RM/latest/data_types.html" target="_blank" rel="noopener">openEHR Data Types Information Model</a>;</p>
</li>
<li>
<p>The <a href="https://specifications.openehr.org/releases/RM/latest/data_structures.html" target="_blank" rel="noopener">openEHR Data Structures Information Model</a>;</p>
</li>
<li>
<p>The <a href="https://specifications.openehr.org/releases/RM/latest/common.html" target="_blank" rel="noopener">openEHR Common Information Model</a>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_status"><a class="anchor" href="#_status"></a>1.3. Status</h3>
<div class="paragraph">
<p>This specification is in the TRIAL state. The development version of this document can be found at <a href="https://specifications.openehr.org/releases/RM/latest/ehr.html" target="_blank" rel="noopener">https://specifications.openehr.org/releases/RM/latest/ehr.html</a>.</p>
</div>
<div class="paragraph">
<p>Known omissions or questions are indicated in the text with a 'to be determined' paragraph, as follows:</p>
</div>
<div class="paragraph tbd">
<p><strong>TBD</strong>: (example To Be Determined paragraph)</p>
</div>
</div>
<div class="sect2">
<h3 id="_feedback"><a class="anchor" href="#_feedback"></a>1.4. Feedback</h3>
<div class="paragraph">
<p>Feedback may be provided on the <a href="https://discourse.openehr.org/c/specifications/rm" target="_blank" rel="noopener">Graphite specifications forum</a>.</p>
</div>
<div class="paragraph">
<p>Issues may be raised on the <a href="https://specifications.graphitehealth.io/components/GCM/open_issues" target="_blank" rel="noopener">specifications Problem Report tracker</a>.</p>
</div>
<div class="paragraph">
<p>To see changes made due to previously reported issues, see the <a href="https://specifications.graphitehealth.io/components/GCM/history" target="_blank" rel="noopener">GCM component Change Request tracker</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_conformance"><a class="anchor" href="#_conformance"></a>1.5. Conformance</h3>
<div class="paragraph">
<p>Conformance of a data or software artifact to a Graphite specification is determined by a formal test of that artifact against the relevant openEHR Implementation Technology Specification(s) (ITSs), such as an IDL interface or an XML-schema. Since ITSs are formal derivations from underlying models, ITS conformance indicates model conformance.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_overview"><a class="anchor" href="#_overview"></a>2. Overview</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_design_principles"><a class="anchor" href="#_design_principles"></a>2.1. Design Principles</h3>
<div class="paragraph">
<p>THe design principles of the Entry model are described in the <a href="https://specifications.openehr.org/releases/RM/latest/ehr.html" target="_blank" rel="noopener">openEHR EHR Specification</a>.</p>
</div>
<div class="paragraph tbd">
<p>TBD</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_entry_and_its_subtypes"><a class="anchor" href="#_entry_and_its_subtypes"></a>3. Entry and its Subtypes</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Entry model is defined by the <code>composition.content.entry package</code>, shown in the UML diagram below. The choice of subtypes of <code>ENTRY</code> is based on the ontology shown in <a href="#CIR_ontology">[CIR_ontology]</a> and its associated model. The names do not coincide exactly however, for a number of reasons. Firstly, the category names in the hierarchy were chosen based on a philosophical/scientific model of investigation, and reflecting linguistic norms for the meanings of the terms, whereas the class names used here reflect common health computing and clinical usage of these terms (i.e. names which will make sense to software developers in the health arena). Names in these two cultures do not always coincide. Additionally, for categories such as Opinion and Instruction, the subcategories shown in the ontology (e.g. Assessment, Goal and Plan) are too variable to safely be subtyped in software, and are distinguished only at the archetype level. Only a single class for each of these ontological groups is used in the formal model. The use of different names and a slightly simplified mapping has not however prevented the faithful implementation of the semantics of the model. The model classes are described in the following subsections.</p>
</div>
<div id="entry_main" class="imageblock text-center text-center">
<div class="content">
<img src="UML/diagrams/GCM-entry-main.svg" alt="GCM entry main">
</div>
<div class="title">Figure 1. gcm.entry package</div>
</div>
<div class="sect2">
<h3 id="_the_entry_class"><a class="anchor" href="#_the_entry_class"></a>3.1. The Entry class</h3>
<div class="paragraph">
<p>All Entries have a number of attributes in common. The language and encoding attributes indicate how all text data within the Entry are to be interpreted linguistically and at the character set level. Normally, the language will be the same throughout the entire Entry (if not Composition), but in cases where it is not, the optional language attribute of <code>DV_TEXT</code> can be used to override the value in the enclosing <code>ENTRY</code> (or other enclosing structure, if a <code>DV_TEXT</code> is being used in some other context). Character encoding can be overridden in the same fashion by the encoding attribute within <code>DV_TEXT</code>.</p>
</div>
<div class="paragraph">
<p>The other attributes common to all Entry subtypes are as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code><em>subject</em></code>: this attribute records the subject of the Entry as an instance of a subtype of <code>PARTY_PROXY</code>. When this is the record subject, (i.e. the patient), the value is an instance of <code>PARTY_SELF</code>. Otherwise it is typically a family member, sexual partner, or other acquaintance of the record subject. It could also be an organ donor. The latter is expressed in the form of a <code>PARTY_IDENTIFIED</code> or <code>RELATED_PARTY</code> instance, which describes the kind of relationship, and optionally, identifies the demographic entity.</p>
</li>
<li>
<p><code><em>subject_is_self</em></code>: convenience function returning True when the Entry is about the subject of the record.</p>
</li>
<li>
<p><code><em>provider</em></code>: the agent who provided the information. This is usually the patient or the clinician, but may be someone else, or a software application or device. If participation details of the provider (e.g. mode of communication) need to be recorded, the details should be recorded once in the <code>EVENT_CONTEXT</code>.<code><em>participations</em></code>. The provider attribute is optional, since it is often implicit in the information that was recorded.</p>
</li>
<li>
<p><code><em>other_participations</em></code>: other participations which existed for this Entry, e.g. a nurse who administered a drug in an <code>INSTRUCTION</code>; only required in cases where participants other than the subject of the information and the provider of the information need to be recorded.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Note that the term 'provider' as used here should not be confused with the more specific healthcare term used in many english-speaking countries meaning 'health care provider', which is usually understood to be a physician or healthcare delivery enterprise such as a hospital. In the model here, it simply means 'provider of information' in the context of an Entry. The information provider is optional, and in many cases will not be recorded, since it will be obvious from the <code><em>composer</em></code> and <code><em>other_participations</em></code> of the enclosing Composition. In many cases, it is not sensible to record a provider, e.g. in the most mundane case where a GP asks "where does it hurt" and the patient says "here" - in such cases, it can only be considered mutual. It is expected to be used only when the composer of the Composition really needs to specify the origin of specific statements, such as in the following circumstances:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the information provider is specifically accountable for the Entry data (it is their opinion, their decision, they carried out the test etc) - they might also need to attest it;</p>
</li>
<li>
<p>the information provider is an authoritative source, or has provided information from a unique perspective (e.g. the view of a spouse/ carer on the patient&#8217;s functional health status or mental state);</p>
</li>
<li>
<p>the information provider&#8217;s view might not reflect the consensus (e.g. a patient opinion not held by the composer, a difference between father and mother on a description of a child&#8217;s sleeping pattern);</p>
</li>
<li>
<p>the information provider is not one of the Composition-level participants (e.g. an outside information provider such as someone telephoned during the encounter to provide a lab result, or an automated measurement device, or a decision support software component).</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_care_entry_and_admin_entry"><a class="anchor" href="#_care_entry_and_admin_entry"></a>3.2. Care_entry and Admin_entry</h3>
<div class="paragraph">
<p>A basic division occurs between clinical and non-clinical information. The <code>CARE_ENTRY</code> class is an abstract precursor of classes that express information of any clinical activity in the care process around the patient, while <code>ADMIN_ENTRY</code> is used to capture administrative information. The division may occasionally seem ambiguous at a theoretical level, but at a practical level, it is almost always clear. Administrative information has the following characteristics:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>it is created by non-clinical staff, or clinical staff acting in an administrative capacity (e.g. a nurse or doctor who has to fill out an admission form in A&amp;E);</p>
</li>
<li>
<p>it expresses details to do with coordinating the clinical process, by recording e.g. admission information (enables clinical staff to know who is in the hospital and where they can be found), appointments (ensuring patient and physician get together at an agreed time and place), discharge/dismissal (allowing clinical staff to know that a patient has been sent home healthy, or transferred to another institution), billing and insurance information (where such information is required in the EHR; it may well be in its own system);</p>
</li>
<li>
<p>removing administrative information from the EHR would not compromise its clinical integrity, it would simply mean that carers and patients would no longer know when and where they were supposed to meet, or when the patient has entered or left a health care facility.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Conversely, every instance of a <code>CARE_ENTRY</code> subtype is clinically significant, even if it also carries information which might be of interest to other health management functions billing (e.g. <a href="http://www.who.int/classifications/icd/en/">ICD10</a> coded diagnoses), practice management (e.g. date, time and place in an order for day surgery). The <code>CARE_ENTRY</code> type includes two attributes particular to all clinical entries, namely <code><em>protocol</em></code> and <code><em>guideline_id</em></code>.</p>
</div>
<div class="paragraph">
<p>These attributes allow the 'how' and 'why' aspects of any clinical recording to be expressed. Protocol is often recorded for Observations, e.g. staining method in microscopy, and Instructions, e.g. Bruce protocol for ECG test.</p>
</div>
</div>
<div class="sect2">
<h3 id="_class_descriptions"><a class="anchor" href="#_class_descriptions"></a>3.3. Class Descriptions</h3>
<div class="sect3">
<h4 id="_entry_class"><a class="anchor" href="#_entry_class"></a>3.3.1. Entry Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong><em>Entry (abstract)</em></strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>The abstract parent of all <code>ENTRY</code> subtypes. An <code>ENTRY</code> is the root of a logical item of  hard  clinical information created in the  clinical statement  context, within a clinical session. There can be numerous such contexts in a clinical session. Observations and other Entry types only ever document information captured/created in the event documented by the enclosing Composition.</p>
</div>
<div class="paragraph">
<p>An <code>ENTRY</code> is also the minimal unit of information any query should return, since a whole <code>ENTRY</code> (including subparts) records spatial structure, timing information, and contextual information, as well as the subject and generator of the information.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="/releases/GCM/{gcm_release}/ehr.html#_content_item_class" target="_blank" rel="noopener">Content_item</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>language</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_terminology_code_class" target="_blank" rel="noopener">Terminology_code</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Mandatory indicator of the localised language in which this Entry is written. Coded from openEHR Code Set  languages .</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>encoding</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_terminology_code_class" target="_blank" rel="noopener">Terminology_code</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Name of character set in which text values in this Entry are encoded. Coded from openEHR Code Set  character sets.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>other_participations</strong>: <code>List&lt;<a href="/releases/BASE/latest/base_types.html#_participation_class" target="_blank" rel="noopener">Participation</a>&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Other participations at <code>ENTRY</code> level.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>workflow_id</strong>: <code><a href="/releases/BASE/latest/base_types.html#_object_ref_class" target="_blank" rel="noopener">OBJECT_REF</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Identifier of externally held workflow engine data for this workflow execution, for this subject of care.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>subject</strong>: <code><a href="/releases/BASE/latest/base_types.html#_party_proxy_class" target="_blank" rel="noopener">Party_proxy</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Id of human subject of this <code>ENTRY</code>, e.g.:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>organ donor</p>
</li>
<li>
<p>foetus</p>
</li>
<li>
<p>a family member</p>
</li>
<li>
<p>another clinically relevant person.</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>reporter</strong>: <code><a href="/releases/BASE/latest/base_types.html#_party_proxy_class" target="_blank" rel="noopener">Party_proxy</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Optional identification of provider of the information in this <code>ENTRY</code>, which might be:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the patient</p>
</li>
<li>
<p>a patient agent, e.g. parent, guardian</p>
</li>
<li>
<p>the clinician</p>
</li>
<li>
<p>a device or software</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Generally only used when the recorder needs to make it explicit. Otherwise, Composition composer and other participants are assumed.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>comment</strong>: <code><a href="/releases/GCM/{gcm_release}/data_types.html#_dv_text_class" target="_blank" rel="noopener">Dv_text</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>TODO: consider if needed to take comment field from CEM StatementBase</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>subject_is_self</strong> (): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code><br>
<br>
<em>Post_condition</em>: <code>Result implies subject.generating_type = “PARTY_SELF”</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Returns True if this Entry is about the subject of the EHR, in which case the subject attribute is of type PARTY_SELF.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Invariants</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><em>Language_valid</em>: <code>code_set (Code_set_id_languages).has_code (language)</code></p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><em>Encoding_valid</em>: <code>code_set (Code_set_id_character_sets).has_code (encoding)</code></p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><em>Subject_validity</em>: <code>subject_is_self implies subject.generating_type = “PARTY_SELF”</code></p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><em>Other_participations_valid</em>: <code>other_participations /= Void implies not other_participations.is_empty</code></p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><em>Is_archetype_root</em>: <code>is_archetype_root</code></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_admin_entry_class"><a class="anchor" href="#_admin_entry_class"></a>3.3.2. Admin_entry Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>Admin_entry</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Entry subtype for administrative information, i.e. information about setting up the clinical process, but not itself clinically relevant. Archetypes will define contained information.</p>
</div>
<div class="paragraph">
<p>Used for administrative details of admission, episode, ward location, discharge, appointment (if not stored in a practice management or appointments system).</p>
</div>
<div class="paragraph">
<p>Not to be used for any clinically significant information.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_entry_class">Entry</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>data</strong>: <code><a href="/releases/GCM/{gcm_release}/data_structures.html#_cluster_class" target="_blank" rel="noopener">Cluster</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Content of the Admin Entry.
The data of the Entry; modelled in archetypes.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_care_entry_class"><a class="anchor" href="#_care_entry_class"></a>3.3.3. Care_entry Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong><em>Care_entry (abstract)</em></strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>The abstract parent of all clinical <code>ENTRY</code> subtypes. A <code>CARE_ENTRY</code> defines protocol and guideline attributes for all clinical Entry subtypes.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_entry_class">Entry</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>protocol</strong>: <code><a href="/releases/GCM/{gcm_release}/data_structures.html#_cluster_class" target="_blank" rel="noopener">Cluster</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Description of the method (i.e. how) the information in this entry was arrived at. For <code>OBSERVATIONs</code>, this is a description of the method or instrument used. For <code>EVALUATIONs</code>, how the evaluation was arrived at. For <code>INSTRUCTIONs</code>, how to execute the Instruction. This may take the form of references to guidelines, including manually followed and executable; knowledge references such as a paper in Medline; clinical reasons within a larger care process.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>guideline_id</strong>: <code><a href="/releases/BASE/latest/base_types.html#_object_ref_class" target="_blank" rel="noopener">OBJECT_REF</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Optional external identifier of guideline creating this Entry if relevant.</p>
</div>
<div class="paragraph">
<p>TODO: probably should be a Uri</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_observation"><a class="anchor" href="#_observation"></a>4. Observation</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_overview_2"><a class="anchor" href="#_overview_2"></a>4.1. Overview</h3>
<div class="paragraph">
<p>The following UML diagram shows the Observation class and related sub-structure.</p>
</div>
<div id="entry_observation" class="imageblock text-center text-center">
<div class="content">
<img src="UML/diagrams/GCM-entry-observation.svg" alt="GCM entry observation">
</div>
<div class="title">Figure 2. Observation</div>
</div>
</div>
<div class="sect2">
<h3 id="_semantics"><a class="anchor" href="#_semantics"></a>4.2. Semantics</h3>
<div class="paragraph">
<p>Instances of the <code>OBSERVATION</code> class record the observation of any phenomenon or state of interest to do with the patient, including pathology results, blood pressure readings, the family history and social circumstances as told by the patient to the doctor, patient answers to physician questions during a physical examination, and responses to a psychological assessment questionnaire. Observations are distinguished from Actions in that Actions are interventions whereas Observations record only information relating to the situation of the patient, not what is done to him/her.</p>
</div>
<div class="paragraph">
<p>The significant information of an Observation is expressed in terms of 'data', 'state' and 'protocol'. The first of these is recorded in the data attribute, defined as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code><em>data</em></code>: the actual datum being recorded; expressed in the form of a History of Events, each of which can be a complex data structure such as a List, Table, Single (value), or Tree, in its own right. Examples include blood pressure, heart-rate, ECG traces.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>State information can be recorded in the state attribute of Observation, or within the state attribute of each Event in the Observation data attribute (see below and also Data Structures IM for more detailed explanations). The state attribute in Observation is defined as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code><em>state</em></code>: any particular information about the state of the subject of the Entry necessary to correctly interpret the data, which is not already known in the health record (i.e. facts such as the patient being female, pregnant, or currently undergoing chemotherapy). For example, exertion level (resting, post-marathon&#8230;&#8203;), position (lying, standing), post-glucose challenge, and so on. The form of the <code><em>state</em></code> attribute is the same as that of the <code><em>data</em></code> attribute: a <code>HISTORY</code> of <code>EVENT</code> of <code>ITEM_STRUCTURE</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The inherited protocol attribute is defined as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code><em>protocol</em></code>: details of how the observation was carried out, which might include a particular clinical protocol (e.g. Bruce protocol for treadmill exercise ECG) and/or information about instruments other observational methods. This information can always be safely omitted from the user interface, i.e. has no bearing on the interpretation of the data.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The detailed semantics of Observation data are described in the following subsections.</p>
</div>
</div>
<div class="sect2">
<h3 id="_timing_in_observations"><a class="anchor" href="#_timing_in_observations"></a>4.3. Timing in Observations</h3>
<div class="paragraph">
<p>Many health information models express observation time as one or more attributes with names like 'observation_time', 'activity_time' and so on. The openEHR model departs from this by modelling historical time inside a History/Event structure defined in the <code>data_structures.history</code> package. In short, this package defines the <code>HISTORY</code> class with an origin attribute, and a series of <code>EVENT</code> instances each containing a time attribute. Instantaneous and interval events are distinguished via the <code>EVENT</code> subtypes <code>POINT_EVENT</code> and <code>INTERVAL_EVENT</code>; interval events have the width attribute is set to the duration of the interval.</p>
</div>
</div>
<div class="sect2">
<h3 id="_valid_contents_of_a_history"><a class="anchor" href="#_valid_contents_of_a_history"></a>4.4. Valid Contents of a History</h3>
<div class="paragraph">
<p>One of the aims of the model of Observation described here is to represent in the same way single sample and multi-sample time-based data for which measurement protocol is invariant. It is not intended for measurements in "coarse" time taken by different people, different instruments, or with any other difference in data-gathering technique. In these cases, separate, usually single-sample histories are used, usually occurring in distinct container objects (e.g. distinct Compositions, in the EHR).</p>
</div>
<div class="paragraph">
<p>Accordingly, in the general practice setting, the use of <code>HISTORY</code> will correspond to measurement series which occur during the clinical session (i.e. during a patient contact). In a hospital setting, nurses' observations might occur in 4-hourly intervals, and there is no well-defined clinical session - simply a series of <code>ENTRYs</code> during the time of the episode. Two approaches are possible here.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If each Observation is to be committed to the EHR as soon as it is made, the result will be distinct <code>COMPOSITIONs</code> in time, each with its event_context corresponding to the period of the nurse&#8217;s presence. Each Composition will contain one or more Observations, each containing in their data a History of one sample of the measured vital sign.</p>
</li>
<li>
<p>If Observations are not committed to the EHR immediately, but are stored elsewhere and only committed (say) at the end of each day, then the result will be a single Composition whose event_context corresponds to the total data gathering period, and which contains Observations whose data are multi-event Histories representing the multiple measurements made over the day.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Whether time-based data remain outside the record until a series of desired length is gathered, or entered as it occurs is up to the design of applications and systems; the approach taken should be based on the desired availability of the data in the system in question. If for example, it must be visible in the EHR as soon as the appropriate Compositions are written, then it should be represented as Histories in each relevant Composition; if it need only be available at some much later point in time (e.g. because it is known that no-one but the treating clinician is interested in it), then it can be stored in another system until sufficient items have been gathered for committal to the EHR.</p>
</div>
</div>
<div class="sect2">
<h3 id="_clinical_semantics_of_event_time"><a class="anchor" href="#_clinical_semantics_of_event_time"></a>4.5. Clinical Semantics of Event Time</h3>
<div class="paragraph">
<p>In most cases, the times recorded in a History (<code>HISTORY</code>.<code><em>origin</em></code> and <code>EVENT</code>.<code><em>time</em></code>, <code><em>width</em></code>) can be thought of as "the times when the observed phenomena were true". For example, if a pulse of 88bpm is recorded for 12/feb/2005 12:44:00, this is the time at which the heartrate (for which pulse is a surrogate) existed. In such cases, the sample time, and the measuring time are one and the same.</p>
</div>
<div class="paragraph">
<p>However in cases where the time of sampling is different from that of measurement, the semantics are more subtle. There are two cases. The first is where a sample is taken (e.g. a tissue sample in a needle biopsy), and is tested later on, but from the point of view of the test, the time delay makes no difference. This might be because the sample was immediately preserved (e.g. freezing, placed in a sterile anaerobic transport container), or because even if it decays in some way, it makes no difference to the test (e.g. bacteria may die, but this makes no difference to a PCT analysis, as long as the biological matter is not physically destroyed).</p>
</div>
<div class="paragraph">
<p>The second situation is when the sample does decay in some way, and the delay is relevant. Most such cases are in pathology tests, where presence of live biological organisms (e.g. anaerobic bacteria) is being measured. The sample time (or 'collection' time) must be recorded. Depending on when the test is done, the results may be interpreted differently.</p>
</div>
<div class="paragraph">
<p>The key question is: what is the meaning of the <code>HISTORY</code>.<code><em>origin</em></code> and <code>EVENT</code>.<code><em>time</em></code> attributes in these situations? It is tempting to say that their values are (as in other cases) just the times of the actual act of observation, e.g. microscopy, chromatography etc. However, there are two problems with this. Firstly, and most importantly, all physical samples must be understood as being <em>indirect surrogates for some aspect of the patient state</em> at the time of sampling, which cannot be observed by direct, instantaneous means in the way a pulse can be taken. This means that no matter when the laboratory work is done, the time to which the result applies is the sample time. It is up to the laboratory to take into account time delays and effects of decay of samples in order to provide a test result which correctly indicates the state of the patient at the time of sampling. The common sense of this is clear when one considers the extreme case where the patient is in a coma or dead (possibly for reasons completely unrelated to the problem being tested for) by the time laboratory testing actually occurs; however, the test result indicates the situation at the point in time when the sample was taken, i.e. when the patient was alive. The second reason is that some kinds of testing are themselves lengthy. For example fungal specimens require 4-6 weeks to confirm a negative result; checks will be made on a daily or weekly basis to find positive growth. However, the result data reported by the laboratory (and therefore the structure of the Observation) is not related to the timing of the laboratory testing; it is reported as being the result for the time of collection of the specimen from the patient.</p>
</div>
<div class="paragraph">
<p>The meaning therefore of the <code>HISTORY</code>.<code><em>origin</em></code> and <code>EVENT</code>.<code><em>time</em></code> attributes in openEHR is always the time of sampling. Where delays between sample and measurement times exist and are significant, they are noted in the protocol section of the Observation; such times are modelled in the appropriate archetypes, and taken into account in results.</p>
</div>
</div>
<div class="sect2">
<h3 id="_two_ways_of_recording_state"><a class="anchor" href="#_two_ways_of_recording_state"></a>4.6. Two ways of Recording State</h3>
<div class="paragraph">
<p>State information is optional, and is not needed if the data are meaningful on their own. If it is recorded, it can either be as a History of its own (i.e. using the <code>OBSERVATION</code>.<code><em>state</em></code> atttribute described above), or else as state values within the <code>EVENT</code> instances in the <code>OBSERVATION</code>.<code><em>data</em></code> History. Both methods are useful in different circumstances. A separate state history is more likely to be used in a correlation study such as a sports medicine study on heartrate with respect to specific types of exercise. In this method, the state information is a History of Events whose times and widths need not match those of the History in the data attribute. The state data under this approach generally express the condition of the subject in absolute terms, i.e. they are standalone statements about the subject&#8217;s state at certain points in time, such as "walking on treadmill 10km/h, 10<sup>o</sup> incline".</p>
</div>
<div class="paragraph">
<p>The other method will be used in most general medicine, e.g. for recording fasting and post glucose challenge states of a patient undergoing a glucose tolerance test. (See the Data Structures Information Model for more details). State values stored within the <code><em>data</em></code> History represent the situation in the subject at the time of the Event within the History and usually in relation to it, for example "post 8 hour fast". Recording the latter example in an independent state History would require an Event of 8 hours' duration called 'fast'. The latter would be technically still correct, but would be very unnatural to most clinicians. The figure below illustrates the two methods of recording state.</p>
</div>
<div id="recording_state" class="imageblock text-center text-center">
<div class="content">
<img src="entry/diagrams/recording_state.png" alt="recording state" width="65%">
</div>
<div class="title">Figure 3. Alternative ways of recording state</div>
</div>
</div>
<div class="sect2">
<h3 id="_class_descriptions_2"><a class="anchor" href="#_class_descriptions_2"></a>4.7. Class Descriptions</h3>
<div class="sect3">
<h4 id="_observation_class"><a class="anchor" href="#_observation_class"></a>4.7.1. Observation Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>Observation</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Entry subtype for all clinical data in the past or present, i.e. which (by the time it is recorded) has already occurred. <code>OBSERVATION</code> data is expressed using the class <code>HISTORY&lt;T&gt;</code>, which guarantees that it is situated in time. <code>OBSERVATION</code> is used for all notionally objective (i.e. measured in some way) observations of phenomena, and patient-reported phenomena, e.g. pain.</p>
</div>
<div class="paragraph">
<p>Not to be used for recording opinion or future statements of any kind, including iinstructions, intentions, plans etc.</p>
</div>
<div class="paragraph">
<p>GRAPHITE: Corresponds to many/most? Evaluation CEMs relating to observation activities e.g. auscultation etc.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_care_entry_class">Care_entry</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>data</strong>: <code><a href="/releases/GCM/{gcm_release}/data_structures.html#_history_class" target="_blank" rel="noopener">History</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The data of this observation, in the form of a history of values which may be of any complexity.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>state</strong>: <code><a href="/releases/GCM/{gcm_release}/data_structures.html#_history_class" target="_blank" rel="noopener">History</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Optional recording of the state of subject of this observation during the observation process, in the form of a separate history of values which may be of any complexity. State may also be recorded within the History of the data attribute.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_instance_structures"><a class="anchor" href="#_instance_structures"></a>4.8. Instance Structures</h3>
<div class="paragraph">
<p>The following subsections illustrate typical Entry instance structures. For guidance on how to best model particular clinical statements, see the archetype part of the <a href="https://www.openehr.org/ckm" target="_blank" rel="noopener">openEHR Clinical Knowledge Manager repository</a>.</p>
</div>
<div class="sect3">
<h4 id="_heart_rate_measurement_series"><a class="anchor" href="#_heart_rate_measurement_series"></a>4.8.1. Heart-rate Measurement Series</h4>
<div class="paragraph">
<p>The following figure illustrates three heart-rate measurements over 10 minutes.</p>
</div>
<div id="periodic_series" class="imageblock text-center text-center">
<div class="content">
<img src="entry/diagrams/periodic_series.png" alt="periodic series" width="80%">
</div>
<div class="title">Figure 4. Periodic series instance structure</div>
</div>
</div>
<div class="sect3">
<h4 id="_blood_pressure_with_protocol"><a class="anchor" href="#_blood_pressure_with_protocol"></a>4.8.2. Blood Pressure with Protocol</h4>
<div class="paragraph">
<p>The following figure illustrates a blood pressure observation with protocol.</p>
</div>
<div id="BP_measurement" class="imageblock text-center text-center">
<div class="content">
<img src="entry/diagrams/BP_measurement.png" alt="BP measurement" width="70%">
</div>
<div class="title">Figure 5. Blood Pressure Measurement Observation</div>
</div>
</div>
<div class="sect3">
<h4 id="_glucose_tolerance_test"><a class="anchor" href="#_glucose_tolerance_test"></a>4.8.3. Glucose Tolerance Test</h4>
<div class="paragraph">
<p>An oral glucose tolerance test takes the following form, although the number and timing of the blood sugar levels may be slightly different in practice:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>challenge: no calories fasting from 12pm to 8am</p>
</li>
<li>
<p>datum: BSL - 8am</p>
</li>
<li>
<p>challenge: 75 g glucose orally - 8:01 am</p>
</li>
<li>
<p>datum: BSL - 9 am</p>
</li>
<li>
<p>datum: BSL - 10 am</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>OGTT is treated as a single clinical concept, and thus requires only one archetype. A typical instance structure is shown in the figure below. In this example, the three blood sugars are represented by <code>EVENTs</code>, with the fasting and glucose challenges being expressed as states on the relevant events.</p>
</div>
<div id="OGTT_structure" class="imageblock text-center text-center">
<div class="content">
<img src="entry/diagrams/OGTT_structure.png" alt="OGTT structure" width="80%">
</div>
<div class="title">Figure 6. OGTT instance structure</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_questionnaire_response"><a class="anchor" href="#_questionnaire_response"></a>5. Questionnaire Response</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_overview_3"><a class="anchor" href="#_overview_3"></a>5.1. Overview</h3>
<div class="paragraph">
<p>The following UML diagram shows the Questionnaire_response class and related sub-structure.</p>
</div>
<div id="entry_questionnaire" class="imageblock text-center text-center">
<div class="content">
<img src="UML/diagrams/GCM-entry-questionnaire.svg" alt="GCM entry questionnaire">
</div>
<div class="title">Figure 7. Questionnaire_response</div>
</div>
</div>
<div class="sect2">
<h3 id="_semantics_2"><a class="anchor" href="#_semantics_2"></a>5.2. Semantics</h3>

</div>
<div class="sect2">
<h3 id="_class_descriptions_3"><a class="anchor" href="#_class_descriptions_3"></a>5.3. Class Descriptions</h3>
<div class="sect3">
<h4 id="_questionnaire_response_class"><a class="anchor" href="#_questionnaire_response_class"></a>5.3.1. Questionnaire_response Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>Questionnaire_response</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>A structured response to a Questionnaire,</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_care_entry_class">Care_entry</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>identifier</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>version</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Version of the questionnaire.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>title</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_terminology_term_class" target="_blank" rel="noopener">Terminology_term</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Title of the questionnaire.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>time</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_date_time_class" target="_blank" rel="noopener">Date_time</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Time completed.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>completionStatus</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_terminology_code_class" target="_blank" rel="noopener">Terminology_code</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>TODO see <a href="https://build.fhir.org/valueset-questionnaire-answers-status.html" class="bare">https://build.fhir.org/valueset-questionnaire-answers-status.html</a></p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>data</strong>: <code><a href="/releases/GCM/{gcm_release}/data_structures.html#_cluster_class" target="_blank" rel="noopener">Cluster</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_assertion"><a class="anchor" href="#_assertion"></a>6. Assertion</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_overview_4"><a class="anchor" href="#_overview_4"></a>6.1. Overview</h3>
<div class="paragraph">
<p>The following UML diagram shows the Assertion class and related sub-structure.</p>
</div>
<div id="entry_assertion" class="imageblock text-center text-center">
<div class="content">
<img src="UML/diagrams/GCM-entry-assertion.svg" alt="GCM entry assertion">
</div>
<div class="title">Figure 8. Assertion</div>
</div>
</div>
<div class="sect2">
<h3 id="_semantics_3"><a class="anchor" href="#_semantics_3"></a>6.2. Semantics</h3>
<div class="paragraph">
<p>According to the ontology described in <a href="#Beale_Heard2007">Beale &amp; Heard (2007)</a>, the Opinion category covers a number of concrete concepts, as follows.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>problem/diagnosis</em>: the assignment of a known diagnosis or problem label to a set of observed signs and symptoms in the patient, for the purpose of determining and managing treatment. The physician will usually include a date of initial onset, date clinically recognised, date of last occurrence, date of resolution of last occurrence and possibly other timing information.</p>
</li>
<li>
<p><em>risk assessment</em>: an evaluation of the likelihood and timing of a certain event occurring or condition appearing.</p>
</li>
<li>
<p><em>scenario</em>: an opinion about the outcome if a certain intervention is proceeded with.</p>
</li>
<li>
<p><em>goal</em>: statement of a target, and a time at which it should be reached.</p>
</li>
<li>
<p><em>recommendation</em>: a description in general terms of a suggested care approach for the patient, based on diagnosis; includes various times or time-periods for activities, such as monitoring, taking of medications, and review.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The approach taken to modelling these concepts in openEHR is heavily based upon the development of archetypes for assessments such as "diagnosis" (various kinds), "goal", "adverse reactions", "alert", "exclusion", "clinical synopsis", "risk based on family history" and so on. Experience has shown that the Opinion category is too variable for safely modelling its sub-categories directly in the reference model. Instead, a single class <code>Assertion</code> is used for all instances of the Opinion category. (The name Evaluation has been present in openEHR for some years, and is retained for reasons of continuity).</p>
</div>
<div class="paragraph">
<p>The design of the <code>Assertion</code> class is very simple. In addition to the attributes inherited from <code>ENTRY</code> and <code>CARE_ENTRY</code>, it has only one attribute, <code><em>data</em></code>: <code>ITEM_STRUCTURE</code>. This structure is intended to be archetyped so as to model all the details of any particular clinical information in the Opinion category. No timing attributes are included, since there is no time associated with creation or capturing of Evaluation information as such, only times included in the information. The only times of generic significance are (potentially) the time of a patient consultation during which the Evaluation was created (recorded in <code>COMPOSITION.<em>event_context</em>.<em>start_time</em></code> and <code><em>end_time</em></code>) and the time of committal to the EHR system (recorded in <code>VERSION.<em>commit_audit</em></code> attribute).</p>
</div>
<div class="paragraph">
<p>The general meaning of the inherited attributes is as for all Entries. In Evaluations, the provider is almost always the physician, while the protocol may be used to indicate how a particular assessment was made. The <code><em>other_participations</em></code> attribute is not as likely to be used for Evaluations representing diagnoses, since a diagnosis is usually the result of thinking on the part of the physician; an exception to this would be a case conference or if an expert system were used. However, Plans for complex patients may well be constructed by multiple physicians.</p>
</div>
</div>
<div class="sect2">
<h3 id="_class_descriptions_4"><a class="anchor" href="#_class_descriptions_4"></a>6.3. Class Descriptions</h3>
<div class="sect3">
<h4 id="_assertion_class"><a class="anchor" href="#_assertion_class"></a>6.3.1. Assertion Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>Assertion</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Entry type for assertions. Used for all kinds of statements which evaluate other information, such as interpretations of observations, diagnoses, differential diagnoses, hypotheses, risk assessments, goals and plans.</p>
</div>
<div class="paragraph">
<p>Should not be used for actionable statements such as medication orders - these are represented using the <code>Order</code> type.</p>
</div>
<div class="paragraph">
<p>GRAPHITE: Corresponds to many/most? CEMs for Dx and other assessments, e.g. 'elevated heart rate'. Assertions state what category the subject is in, rather than reporting specific characteristics and values.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_care_entry_class">Care_entry</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>data</strong>: <code><a href="/releases/GCM/{gcm_release}/data_structures.html#_cluster_class" target="_blank" rel="noopener">Cluster</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The data of this evaluation, in the form of a spatial data structure.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>certainty</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_terminology_code_class" target="_blank" rel="noopener">Terminology_code</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_instance_structures_2"><a class="anchor" href="#_instance_structures_2"></a>6.4. Instance Structures</h3>
<div class="paragraph">
<p>The following subsections illustrate Assertion instance structures. For guidance on how to best model particular clinical statements, see the archetype part of the <a href="https://www.openehr.org/ckm" target="_blank" rel="noopener">openEHR Clinical Knowledge Manager repository</a>.</p>
</div>
<div class="sect3">
<h4 id="_partial_asthma_management_plan"><a class="anchor" href="#_partial_asthma_management_plan"></a>6.4.1. Partial Asthma Management Plan</h4>
<div class="paragraph">
<p>The following figure illustrates a partial asthma management plan in which monitoring (peak flow) with dependent actions (review and admission to ER) and therapy (bronchodilator) are shown. In a complete plan, symptom monitoring and other medications might be shown. The parts of the plan are linked to the root <code>Assertion</code> node via the <code><em>links</em></code>: <code>Set&lt;LINK&gt;</code> attribute inherited from the <code>LOCATABLE</code> class.</p>
</div>
<div id="partial_asthma_plan" class="imageblock text-center text-center">
<div class="content">
<img src="entry/diagrams/partial_asthma_plan.png" alt="partial asthma plan" width="80%">
</div>
<div class="title">Figure 9. Partial Asthma Management Plan</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_orders_and_actions"><a class="anchor" href="#_orders_and_actions"></a>7. Orders and Actions</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_overview_5"><a class="anchor" href="#_overview_5"></a>7.1. Overview</h3>
<div class="paragraph">
<p>Orders in openEHR specify actions to be performed in the future. They differ from information in the Proposal sub-category of Opinion in the ontology (i.e. instances of Evaluation in the class model) in that they are specified in sufficient detail to be directly enacted without further clinical decision-making related to the design of the Order, e.g they can be performed by the patient or a nurse. Any decisions that could be made during the performance of an Order are either constrained by the Order itself (e.g. dose range; suspend if adverse reaction) or else are assumed knowledge of the expected performer. For example, an Evaluation may say that "oral cortico-steroids are indicated at a peak flow of 200 l/m". A corresponding Order would indicate the actual drug, route, dose, frequency, and so on. The informed patient might be reasonably expected to be able to vary the dosage on his or her own within a dosage guideline explained by his/her GP.</p>
</div>
<div class="paragraph">
<p>In the ontology shown in <a href="#CIR_ontology">[CIR_ontology]</a>, Orders are further categorised as Investigation and Intervention. However, as for Evaluation, only a single class, <code>Order</code>, is used to model all types of the Order category, with archetypes defining the details of the Order. A second Entry subtype, <code>Action</code>, is used to model the information recorded due to the execution of an Order by some agent.</p>
</div>
<div id="entry_order" class="imageblock text-center text-center">
<div class="content">
<img src="UML/diagrams/GCM-entry-order.svg" alt="GCM entry order">
</div>
<div class="title">Figure 10. Order and Action</div>
</div>
<div class="paragraph">
<p>The following subsections describe Order and Action in some detail.</p>
</div>
</div>
<div class="sect2">
<h3 id="_requirements"><a class="anchor" href="#_requirements"></a>7.2. Requirements</h3>
<div class="paragraph">
<p>The Order and Action classes are designed to satisfy the following requirements:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>All kinds of interventions, from simple medication orders to complex multi-drug courses should be representable using the same model;</p>
</li>
<li>
<p>Orders should always have a narrative expression, with an optional machine-processible expression in cases where automation will be used;</p>
</li>
<li>
<p>The freedom must exist to model any particular intervention in as much or little detail as required by circumstances;</p>
</li>
<li>
<p>Clinicians must be able to specify Order steps in their own terms, i.e. using terms like "prescribe", "dispense", "start administering", etc;</p>
</li>
<li>
<p>Orders representing diverse clinical workflows must be queryable in a standard way, so that it can be ascertained what Orders are 'active', 'completed' and so on for a patient;</p>
</li>
<li>
<p>It should be possible to provide a coherent view of the state of execution of an Order even if parts of it have been executed in different healthcare provider environments;</p>
</li>
<li>
<p>It must be possible to record ad hoc actions in the record, i.e. acts for which no Order was defined (at least in the EHR in question);</p>
</li>
<li>
<p>Orders must integrate with notification / alert services;</p>
</li>
<li>
<p>An interoperable expression of computable workflow definitions of Orders will be supported.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_design_principles_2"><a class="anchor" href="#_design_principles_2"></a>7.3. Design Principles</h3>
<div class="paragraph">
<p>The design approach is based on four principles. The first is that the <em>specification</em> of an Order as one or more Activities is distinguished from the information representing actions performed as a result. This makes the model and resulting information instances clear to software designers and data users. It also enables workflow engines to determine which parts of the specification have already been executed, and allows for Actions actually performed to differ from those specified. The separation is realised in terms of the <code>Order</code> and <code>Action</code> classes and their helpers. Instances of the former specify an Order, while instances of the latter describe steps which have actually been performed.</p>
</div>
<div class="paragraph">
<p>The second principle is the use of a standard Order state machine (ISM) defining standardised states and transitions for each Activity of an Order, no matter what its clinical meaning. The use of standardised states means that the execution state of any given Activity can be characterised in exactly the same way (e.g. 'planned', 'active', etc), and that it is therefore possible to query the EHR and find out all interventions of any kind in a particular state. The ISM is formally modelled in openEHR. The Order itself can also be considered to be in a state derived from the states of its Activities. An informal description of this aggregate state machine is given below.</p>
</div>
<div class="paragraph">
<p>The third principle is to provide a way of mapping steps in any care pathway process (i.e. healthcare business process) to states in the Order state machine. A care pathway process covers the entirety of steps required to effect an Order, for example prescribing, booking, dispensing, referring, suspension etc. Any such step when performed leaves the relevant Order in one of the states of the ISM.</p>
</div>
<div class="paragraph">
<p>The fourth principle is to support the expression of the formal workflow definition for an Order, where full automation is required. It must be recognised that automation of most therapies and drug admnistration, as well as other interventions like biopsies is minimal today, and is likely to remain so for some time. This is for the simple reason that the cost of automating most tasks is prohibitive compared to human execution, particularly when Order activities can often be executed by healthcare professionals already present for other reasons (e.g. ward nurses). It also has to be said that serious research into the use of workflow automation in healthcare is only quite recent, and that so far, there are no standard models for clinical workflow. In the openEHR approach to modelling workflow, such uncertainty is dealt with in two ways. Firstly, formal workflow specification of an Order is an optional addition to the base model of Order and Action classes, and is not required to obtain a basic level of computability, including use of the ISM. Secondly, the formal expression of workflow is in the form of parsable syntax rather than objects. This is a generally appropriate design choice, since the safest and most convenient persistent form of of a complex formalism is the syntax form rather than the parsed fine-grained object form; this both optimises storage and allows for changes in the syntax over time.</p>
</div>
</div>
<div class="sect2">
<h3 id="_model_overview"><a class="anchor" href="#_model_overview"></a>7.4. Model Overview</h3>
<div class="paragraph">
<p>Order definitions are modelled in terms of the <code>Order</code> and <code>ACTIVITY</code> classes, with optional workflow attributes. These two classes carry the basic information relating to an Order, with all formal workflow definition expressed in parsable syntax in the <code>Order.<em>wf_definition</em></code> attribute. An <code>Order</code> instance includes the narrative description of the Order, and a list of <code>ACTIVITY</code> instances. It also includes all the attributes inherited from the <code>CARE_ENTRY</code> class, including subject, participations and so on.</p>
</div>
<div class="paragraph">
<p>Many Orders will have only one Activity, usually describing a medication to be administered and its timing. Some will have more than one drug or therapy, such as the typical 3 drug Losec-HP regime for treating ulcers, and multi-drug chemotherapy. The base Order model does not explicitly try to indicate the exact order, serial or parallel administration, or other dependencies, since the knowledge of how to administer the drugs is known by the relevant clinicians, and/or contained in published guidelines. However, the timing information in each Activity does indicate times, days and the usual specifications of "with meals" etc. The timing information is also sufficient to specify a three drug chemotherapy regime, by indicating which days each drug is administered on. It is only when the Order is to be automated by a workflow engine that the full structure of the Activity graph will be given. Activity instances may be completely absent from an Order, in which case only the narrative will be present. This will typically occur with imported legacy data which itself has no structured representation of medications.</p>
</div>
<div class="paragraph">
<p>There are three possible levels of representation of an Order, as shown in the figure below. These are the minimal narrative-only level, a level with formal representation of Order activities by <code>ACTIVITY</code> instances, and a level where a formal workflow definition can also be used. It is expected that the vast majority of openEHR systems for the forseeable future will support only the minimal and basic levels.</p>
</div>
<div id="order_representation" class="imageblock text-center text-center">
<div class="content">
<img src="entry/diagrams/order_representation.png" alt="order representation" width="60%">
</div>
<div class="title">Figure 11. Levels of Order representation</div>
</div>
<div class="paragraph">
<p>The following figure illustrates the correspondence between Order and Activity structures, and Action objects that are created due to executing the Orders. Each Activity has a standard Order State Machine logically associated with it, indicated in blue. When any step in an Order Activity is executed within an ICT-supported environment, an <code>Action</code> instance describing what was done should be created and committed to the EHR. In some cases, ad hoc Actions are created even when there is no Order, such as by self-medicating patients and nurses reacting quickly to patient changes. For such Actions, there is always a notional Activity understood by the health professional.</p>
</div>
<div id="actions_and_orders" class="imageblock text-center text-center">
<div class="content">
<img src="entry/diagrams/actions_and_orders.png" alt="actions and orders" width="70%">
</div>
<div class="title">Figure 12. Correspondence of Actions to Orders</div>
</div>
<div class="paragraph">
<p>All <code>Actions</code> include the inherited <code>CARE_ENTRY</code> attributes, along with the time of being performed, a description of what was performed, and an <code>ISM_TRANSITION</code> object indicating the state of the Activity (whether explicit in an Order or not). The current state of an Activity is thus found not in the <code>ACTIVITY</code> instance but in the most recent <code>Action</code> instance for that Activity.</p>
</div>
<div class="paragraph">
<p>If the Action did correspond to an Order, it will also include an <code>Order_DETAILS</code> instance, which indicates which Activity of which Order was executed, including workflow execution details if relevant.</p>
</div>
<div class="paragraph">
<p>Under this scheme, the state of each intervention happening to the patient can be ascertained by querying, regardless of whether explicit Orders exist.</p>
</div>
<div class="paragraph">
<p>Note particularly that Actions are often performed in a different provider location, or the home, rather than the provider organisation responsible for the Order. Action objects for a given Order can thus easily appear in multiple health record systems.</p>
</div>
</div>
<div class="sect2">
<h3 id="_order_activity_timing"><a class="anchor" href="#_order_activity_timing"></a>7.5. Order Activity Timing</h3>
<div class="paragraph">
<p>Timing information may be minimal and simplistic, or highly specified. As a consequence, there is no one method of representation that suits all purposes. The simplest expression of timing information is as informal narrative, as found in a prescription for antibiotics, such as "take 3 times a day, for 7 days, with meals". This may be represented using a text value in <code>Order.<em>narrative</em></code>.</p>
</div>
<div class="paragraph">
<p>Formally computable representations can be expressed in two ways. The first is to use the <code>ACTIVITY.<em>timing</em></code> field, of type <code>DV_PARSABLE</code>, which enables the use of syntaxes such as the <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601</a> 'R' syntax. For example, 5 repetitions of the period '10 days' starting on 01 march 2008 is <code>"R5/2008-03-01T13:00:00Z/P10D"</code>. However timing in clinical situations varies widely, and numerous other ways of expressing times are commonly required, ranging from simple frequencies, to complex patterns of time, association with events such as meals, menstrual period and so on. To accommodate such variant structures, which are generally beyond the capabilities of the ISO 8601 syntax, the <code>ACTIVITY.<em>description</em></code> attribute may be used to contain these timing structures.</p>
</div>
<div class="paragraph">
<p>The three approaches are illustrated below.</p>
</div>
<div id="activity_timing" class="imageblock text-center text-center">
<div class="content">
<img src="entry/diagrams/activity_timing.svg" alt="activity timing" width="80%">
</div>
<div class="title">Figure 13. Activity Timing</div>
</div>
</div>
<div class="sect2">
<h3 id="_the_standard_order_state_machine_ism"><a class="anchor" href="#_the_standard_order_state_machine_ism"></a>7.6. The Standard Order State Machine (ISM)</h3>
<div class="paragraph">
<p>When an intervention defined by an Activity is unfolding in a clinical context, EHR users want to know things such as the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>what is the current status of an Order for the patient?</p>
</li>
<li>
<p>what is the current step in the Activity for the patient?</p>
</li>
<li>
<p>for a given patient, what Activities are planned, active, suspended, completed?</p>
</li>
<li>
<p>for the populations of patients, what is the state of a particular workflow, such as a recall, for each one?</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The approach chosen here to support such functionality is to define a standard Order state machine whose state transitions can be mapped to the steps of a specific care pathway, enabling it to be used as a descriptive device for indicating the state of any Activity. The status of an Order is determined algorithmically from the states of the constituent Activities, as described below. The state machine is illustrated below.</p>
</div>
<div id="Order_state_machine" class="imageblock text-center text-center">
<div class="content">
<img src="UML/diagrams/GCM-order_state_machine.svg" alt="GCM order state machine">
</div>
<div class="title">Figure 14. openEHR standard Order State Machine</div>
</div>
<div class="paragraph">
<p>This state machine is the result of long term experience with clinical workflows and act management systems. The states are as follows (Note: the SCHEDULED state was inspired by <a href="#Van_de_Velde_Degoulet2003">van de Velde &amp; Degoulet (2003)</a>, Fig 5.5).</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
INITIAL
</td>
<td class="hdlist2">
<p>initial state, prior to planning activity (default starting state for computable representation of state machine).</p>
</td>
</tr>
<tr>
<td class="hdlist1">
PLANNED
</td>
<td class="hdlist2">
<p>the action has been described, but has not as yet been performed.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
POSTPONED
</td>
<td class="hdlist2">
<p>the action has not been performed and will not without specific conditions being met. Specifically, events and conditions that would normally 'activate' the Order will be ignored, until a restore event occurs.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
SCHEDULED
</td>
<td class="hdlist2">
<p>the action will be performed at some designated future time, and has been booked in a scheduling system.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
CANCELLED
</td>
<td class="hdlist2">
<p>the action was defined, but was cancelled before being performed.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
ACTIVE
</td>
<td class="hdlist2">
<p>the action is being performed according to its definition. The entire course of medication or therapy corresponds to this state.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
SUSPENDED
</td>
<td class="hdlist2">
<p>the action was begun, but has been stopped temporarily, and will not be restarted until explicitly resumed.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
ABORTED
</td>
<td class="hdlist2">
<p>the action began but was permanently terminated before normal completion.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
COMPLETED
</td>
<td class="hdlist2">
<p>the action began and was completed normally.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
EXPIRED
</td>
<td class="hdlist2">
<p>the time during which the action could have been relevant has expired; the action may have completed, been cancelled, or never occurred.</p>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>States <code>CANCELLED</code>, <code>ABORTED</code> and <code>COMPLETED</code> are all terminal states. The <code>EXPIRED</code> state is a pseudo-terminal state, from which transitions are allowed to proceed to any of the true terminal states, due to information being received after the fact (such as a patient reporting that they did indeed finish a course of antibiotics). However it is likely in the EHR that Orders for many simple medications will finish in the <code>EXPIRED</code> state and remain there.</p>
</div>
<div class="paragraph">
<p>The transitions are self-explanatory for the most part, however a few deserve comment. The <code>start</code> and <code>finish</code> events correspond to situations when the administration is not instantaneous, as is the situation with most medications. The <code>do</code> event is equivalent to the <code>finish</code> event occurring immediately after the <code>start</code> event, corresponding to an instantaneous administration, completion of which puts the Activity in the completed state. A single shot vaccination or patient taking a single tablet are typical examples. The states <code>PLANNED</code>, <code>POSTPONED</code>, <code>ACTIVE</code>, <code>SUSPENDED</code>, each have a <code>xxx_step</code> transition which return the state machine to the same state. Workflow steps that cause no transition are mapped to these events and thus leave the Order in the same state. An example is a medication review, which will leave the medication in the <code>ACTIVE</code> state, if the physician chooses to continue.</p>
</div>
<div class="paragraph">
<p>In the future, if delegation of an Order to another Order is required, nesting of a new Order state machine within the Active state of a previous one might need to be supported.</p>
</div>
<div class="paragraph">
<p>The state machine states and transition names are defined in the openEHR terminology groups "Order states" and "Order transitions" respectively.</p>
</div>
</div>
<div class="sect2">
<h3 id="_order_aggregate_state"><a class="anchor" href="#_order_aggregate_state"></a>7.7. Order Aggregate State</h3>
<div class="paragraph">
<p>Each Activity within an Order constitutes a clinically identifiable medication or therapy of some kind, while the Order usually corresponds to a grouping or combination of therapies designed to treat an overall problem. Accordingly, the Order can be seen as having an aggregate state derived from the states of the Activities, as shown in the figure below. The rules for entering each aggregate state are indicated in terms of the states of the constituent Activities.</p>
</div>
<div id="aggregate_order_state" class="imageblock text-center text-center">
<div class="content">
<img src="entry/diagrams/aggregate_order_state.png" alt="aggregate order state" width="70%">
</div>
<div class="title">Figure 15. Aggregate Order state</div>
</div>
<div class="paragraph">
<p>This state machine is not formally modelled or coded in openEHR, although it may be useful to do so within an application.</p>
</div>
</div>
<div class="sect2">
<h3 id="_careflow_process_to_state_machine_mapping"><a class="anchor" href="#_careflow_process_to_state_machine_mapping"></a>7.8. Careflow Process to State Machine Mapping</h3>
<div class="paragraph">
<p>From a health professional&#8217;s point of view, a healthcare workflow, or 'careflow', consists of steps and events designed to meet one or more goals. The steps are highly dependent on the particular kind of workflow, and will usually be named in terms familiar to the relevant kinds of clinical professionals, such as "prescribe", "book", "suspend" and so on (note that some of these names may be the same as ISM transitions, but may or may not indicate the same thing). However, the need of users of health information is to know what state the execution of an Order is in, regardless of which particular careflow step might have just been executed. This is achieved by defining the mapping between the steps of a particular careflow to the states of the ISM in an Action archetype. When each Action corresponding to a particular Order Activity is performed, it will be known both which careflow step it corresponds to and which ISM state the Activity is now in. The following table provides an example of the mapping for a UK GP medication order workflow.</p>
</div>
<table class="tableblock frame-all grid-all" style="width: 50%;">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">UK GP<br>
 Workflow Step</th>
<th class="tableblock halign-left valign-top">State machine transition</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Start</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">initiate (initial &#8594; planned)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prescribe</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">plan_step (planned &#8594; planned)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dispense</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">start (planned &#8594; active)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Administer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">active_step (active &#8594; active)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Request</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Renewal active_step (active &#8594; active)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Re-issue</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">active_step (active &#8594; active)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Review</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">active_step (active &#8594; active)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Finish</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">finish (active &#8594; completed)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cancel</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">abort (active &#8594; aborted)</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Mappings like this are specified in the <code>Action</code> archetypes for the Order. When an <code>Action</code> instance is committed to the EHR, the <code>ISM_TRANSITION</code> object records the step performed and the ISM state and transition. The careflow step must be one of the steps from the corresponding Order.</p>
</div>
<div class="paragraph">
<p>An optional <code><em>reason</em></code> property (of type <code>List&lt;DV_TEXT&gt;</code>) is provided in the <code>ISM_TRANSITION</code> class in order to enable one or more specific reasons for the step having occurred to be recorded.</p>
</div>
<div class="paragraph">
<p>The following section provides details of how archetypes are used to represent such mappings.</p>
</div>
</div>
<div class="sect2">
<h3 id="_relationship_to_archetypes"><a class="anchor" href="#_relationship_to_archetypes"></a>7.9. Relationship to Archetypes</h3>
<div class="paragraph">
<p>Much of the semantics of particular Orders and Actions derive from archetypes. Currently, archetypes are used to define two groups of Order semantics. The first is the descriptions of activities that are defined in Orders (<code>ACTIVITY</code>.<code><em>description</em></code>) and executed in Actions (<code>Action</code>.<code><em>description</em></code>). These descriptions are always of the same form for any given Order, and it is highly desirable to have the same archetype component for both. An example is where the description is of a medication, commonly consisting of a tree or list of ten or more elements describing the drug, its name, form, dose, route and so on. The same information structure is needed in the Order, where it defines what is to be administered, and in the Action, where it describes what has been administered. In any particular instance, there may be small differences in what was administered (e.g. dose or route are modified) even though the archetype model will be the same for both.</p>
</div>
<div class="paragraph">
<p>In terms of archetypes therefore, definition of say two <code>ACTIVITYs</code> in an <code>Order</code> (see example illustrated below) will actually create separate archetypes of the Activity structures, each of which will be one of the subtypes of <code>ITEM_STRUCTURE</code> (since this is the type of <code>ACTIVITY</code>.<code><em>description</em></code> and <code>Action</code>.<code><em>description</em></code>). The archetypes will then be used by both the <code>Order</code> archetype and the <code>Action</code> archetype, via the archetype slot mechanism (i.e. the standard way of composing archetypes from other archetypes; see <code>use_archetype</code> statements in the figure below).</p>
</div>
<div id="Order_and_action_archetypes" class="imageblock text-center text-center">
<div class="content">
<img src="entry/diagrams/order_and_action_archetypes.png" alt="order and action archetypes" width="70%">
</div>
<div class="title">Figure 16. Order and Action Archetypes</div>
</div>
<div class="paragraph">
<p>The second category of archetypable semantics is the correspondence between steps in a healthcare business process and the standard Order state machine, as described above. This mapping is an archetype of the <code><em>ism_transition</em></code> attribute of an <code>Action</code> attribute, and therefore defines part of the <code>Action</code> archetype. <a href="#Order_and_action_archetypes">Figure 16</a> shows how logical archetype elements in the archetyped editor environment corresponds to the resulting archetypes.</p>
</div>
<div class="paragraph">
<p>Consequently, the set of archetypes defining the clinical semantics of a specific kind of intervention will normally consists of archetypes of <code>Order</code>, <code>Action</code> and potentially component archetypes of the <code>ITEM_STRUCTURE</code> classes.</p>
</div>
</div>
<div class="sect2">
<h3 id="_class_descriptions_5"><a class="anchor" href="#_class_descriptions_5"></a>7.10. Class Descriptions</h3>
<div class="sect3">
<h4 id="_order_class"><a class="anchor" href="#_order_class"></a>7.10.1. Order Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>Order</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Used to specify actions in the future. Enables simple and complex specifications to be expressed, including in a fully-computable workflow form. Used for any actionable statement such as medication and therapeutic orders, monitoring, recall and review. Enough details must be provided for the specification to be directly executed by an actor, either human or machine.</p>
</div>
<div class="paragraph">
<p>Not to be used for plan items which are only specified in general terms.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_care_entry_class">Care_entry</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>narrative</strong>: <code><a href="/releases/GCM/{gcm_release}/data_types.html#_dv_text_class" target="_blank" rel="noopener">Dv_text</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Mandatory human-readable version of what the Instruction is about.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>expiry_time</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_date_time_class" target="_blank" rel="noopener">Date_time</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Optional expiry date/time to assist determination of when an Instruction can be assumed to have expired. This helps prevent false listing of Instructions as Active when they clearly must have been terminated in some way or other.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>wf_definition</strong>: <code><a href="/releases/GCM/{gcm_release}/data_types.html#_dv_parsable_class" target="_blank" rel="noopener">Dv_parsable</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Optional workflow engine executable expression of the Instruction.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>activities</strong>: <code>List&lt;<a href="#_activity_class">Activity</a>&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>List of all activities in Instruction.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>order_id</strong>: <code>List&lt;<a href="/releases/BASE/latest/foundation_types.html#_string_class" target="_blank" rel="noopener">String</a>&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>TODO - possibly need a full Cluster.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Invariants</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><em>Activities_valid</em>: <code>activities /= Void implies not activities.is_empty</code></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_activity_class"><a class="anchor" href="#_activity_class"></a>7.10.2. Activity Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>Activity</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Defines a single activity within an Instruction, such as a medication administration.</p>
</div>
<div class="paragraph">
<p>TODO: probably remove possibility of multiple ACTIVITY</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="/releases/BASE/latest/base_types.html#_locatable_class" target="_blank" rel="noopener">Locatable</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>timing</strong>: <code><a href="/releases/GCM/{gcm_release}/data_types.html#_dv_parsable_class" target="_blank" rel="noopener">Dv_parsable</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Timing of the activity, in the form of a parsable string. If used, the preferred syntax is ISO8601 'R' format, but other formats may be used including HL7 GTS.</p>
</div>
<div class="paragraph">
<p>May be omitted if:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>timing is represented structurally in the <code><em>description</em></code> attribute (e.g. via archetyped elements), or</p>
</li>
<li>
<p>unavailable, e.g. imported legacy data; in such cases, the <code>INSTRUCTION.<em>narrative</em></code> should carry text that indicates the timing of its <code><em>activities</em></code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>TODO - review - current approach is via separate fields in CEMs.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>action_archetype_id</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_string_class" target="_blank" rel="noopener">String</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Perl-compliant regular expression pattern, enclosed in  '//' delimiters, indicating the valid identifiers of archetypes for Actions corresponding to this Activity specification.</p>
</div>
<div class="paragraph">
<p>Defaults to  <code>/.*/</code>, meaning any archetype.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>description</strong>: <code><a href="/releases/GCM/{gcm_release}/data_structures.html#_cluster_class" target="_blank" rel="noopener">Cluster</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Description of the activity, in the form of an archetyped structure.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Invariants</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><em>Action_archetype_id_valid</em>: <code>not action_archetype_id.is_empty</code></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_action_class"><a class="anchor" href="#_action_class"></a>7.10.3. Action Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>Action</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Used to record a clinical action that has been performed, which may have been ad hoc, or due to the execution of an Activity in an Instruction workflow. Every Action corresponds to a careflow step of some kind or another.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_care_entry_class">Care_entry</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>time</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_date_time_class" target="_blank" rel="noopener">Date_time</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Point in time at which this action completed. To indicate an unknown time, use a <code>DV_DATE_TIME</code> instance with <code><em>value</em></code> set to the time of creation (or some other known time before which the Action is known to have occurred, e.g. data accession timestamp from integration engine), and <code><em>magnitude_status</em></code> set to <code>&lt;</code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>ism_transition</strong>: <code><a href="#_ism_transition_class">Ism_transition</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Details of transition in the Instruction state machine caused by this Action.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>instruction_details</strong>: <code><a href="#_order_details_class">Order_details</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Details of the Instruction that caused this Action to be performed, if there was one.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>description</strong>: <code><a href="/releases/GCM/{gcm_release}/data_structures.html#_cluster_class" target="_blank" rel="noopener">Cluster</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Description of the action that has been performed, in the form of an archetyped structure.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_order_details_class"><a class="anchor" href="#_order_details_class"></a>7.10.4. Order_details Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>Order_details</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Used to record details of the Instruction causing an Action.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="/releases/BASE/latest/base_types.html#_locatable_class" target="_blank" rel="noopener">Locatable</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>order_id</strong>: <code><a href="/releases/BASE/latest/base_types.html#_locatable_ref_class" target="_blank" rel="noopener">LOCATABLE_REF</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Reference to causing Instruction.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>activity_id</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_string_class" target="_blank" rel="noopener">String</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Identifier of Activity within Instruction, in the form of its archetype path.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>wf_details</strong>: <code><a href="/releases/GCM/{gcm_release}/data_structures.html#_cluster_class" target="_blank" rel="noopener">Cluster</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Various workflow engine state details, potentially including such things as:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>condition that fired to cause this Action to be done (with actual variables substituted);</p>
</li>
<li>
<p>list of notifications which actually occurred (with all variables substituted);</p>
</li>
<li>
<p>other workflow engine state.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This specification does not currently define the actual structure or semantics of this field.</p>
</div>
<div class="paragraph">
<p>TODO: probably remove.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Invariants</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><em>Activity_path_valid</em>: <code>not activity_id.is_empty</code></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_ism_transition_class"><a class="anchor" href="#_ism_transition_class"></a>7.10.5. Ism_transition Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>Ism_transition</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Model of a transition in the Instruction State Machine, caused by a careflow step. The attributes document the careflow step as well as the ISM transition.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="/releases/BASE/latest/base_types.html#_locatable_class" target="_blank" rel="noopener">Locatable</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>current_state</strong>: <code><a href="/releases/GCM/{gcm_release}/data_types.html#_dv_coded_text_class" target="_blank" rel="noopener">Dv_coded_text</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The ISM current state. Coded by openEHR terminology group Instruction states.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>transition</strong>: <code><a href="/releases/GCM/{gcm_release}/data_types.html#_dv_coded_text_class" target="_blank" rel="noopener">Dv_coded_text</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The ISM transition which occurred to arrive in the current_state. Coded by openEHR terminology group  Instruction transitions.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>careflow_step</strong>: <code><a href="/releases/GCM/{gcm_release}/data_types.html#_dv_coded_text_class" target="_blank" rel="noopener">Dv_coded_text</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The step in the careflow process which occurred as part of generating this action, e.g.  dispense ,  start_administration. This attribute represents the clinical  label for the activity, as  opposed to current_state which represents  the state machine (ISM)  computable form. Defined in archetype.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>reason</strong>: <code>List&lt;<a href="/releases/GCM/{gcm_release}/data_types.html#_dv_text_class" target="_blank" rel="noopener">Dv_text</a>&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Optional possibility of adding one or more reasons for this careflow step having been taken. Multiple reasons may occur in medication management for example.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Invariants</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><em>Current_state_valid</em>: <code>terminology (Terminology_id_openehr).has_code_for_group_id (Group_id_instruction_states, current_state.defining_code)</code></p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><em>Transition_valid</em>: <code>transition /= Void implies terminology (Terminology_id_openehr).
has_code_for_group_id (Group_id_instruction_transitions, transition.defining_code)</code></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_instance_structures_3"><a class="anchor" href="#_instance_structures_3"></a>7.11. Instance Structures</h3>
<div class="paragraph">
<p>The following subsections illustrate typical Entry instance structures. For guidance on how to best model particular clinical statements, see the archetype part of the <a href="https://www.openehr.org/ckm" target="_blank" rel="noopener">openEHR Clinical Knowledge Manager repository</a>.</p>
</div>
<div class="sect3">
<h4 id="_chained_medication_order"><a class="anchor" href="#_chained_medication_order"></a>7.11.1. Chained Medication Order</h4>
<div class="paragraph">
<p>Often, a medication order for one drug consists of segments in which one or more of the administration details of route, form, frequency, dose etc is changed. In hospitals, intravenous antibiotics and pain relief drugs may be followed by a tablet form of the same drug to be taken orally. Other examples are common in general practice, such as the following order:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>trade name = Panafcortelone; generic name = Prednisolone; form = tablets; dose = 25mg; route = oral; freq = bd x 3 days; od x 2 days.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The figure below illustrates the instance structure for this Order. Note that the timing attribute of the <code>ACTIVITY</code> instance is shown in human-readable form; in reality it will be a GTS string or similar (see Timing Specification section of openEHR Data Types IM).</p>
</div>
<div id="chained_medication_order" class="imageblock text-center text-center">
<div class="content">
<img src="entry/diagrams/chained_medication_order.png" alt="chained medication order" width="80%">
</div>
<div class="title">Figure 17. Chained medication order</div>
</div>
</div>
<div class="sect3">
<h4 id="_multi_drug_therapy"><a class="anchor" href="#_multi_drug_therapy"></a>7.11.2. Multi-drug Therapy</h4>
<div class="paragraph">
<p>A common regime for treating duodenal ulcer and related complaints is using Losec with other drugs, such as in the following combination:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Losec 40 mg od x 4w or until no symptoms</p>
</li>
<li>
<p>amoxicillin 500 mg 3td x 7d</p>
</li>
<li>
<p>metronidizole 400 mg 3td x 7d</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The Order for this therapy is illustrated below.</p>
</div>
<div id="multi_drug_therapy_order" class="imageblock text-center text-center">
<div class="content">
<img src="entry/diagrams/multi_drug_therapy_order.png" alt="multi drug therapy order" width="80%">
</div>
<div class="title">Figure 18. Multi-drug therapy Order</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_references"><a class="anchor" href="#_references"></a>References</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a id="Beale_Heard2007"></a>Beale, T., &amp; Heard, S. (2007). An Ontology-based Model of Clinical Information. In K. K. et al. (Ed.), <em>Proceedings MedInfo 2007</em> (pp. 760–764). IOS Publishing. Retrieved from <a href="http://www.openehr.org/publications/health_ict/MedInfo2007-BealeHeard.pdf" class="bare">http://www.openehr.org/publications/health_ict/MedInfo2007-BealeHeard.pdf</a></p>
</div>
<div class="paragraph">
<p><a id="Van_de_Velde_Degoulet2003"></a>Velde, R. van de, &amp; Degoulet, P. (2003). <em>Clinical Information Systems: A Component-Based Approach</em>. New York: Springer-Verlag.</p>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2023-04-24 06:49:55 -0600
</div>
</div>
</body>
</html>