<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.16">
<meta name="description" content="Graphite Data Types Model">
<meta name="keywords" content="EHR, clinical, data types, Graphite">
<title>Data Types Model</title>
<link rel="stylesheet" href="https://specifications.openehr.org/styles/openehr.css">
<link rel="stylesheet" href="https://specifications.openehr.org/styles/pygments-default.css">
</head>
<body class="book toc2 toc-left">
<div id="header">
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel0">
<li><a href="#_data_types_model">Data Types Model</a>
<ul class="sectlevel1">
<li><a href="#_amendment_record">Amendment Record</a></li>
<li><a href="#_acknowledgements">Acknowledgements</a>
<ul class="sectlevel2">
<li><a href="#_editor">Editor</a></li>
<li><a href="#_contributors">Contributors</a></li>
<li><a href="#_support">Support</a></li>
<li><a href="#_trademarks">Trademarks</a></li>
</ul>
</li>
<li><a href="#_preface">1. Preface</a>
<ul class="sectlevel2">
<li><a href="#_purpose">1.1. Purpose</a></li>
<li><a href="#_related_documents">1.2. Related Documents</a></li>
<li><a href="#_status">1.3. Status</a></li>
<li><a href="#_feedback">1.4. Feedback</a></li>
<li><a href="#_conformance">1.5. Conformance</a></li>
</ul>
</li>
<li><a href="#_introduction">2. Introduction</a>
<ul class="sectlevel2">
<li><a href="#_overview">2.1. Overview</a></li>
<li><a href="#_class_descriptions">2.2. Class Descriptions</a>
<ul class="sectlevel3">
<li><a href="#_data_value_class">2.2.1. Data_value Class</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_miscellaneous_types">3. Miscellaneous Types</a>
<ul class="sectlevel2">
<li><a href="#_boolean_values">3.1. Boolean Values</a>
<ul class="sectlevel3">
<li><a href="#_class_descriptions_2">3.1.1. Class Descriptions</a>
<ul class="sectlevel4">
<li><a href="#_dv_boolean_class">3.1.1.1. Dv_boolean Class</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_real_world_identifiers">3.2. Real World Identifiers</a>
<ul class="sectlevel3">
<li><a href="#_requirements">3.2.1. Requirements</a></li>
<li><a href="#_semantics">3.2.2. Semantics</a></li>
<li><a href="#_class_descriptions_3">3.2.3. Class Descriptions</a>
<ul class="sectlevel4">
<li><a href="#_dv_identifier_class">3.2.3.1. Dv_identifier Class</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_timing">3.3. Timing</a>
<ul class="sectlevel3">
<li><a href="#_class_descriptions_4">3.3.1. Class Descriptions</a>
<ul class="sectlevel4">
<li><a href="#_dv_timing_class">3.3.1.1. Dv_timing Class</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#_text_package">4. Text Package</a>
<ul class="sectlevel2">
<li><a href="#_overview_2">4.1. Overview</a></li>
<li><a href="#_requirements_2">4.2. Requirements</a>
<ul class="sectlevel3">
<li><a href="#_narrative_text">4.2.1. Narrative Text</a></li>
<li><a href="#_terminological_entities">4.2.2. Terminological Entities</a></li>
<li><a href="#_integration_scenarios">4.2.3. Integration Scenarios</a></li>
<li><a href="#_text_formatting">4.2.4. Text Formatting</a></li>
</ul>
</li>
<li><a href="#_semantics_2">4.3. Semantics</a>
<ul class="sectlevel3">
<li><a href="#_qualification">4.3.1. Qualification</a></li>
<li><a href="#_meaning_modification">4.3.2. Meaning Modification</a>
<ul class="sectlevel4">
<li><a href="#_mode_changing_terms">4.3.2.1. Mode-changing Terms</a></li>
<li><a href="#_context_sensitivity">4.3.2.2. Context Sensitivity</a></li>
<li><a href="#_negation">4.3.2.3. Negation</a></li>
<li><a href="#_representation_of_meaning_modifying_terms">4.3.2.4. Representation of Meaning-Modifying Terms</a></li>
</ul>
</li>
<li><a href="#_mappings">4.3.3. Mappings</a>
<ul class="sectlevel4">
<li><a href="#_classification_broader_terms">4.3.3.1. Classification (Broader Terms)</a></li>
<li><a href="#_equivalent_synonymous_terms">4.3.3.2. Equivalent / Synonymous Terms</a></li>
<li><a href="#_more_specific_mappings_narrower_terms">4.3.3.3. More Specific Mappings (Narrower Terms)</a></li>
<li><a href="#_the_unified_medical_language_system_umls">4.3.3.4. The Unified Medical Language System (UMLS)</a></li>
<li><a href="#_legacy_mapping_scenarios">4.3.3.5. Legacy Mapping Scenarios</a></li>
</ul>
</li>
<li><a href="#_language_translations">4.3.4. Language Translations</a></li>
<li><a href="#_formatting_and_hyperlinking">4.3.5. Formatting and Hyperlinking</a>
<ul class="sectlevel4">
<li><a href="#_usage_in_dv_text_instances">4.3.5.1. Usage in Dv_text Instances</a></li>
<li><a href="#_usage_in_dv_coded_text_instances">4.3.5.2. Usage in Dv_coded_text Instances</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_class_descriptions_5">4.4. Class Descriptions</a>
<ul class="sectlevel3">
<li><a href="#_dv_text_class">4.4.1. Dv_text Class</a></li>
<li><a href="#_dv_plain_text_class">4.4.2. Dv_plain_text Class</a></li>
<li><a href="#_dv_coded_text_class">4.4.3. Dv_coded_text Class</a></li>
<li><a href="#_term_mapping_class">4.4.4. Term_mapping Class</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_ordered_package_quantities">5. Ordered Package: Quantities</a>
<ul class="sectlevel2">
<li><a href="#_overview_3">5.1. Overview</a></li>
<li><a href="#_requirements_3">5.2. Requirements</a>
<ul class="sectlevel3">
<li><a href="#_scores_and_scales">5.2.1. Scores and Scales</a></li>
<li><a href="#_countable_things">5.2.2. Countable Things</a></li>
<li><a href="#_dimensioned_quantities">5.2.3. Dimensioned Quantities</a></li>
<li><a href="#_ratios_and_proportions">5.2.4. Ratios and Proportions</a></li>
<li><a href="#_formulations">5.2.5. Formulations</a></li>
<li><a href="#_quantity_ranges">5.2.6. Quantity Ranges</a></li>
<li><a href="#_reference_ranges">5.2.7. Reference Ranges</a></li>
<li><a href="#_normal_range_and_status_in_laboratory_data">5.2.8. Normal Range and Status in Laboratory data</a></li>
</ul>
</li>
<li><a href="#_design">5.3. Design</a>
<ul class="sectlevel3">
<li><a href="#_basic_semantics">5.3.1. Basic Semantics</a></li>
<li><a href="#_accuracy_and_uncertainty">5.3.2. Accuracy and Uncertainty</a></li>
<li><a href="#_quantity_ranges_2">5.3.3. Quantity Ranges</a></li>
<li><a href="#_proportions">5.3.4. Proportions</a></li>
<li><a href="#_normal_and_reference_ranges">5.3.5. Normal and Reference Ranges</a></li>
<li><a href="#_recording_time">5.3.6. Recording Time</a></li>
</ul>
</li>
<li><a href="#_class_descriptions_6">5.4. Class Descriptions</a>
<ul class="sectlevel3">
<li><a href="#_dv_ordinal_class">5.4.1. Dv_ordinal Class</a></li>
<li><a href="#_dv_quantified_class">5.4.2. Dv_quantified Class</a></li>
<li><a href="#_dv_quantity_class">5.4.3. Dv_quantity Class</a></li>
<li><a href="#_dv_count_class">5.4.4. Dv_count Class</a></li>
<li><a href="#_dv_ratio_class">5.4.5. Dv_ratio Class</a></li>
<li><a href="#_ratio_kind_enumeration">5.4.6. Ratio_kind Enumeration</a></li>
<li><a href="#_dv_measured_class">5.4.7. Dv_measured Class</a></li>
<li><a href="#_reference_range_class">5.4.8. Reference_range Class</a></li>
<li><a href="#_comparison_operator_enumeration">5.4.9. Comparison_operator Enumeration</a></li>
<li><a href="#_dv_range_class">5.4.10. Dv_range Class</a></li>
</ul>
</li>
<li><a href="#_syntaxes">5.5. Syntaxes</a>
<ul class="sectlevel3">
<li><a href="#_units_syntax">5.5.1. Units Syntax</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_ordered_package_temporal">6. Ordered Package: Temporal</a>
<ul class="sectlevel2">
<li><a href="#_overview_4">6.1. Overview</a></li>
<li><a href="#_requirements_4">6.2. Requirements</a>
<ul class="sectlevel3">
<li><a href="#_standard_datetimes">6.2.1. Standard Date/Times</a></li>
<li><a href="#_partial_datetimes">6.2.2. Partial Date/Times</a></li>
</ul>
</li>
<li><a href="#_design_2">6.3. Design</a>
<ul class="sectlevel3">
<li><a href="#_general_approach">6.3.1. General Approach</a></li>
<li><a href="#_partial_datetimes_2">6.3.2. Partial Date/Times</a></li>
<li><a href="#_calendars">6.3.3. Calendars</a></li>
<li><a href="#_representation">6.3.4. Representation</a></li>
</ul>
</li>
<li><a href="#_class_descriptions_7">6.4. Class Descriptions</a>
<ul class="sectlevel3">
<li><a href="#_dv_temporal_class">6.4.1. Dv_temporal Class</a></li>
<li><a href="#_dv_date_class">6.4.2. Dv_date Class</a></li>
<li><a href="#_dv_time_class">6.4.3. Dv_time Class</a></li>
<li><a href="#_dv_date_time_class">6.4.4. Dv_date_time Class</a></li>
<li><a href="#_dv_duration_class">6.4.5. Dv_duration Class</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_encapsulated_package">7. Encapsulated Package</a>
<ul class="sectlevel2">
<li><a href="#_overview_5">7.1. Overview</a>
<ul class="sectlevel3">
<li><a href="#_requirements_5">7.1.1. Requirements</a></li>
<li><a href="#_design_3">7.1.2. Design</a></li>
<li><a href="#_examples">7.1.3. Examples</a></li>
</ul>
</li>
<li><a href="#_class_descriptions_8">7.2. Class Descriptions</a>
<ul class="sectlevel3">
<li><a href="#_dv_encapsulated_class">7.2.1. Dv_encapsulated Class</a></li>
<li><a href="#_dv_multimedia_class">7.2.2. Dv_multimedia Class</a></li>
<li><a href="#_dv_parsable_class">7.2.3. Dv_parsable Class</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_uri_package">8. Uri Package</a>
<ul class="sectlevel2">
<li><a href="#_overview_6">8.1. Overview</a>
<ul class="sectlevel3">
<li><a href="#_requirements_6">8.1.1. Requirements</a></li>
<li><a href="#_design_4">8.1.2. Design</a></li>
</ul>
</li>
<li><a href="#_definitions">8.2. Definitions</a></li>
<li><a href="#_class_descriptions_9">8.3. Class Descriptions</a>
<ul class="sectlevel3">
<li><a href="#_dv_uri_class">8.3.1. Dv_uri Class</a></li>
<li><a href="#_dv_ehr_uri_class">8.3.2. Dv_ehr_uri Class</a></li>
</ul>
</li>
<li><a href="#_syntaxes_2">8.4. Syntaxes</a>
<ul class="sectlevel3">
<li><a href="#_dv_ehr_uri_syntax">8.4.1. DV_EHR_URI Syntax</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_implementation_strategies">9. Implementation Strategies</a>
<ul class="sectlevel2">
<li><a href="#_overview_7">9.1. Overview</a></li>
<li><a href="#_quantities_and_ordered_numeric">9.2. Quantities and Ordered_numeric</a></li>
<li><a href="#_unicode">9.3. Unicode</a></li>
<li><a href="#_dates_and_times">9.4. Dates and Times</a></li>
</ul>
</li>
<li><a href="#_references">References</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="imageblock text-center">
<div class="content">
<img src="https://uploads-ssl.webflow.com/63570cd7d4eda80d654ccf14/64027a592d749e7df28c6248_primary-graphite.svg" alt="openEHR logo">
</div>
</div>
</div>
</div>
<h1 id="_data_types_model" class="sect0"><a class="anchor" href="#_data_types_model"></a>Data Types Model</h1>
<div class="openblock partintro">
<div class="content">
<table class="tableblock frame-all grid-all fit-content spread">
<colgroup>
<col>
<col>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top" colspan="2"><strong>Issuer</strong>: <a href="http://graphitehealth.io" target="_blank" rel="noopener">Graphite Platform Community</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Release</strong>: GCM latest</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Status</strong>: TRIAL</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Revision</strong>: <a href="#latest_issue">[latest_issue]</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Date</strong>: <a href="#latest_issue_date">[latest_issue_date]</a></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>Keywords</strong>: EHR, clinical, data types, Graphite</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top" colspan="2">&#169; 2023 - 2023 Graphite Platform Publishing</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><a href="http://graphitehealth.io" target="_blank" rel="noopener">Graphite Platforms</a> is an independent, non-profit foundation.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>Licence</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="https://specifications.openehr.org/images/cc-by-nd-88x31.png" alt="image"></span> Creative Commons Attribution-NoDerivs 3.0 Unported. <a href="https://creativecommons.org/licenses/by-nd/3.0/" class="bare">https://creativecommons.org/licenses/by-nd/3.0/</a></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>Support</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Issues: <a href="https://specifications.graphitehealth.io/components/GCM/open_issues" target="_blank" rel="noopener">Report an Issue</a><br>
 Web: <a href="https://specifications.graphitehealth.io" target="_blank" rel="noopener">specifications.GraphiteHealth.io</a></p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_amendment_record"><a class="anchor" href="#_amendment_record"></a>Amendment Record</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 9.0909%;">
<col style="width: 54.5454%;">
<col style="width: 18.1818%;">
<col style="width: 18.1819%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Issue</th>
<th class="tableblock halign-left valign-top">Details</th>
<th class="tableblock halign-left valign-top">Raiser, Implementer</th>
<th class="tableblock halign-left valign-top">Completed</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="latest_issue"></a>0.1.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Initial Writing: based on openEHR and HL7 FHIR Data types.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="latest_issue_date"></a>10 Apr 2023</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_acknowledgements"><a class="anchor" href="#_acknowledgements"></a>Acknowledgements</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_editor"><a class="anchor" href="#_editor"></a>Editor</h3>
<div class="ulist">
<ul>
<li>
<p>Graphite Informatics group.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_contributors"><a class="anchor" href="#_contributors"></a>Contributors</h3>
<div class="paragraph">
<p>This specification benefited from input from the wider health informatics community. The openEHR Foundation would like to recognise the following people for their contributions.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>xxx</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_support"><a class="anchor" href="#_support"></a>Support</h3>
<div class="paragraph">
<p>The work reported in this paper has been funded in part by the following organisations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>xxx</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_trademarks"><a class="anchor" href="#_trademarks"></a>Trademarks</h3>
<div class="ulist">
<ul>
<li>
<p>'openEHR' is a trademark of the openEHR Foundation</p>
</li>
<li>
<p>'Java' is a registered trademark of Oracle Corporation</p>
</li>
<li>
<p>'Microsoft' and '.Net' are trademarks of the Microsoft Corporation</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_preface"><a class="anchor" href="#_preface"></a>1. Preface</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose"><a class="anchor" href="#_purpose"></a>1.1. Purpose</h3>
<div class="paragraph">
<p>This document defines the Graphite Data Types Model.</p>
</div>
<div class="paragraph">
<p>The intended audience includes implementers, integrators and health data managers.</p>
</div>
</div>
<div class="sect2">
<h3 id="_related_documents"><a class="anchor" href="#_related_documents"></a>1.2. Related Documents</h3>
<div class="paragraph">
<p>Prerequisite documents for reading this document include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <a href="https://specifications.openehr.org/releases/BASE/latest/architecture_overview.html" target="_blank" rel="noopener">openEHR Architecture Overview</a>;</p>
</li>
<li>
<p>The <a href="https://specifications.openehr.org/releases/RM/latest/support.html" target="_blank" rel="noopener">openEHR Support Information Model</a>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_status"><a class="anchor" href="#_status"></a>1.3. Status</h3>
<div class="paragraph">
<p>This specification is in the TRIAL state. The development version of this document can be found at <a href="https://specifications.openehr.org/releases/RM/latest/data_types.html" target="_blank" rel="noopener">https://specifications.openehr.org/releases/RM/latest/data_types.html</a>.</p>
</div>
<div class="paragraph">
<p>Known omissions or questions are indicated in the text with a 'to be determined' paragraph, as follows:</p>
</div>
<div class="paragraph tbd">
<p><strong>TBD</strong>: (example To Be Determined paragraph)</p>
</div>
</div>
<div class="sect2">
<h3 id="_feedback"><a class="anchor" href="#_feedback"></a>1.4. Feedback</h3>
<div class="paragraph">
<p>Feedback may be provided on the <a href="https://discourse.openehr.org/c/specifications/rm" target="_blank" rel="noopener">openEHR RM specifications forum</a>.</p>
</div>
<div class="paragraph">
<p>Issues may be raised on the <a href="https://specifications.graphitehealth.io/components/GCM/open_issues" target="_blank" rel="noopener">specifications Problem Report tracker</a>.</p>
</div>
<div class="paragraph">
<p>To see changes made due to previously reported issues, see the <a href="https://specifications.graphitehealth.io/components/GCM/history" target="_blank" rel="noopener">GCM component Change Request tracker</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_conformance"><a class="anchor" href="#_conformance"></a>1.5. Conformance</h3>
<div class="paragraph">
<p>Conformance of a data or software artifact to an openEHR specification is determined by a formal test of that artifact against the relevant openEHR Implementation Technology Specification(s) (ITSs), such as an IDL interface or an XML-schema. Since ITSs are formal derivations from underlying models, ITS conformance indicates model conformance.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_introduction"><a class="anchor" href="#_introduction"></a>2. Introduction</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_overview"><a class="anchor" href="#_overview"></a>2.1. Overview</h3>
<div class="paragraph">
<p>This specification describes a set of types suitable for use in scientific, clinical and related kinds of data. In order for such types to be defined, a set of primitive types is assumed, namely <code>Integer</code>, <code>Real</code>, <code>Boolean</code>, <code>Character</code>, <code>Octet</code>, <code>String</code>, <code>List&lt;T&gt;</code>, <code>Set&lt;T&gt;</code>, and <code>Array&lt;T&gt;</code>. These have standard definitions in the UML meta-model and in the type systems of most programming languages. The exact assumptions are described in the {graphite_foundation_types}[Graphite Foundation Types^].</p>
</div>
<div class="paragraph">
<p>The data types described here are named with the class prefix <code>DV_</code>, and inherit from the class <code>DATA_VALUE</code>. They have two distinct uses in reference models. Firstly, they may be used as 'data values' in reference model structures wherever the <code>DATA_VALUE</code> class appears, for example, in the Entry Model via the <code>ELEMENT.<em>value</em></code> attribute. Additionally, specific subtypes of the data types described here can also be used as attribute types in other classes in reference models, such as date/times, coded terms and so on. The difference is that in the former case, only subtypes of <code>DATA_VALUE</code> may be used, whilst in the latter case, other types may be used as well, from the assumed set of basic types.</p>
</div>
<div class="paragraph">
<p>Over and above the need to satisfy the functional requirements of clinical data, three concerns have driven the design of the openEHR data types:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>clarity of expression</p>
</li>
<li>
<p>ease of implementation</p>
</li>
<li>
<p>interoperability with data types from other standards</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Accordingly, the types defined here have been derived from the <a href="https://specifications.openehr.org/releases/RM/latest/data_types.html" target="_blank" rel="noopener">openEHR Data Types</a> and the <a href="http://build.fhir.org/datatypes.html" target="_blank" rel="noopener">HL7 FHIR Data Types</a>.</p>
</div>
<div class="paragraph">
<p>The <code>data_types</code> package is illustrated below.</p>
</div>
<div id="data_types" class="imageblock text-center text-center">
<div class="content">
<img src="UML/diagrams/GCM-data_types.svg" alt="GCM data types">
</div>
<div class="title">Figure 1. gcm.data_types package</div>
</div>
</div>
<div class="sect2">
<h3 id="_class_descriptions"><a class="anchor" href="#_class_descriptions"></a>2.2. Class Descriptions</h3>
<div class="sect3">
<h4 id="_data_value_class"><a class="anchor" href="#_data_value_class"></a>2.2.1. Data_value Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong><em>Data_value (abstract)</em></strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Abstract parent of all <code>Dv_</code> data value types.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="/releases/BASE/latest/foundation_types.html#_any_class" target="_blank" rel="noopener">Any</a></code></p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_miscellaneous_types"><a class="anchor" href="#_miscellaneous_types"></a>3. Miscellaneous Types</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_boolean_values"><a class="anchor" href="#_boolean_values"></a>3.1. Boolean Values</h3>
<div class="paragraph">
<p>One of the most basic types of data is boolean data.</p>
</div>
<div class="paragraph">
<p>TBD</p>
</div>
<div class="sect3">
<h4 id="_class_descriptions_2"><a class="anchor" href="#_class_descriptions_2"></a>3.1.1. Class Descriptions</h4>
<div class="sect4">
<h5 id="_dv_boolean_class"><a class="anchor" href="#_dv_boolean_class"></a>3.1.1.1. Dv_boolean Class</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>Dv_boolean</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Items which are truly boolean data, such as true/false or yes/no answers.</p>
</div>
<div class="paragraph">
<p>Misuse: <code>Dv_boolean</code> should not be used as a replacement for naively modelled enumerated types such as male/female etc. Such values should be coded, and in any case the enumeration often has more than two values.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_data_value_class">Data_value</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>value</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Boolean value of this item. Actual values may be language or implementation dependent.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_real_world_identifiers"><a class="anchor" href="#_real_world_identifiers"></a>3.2. Real World Identifiers</h3>
<div class="sect3">
<h4 id="_requirements"><a class="anchor" href="#_requirements"></a>3.2.1. Requirements</h4>
<div class="paragraph">
<p>Real world entities (RWEs) such as people, car engines, invoices, and appointments may all be assigned identifiers. In general, while some real world identifiers (RWIs) are 1:1 with their referent entities, none can be guaranteed so. Therefore, from a strict computational point of view, RWIs are not treated as reliable identifiers, but as <em>attributes</em> of their owning objects, in the same ways as names and addresses for example.</p>
</div>
<div class="paragraph">
<p>Examples of RWE identifiers that are intended to be unique within the space of the issuing authority or organisation include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>driver&#8217;s licence id</p>
</li>
<li>
<p>social security number</p>
</li>
<li>
<p>passport number</p>
</li>
<li>
<p>prescription id</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The defining logical characteristic of RWIs is that they continue to identify the entities in question, regardless of how the latter change in time; for example a social security number does not change when someone changes his or her hair colour or address. In general it should be the case that if two RWIs are equal, they refer to the same RWE.</p>
</div>
</div>
<div class="sect3">
<h4 id="_semantics"><a class="anchor" href="#_semantics"></a>3.2.2. Semantics</h4>
<div class="paragraph">
<p>The model defined in the <code>Dv_identifier</code> class allows the recording of three things as part of identifying an item of interest:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the identifier given to the item of interest (mandatory).</p>
</li>
<li>
<p>the issuing authority of the kind of id used (e.g. it might be the federal department of health) (optional);</p>
</li>
<li>
<p>the assigner of the id to the item being identified. This is usually the organisation which created the item being identified (optional);</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In addition, a type of item being identified can also be recorded, such as 'driver&#8217;s licence' or 'Medicare card'. All fields are text fields, rather than coded, as no definitive vocabularies are available. However, some useful sources of terms exists, such as <a href="https://www.hl7.org/fhir/v2/0203/index.html" target="_blank" rel="noopener">HL7v2 Table 0203</a> for the <code>type</code> field. If using the latter, it is recommended to use the 'description', not the code.</p>
</div>
<div class="paragraph">
<p>Only the <code>identifier</code> field is mandatory to allow for use cases in which the other fields cannot be populated. However it is strongly recommended to populate the <code>type</code> and <code>issuer</code> fields where possible. In many cases the <code>issuer</code> and <code>assigner</code> have the same value, however two fields allow for the situation in which a central issuer provides blocks of identifiers (typically on some kind of form or other paperwork) to other organisations who then assign them to individuals, as is often done with prescription identifiers.</p>
</div>
<div class="paragraph">
<p>See the <a href="https://specifications.openehr.org/releases/BASE/latest/base_types.html#_identification_package" target="_blank" rel="noopener">Support Base Types specification</a> for a further discussion of RWEs and IEs, and the definition of IEs in openEHR.</p>
</div>
</div>
<div class="sect3">
<h4 id="_class_descriptions_3"><a class="anchor" href="#_class_descriptions_3"></a>3.2.3. Class Descriptions</h4>
<div class="sect4">
<h5 id="_dv_identifier_class"><a class="anchor" href="#_dv_identifier_class"></a>3.2.3.1. Dv_identifier Class</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>Dv_identifier</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Type for representing identifiers of real-world entities. Typical identifiers include drivers licence number, social security number, veterans affairs number, prescription id, order id, and so on.</p>
</div>
<div class="paragraph">
<p><code>Dv_identifier</code> is used to represent any identifier of a real thing, issued by some authority or agency.</p>
</div>
<div class="paragraph">
<p>Misuse: <code>Dv_identifier</code> is not used to express identifiers generated by the infrastructure to refer to information items; the types <code>Object_id</code> and `Object_ref`and subtypes are defined for this purpose.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_data_value_class">Data_value</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>issuer</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_string_class" target="_blank" rel="noopener">String</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Optional authority which issues the kind of id used in the id field of this object.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>assigner</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_string_class" target="_blank" rel="noopener">String</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Optional organisation that assigned the id to the item being identified.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>id</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_string_class" target="_blank" rel="noopener">String</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The identifier value. Often structured, according to the definition of the issuing authority&#8217;s rules.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>type</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_string_class" target="_blank" rel="noopener">String</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Optional identifier type, such as  prescription , or  Social Security Number . One day a controlled vocabulary might be possible for this.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Invariants</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><em>Id_valid</em>: <code>not id.is_empty</code></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_timing"><a class="anchor" href="#_timing"></a>3.3. Timing</h3>
<div class="paragraph">
<p>TBD</p>
</div>
<div class="sect3">
<h4 id="_class_descriptions_4"><a class="anchor" href="#_class_descriptions_4"></a>3.3.1. Class Descriptions</h4>
<div class="sect4">
<h5 id="_dv_timing_class"><a class="anchor" href="#_dv_timing_class"></a>3.3.1.1. Dv_timing Class</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>Dv_timing</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Wrapped form of <code>Timing</code> suitable for use as a <code>Data_value</code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_data_value_class">Data_value</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>value</strong>: <code><a href="/releases/BASE/latest/base_types.html#_timing_class" target="_blank" rel="noopener">Timing</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_text_package"><a class="anchor" href="#_text_package"></a>4. Text Package</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_overview_2"><a class="anchor" href="#_overview_2"></a>4.1. Overview</h3>
<div class="paragraph">
<p>The <code>rm.data_types.text</code> package contains classes for representing all textual values in the health record, including plain text, coded terms, and narrative text. It is illustrated below.</p>
</div>
<div id="rm_data_types_text" class="imageblock text-center text-center">
<div class="content">
<img src="UML/diagrams/GCM-data_types.text.svg" alt="GCM data types.text">
</div>
<div class="title">Figure 2. gcm.data_types.text package</div>
</div>
</div>
<div class="sect2">
<h3 id="_requirements_2"><a class="anchor" href="#_requirements_2"></a>4.2. Requirements</h3>
<div class="paragraph">
<p>The sections below describe the requirements of text data types. Two overriding principles should be noted at the outset with regard to text.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Regardless of what terminologies are (or are not) available to the clinician and/or the software, the primary requirement is that in all cases clinicians are able to record exactly what they want to say. This means that if they want to record something very general, such as "cold" or a very specific term such as "Ross River virus infection" they should be able to, whether or not the appropriate coded terms are available. However, the facility should be available to additionally code any such textual item, at the time or indeed at some later time, so as to satisfy reporting or other needs.</p>
</li>
<li>
<p>It is assumed that any client of terminology, such as the EHR, uses a terminology service which provides a complete interface to the terminology. The design of the <code>Dv_coded_text</code> type reflects this. Accordingly, there is no concept of "post-coordination" outside the terminology environment allowed by the data types described here: the only thing that is available from the terminology service is a key which refers to a lexical entity, which may be a single term or a code phrase, and which may be part of a reference terminology and/or linked to element(s) of underlying ontologies. It is also assumed that there is no direct access to any particular terminology; access to all terminologies (whether simple coded lexicons or large semantic networks) is via the same abstract interface.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Terminology Ids are likely to be of various types.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Terminology Id = <code>"local"</code>: this constant value means that the origin of allowable values is described within the archetype. This is coded to allow translation. The local archetype then only needs the set of codes and the local translation. The archetype may contain a translation table if required.</p>
</li>
<li>
<p>Terminology Id = <code>"[authority]"</code>. This might be <code>"openehr"</code>, <code>"centc251"</code>, <code>"hl7"</code>, etc;</p>
</li>
<li>
<p>The variant Terminology Id = <code>"[authority]:[Domain value set]"</code> could also be supported, although it should not generally be necessary, since all codes should be unique within a given issuing authority. Examples might be <code>"openehr:event math function"</code>, <code>"hl7:gender"</code>;</p>
</li>
<li>
<p>Terminology Id = <code>"SNOMED-CT"</code>, <code>"ICD10AM"</code>, etc. Idemtifiers of this kind must be unique values in an accepted set of terminologies from an authoritative source. These MUST be universally known. In openEHR, names from the US National Library of Medicine&#8217;s UMLS terminology name list are used. See the <code>terminology</code> package in the <a href="https://specifications.openehr.org/releases/RM/latest/support.html#_terminology_package" target="_blank" rel="noopener">Support IM specification</a> for details.</p>
</li>
</ol>
</div>
<div class="sect3">
<h4 id="_narrative_text"><a class="anchor" href="#_narrative_text"></a>4.2.1. Narrative Text</h4>
<div class="paragraph">
<p>Narrative text items are used in the EHR in a number of cases, including:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>values of coded attributes in the reference model;</p>
</li>
<li>
<p>recording of subjective or imprecise patient responses, particularly quantities or dates not deemed sufficiently precise to be represented using structured quantitative or date/time date types;</p>
</li>
<li>
<p>recording of narrative statements, e.g. visual observations;</p>
</li>
<li>
<p>recording of tracts of prose, e.g. overall findings and conclusions, prognoses;</p>
</li>
<li>
<p>recording of values that would normally be coded, but for which no code and/or no terminology service is available.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>While narrative text items themselves are not themselves coded, they may have code phrases associated
with them, as described below under Mappings, and may be mixed within a paragraph with
coded items.</p>
</div>
</div>
<div class="sect3">
<h4 id="_terminological_entities"><a class="anchor" href="#_terminological_entities"></a>4.2.2. Terminological Entities</h4>
<div class="paragraph">
<p>Textual entities available in a terminology service are used in the health record to enable processing,
from simple queries to decision support. Reasons for using terminology include the following.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>To guarantee interoperability of meaning. For instance, if the term "cold" is recorded in plain text, it could be interpreted as "feeling cold", "C.O.L.D" (chronic obstructive lung disease), "rhinorrhoea", "coryza" or "U.R.T.I. (upper respiriatory tract infection), among others. If, however, it is coded from a terminology such as <a href="http://www.who.int/classifications/icd/en/" target="_blank" rel="noopener">ICD10</a> or <a href="http://www.snomed.org" target="_blank" rel="noopener">SNOMED CT</a>, any party reading the data (including software) knows the intention, since the meaning of the code in the terminology is unambiguous.</p>
</li>
<li>
<p>To standardise textual renderings of terms and avoid informal shorthand. For example, practitioners wanting to write "systolic blood pressure" write things like "systolic BP", "systolic bp", "sys. BP." and so on; use of coded terms ensures that such abbreviations are either avoided, or associated with an unambiguous meaning.</p>
</li>
<li>
<p>For unambiguous naming of problems, medications or diagnoses for support of knowledge-based tools such as prescribing packages and other decision support applications.</p>
</li>
<li>
<p>For standardised names of things in the record e.g. a heading of "Physical examination" or an entry such as "Differential diagnosis".</p>
</li>
<li>
<p>For finite sets of values ('value sets'), e.g. Blood Group = 'A|B|AB|O'.</p>
</li>
<li>
<p>For classifying other data for the purpose of statistical studies, e.g. by putting ICD disease group classifiers on actual disease names entered in health records.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A basic requirement for interoperability of text items, coded using terms (i.e. where the text is the
official rubric for the code), is that both the rubric and the code (or 'code-phrase') must be recorded,
to ensure the originally intended text is retained for receivers of EHR information who do not have
access to the terminologies used at the origin. However, where a terminology service is available, the
key can be used to unambiguously locate the string value of the term, and can also be used to find
translations in other languages. (Note that these comments do not apply to mappings, which are
described below).</p>
</div>
<div class="paragraph">
<p>In some terminologies, there are semantic networks of links emanating from most coded terms,
which classify them or relate them to other terms. Such links provide a means for decision support to
make inferences about specific things found in the record. For instance if the term "leukaemia" is
found, queries to the terminology service can be made in order to deduce that the patient has both a
"cancer" and a "disease of the immune system" (assuming leukaemia is classified under these more
general terms in the terminology).</p>
</div>
<div class="paragraph">
<p>This specification assumes the existence of a terminology service which is responsible for interrogating
actual terminologies and performing <em>validated coordination</em> of terms, i.e. creating combinations
deemed valid by the underlying source terminology, potentially without even assigning a new code to
the result. All validated coordination is carried out inside the terminology service, and any 'term'
made available by the service is already 'coordinated'. The difference between 'pre-coordinated' and
'post-coordinated' terms is that the former have a single code, whereas the latter have a code phrase,
or expression that is interpretable by the terminology. For example, the coordination "foot, left" (a
shorthand way of writing the relationship "foot has-laterality left") could be created by the terminology
service from the source terms "foot", "left" and "has-laterality" from a terminology such as
SNOMED CT. Any such coordination must be valid within the source terminology, i.e. correspond to
valid relationships defined therein.</p>
</div>
<div class="paragraph">
<p>The semantics attached to post-coordinations of terms may differ. Two categories of coordination
described in the literature are 'qualification' and 'modification'. A common definition of the first is
that qualification 'narrows meaning' - i.e. creates a new term whose possible real world instances are
within the set denoted by the original root term. Modification on the other hand changes the meaning
of a root term. Various cases are described below under Meaning Modification. Both coordination
types are assumed to be managed by the terminology service.</p>
</div>
<div class="paragraph">
<p>Coded terms may also be mapped to terms from other terminologies, which may be intended as
equivalents, classifiers, or something in between. The section below on Mappings deals with these.</p>
</div>
</div>
<div class="sect3">
<h4 id="_integration_scenarios"><a class="anchor" href="#_integration_scenarios"></a>4.2.3. Integration Scenarios</h4>
<div class="paragraph">
<p>In cases where openEHR data is used to represent data originally represented in other formats, one common requirement is to be able to represent both the term chosen by the user at data capture time, and also the corresponding preferred term, where the two are different. This allows both the user&#8217;s specific choice and the 'standard term' to be captured.</p>
</div>
<div class="paragraph">
<p>Secondly, where term mappings are represented it is useful to be able to capture not just the code or code-phrase of the mapped term, but the preferred term or expression text, in order to make the mapped term self-standing in the data.</p>
</div>
</div>
<div class="sect3">
<h4 id="_text_formatting"><a class="anchor" href="#_text_formatting"></a>4.2.4. Text Formatting</h4>
<div class="paragraph">
<p>In modern information systems in all industries, the ability to visually format text exists. EHR systems are no different, and authors of narrative text parts of the health record expect to be able to create longer tracts of text that include paragraphs, bolding, bullet lists and other typical structures, as well as simple atoms of text. Generally speaking, the text associated with a coded term is a simple string, devoid of formatting or newlines, and if the text is a direct copy of the rubric (i.e. term) from a terminology, this will almost always be the case. However there is no guarantee that this will not change in the future, with perhaps newlines and e.g. bolding being used in 'rich text' rubrics.</p>
</div>
<div class="paragraph">
<p>Clinicians need the freedom to maximise clarity of any text they write, and therefore should be able to include a reasonable level of formatting in text.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_semantics_2"><a class="anchor" href="#_semantics_2"></a>4.3. Semantics</h3>
<div class="paragraph">
<p>All atomic text items are either instances of the type <code>Dv_text</code> or of <code>Dv_coded_text</code>. The type <code>Dv_text</code> should be used wherever a coded or non-coded text item is allowed, while the type <code>Dv_coded_text</code> should be used wherever a text item must be coded. The former allows the representation of text (<code><em>value</em></code> attribute) with optional formatting and hyperlinking (see <a href="#_formatting_and_hyperlinking">Section 4.3.5</a> below). The latter class <code>Dv_coded_text</code> captures the association of two things:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the code of a term known in the terminology service, recorded in the <code><em>defining_code</em></code> attribute of type <code>CODE_PHRASE</code>;</p>
</li>
<li>
<p>the text rubric of the term, recorded in the <code><em>value</em></code> attribute (inherited from <code>Dv_text</code>).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The attribute <code>CODE_PHRASE.<em>code_string</em></code> records a term code or code expression which may be used as an argument to a retrieval function in the terminology service interface to obtain the definition of the term or expression.</p>
</div>
<div class="paragraph">
<p>The model of <code>Dv_coded_text</code> is designed to capture the <em>actual</em> term chosen by the user or software at runtime, i.e. preferred term or synonym (for terminologies supporting synonyms), or a post-coordination of underlying distinct terms if an expression was chosen as the term (such as an expression supported by SNOMED CT). A <code>Dv_coded_text</code> instance is used if the final textual value chosen by the user is the exact term text (preferred or other) returned by the terminology service for the key (i.e. <code><em>code_string</em></code> value). If the user makes even the slightest modification during data entry, a mapping (see <a href="#_mappings">Section 4.3.3</a>) to a <code>Dv_text</code> should be used instead.</p>
</div>
<div class="sect3">
<h4 id="_qualification"><a class="anchor" href="#_qualification"></a>4.3.1. Qualification</h4>
<div class="paragraph">
<p>Qualification is the process of making a term more specific through the post-coordination of additional
terms. It occurs when a terminology defines relationships between a primary term and other
terms that qualify the primary. For example a coordination using the term "bronchitis" which creates
a qualified term might be 'acute bronchitis'; all real world instances of the latter are also instances of
the former.</p>
</div>
</div>
<div class="sect3">
<h4 id="_meaning_modification"><a class="anchor" href="#_meaning_modification"></a>4.3.2. Meaning Modification</h4>
<div class="paragraph">
<p>Terms that change the meaning of other terms are often known as 'modifiers'. The difference
between modification and qualification is that modifiers change the meaning so that the modifed term
as a whole does <em>not</em> refer to instances of the unmodified term. We describe below the particular types
of modifiers and how they are represented using the text data types.</p>
</div>
<div class="sect4">
<h5 id="_mode_changing_terms"><a class="anchor" href="#_mode_changing_terms"></a>4.3.2.1. Mode-changing Terms</h5>
<div class="paragraph">
<p>One class of modifers is exemplified by the addition of words like 'risk of', 'fear of', 'history of'
and so on. These are sometimes called <em>mode-changing</em> terms, since they change the 'mode' of the
root term from the present to the past ('history of'), a potential future ('risk of') or some other possible
reality. Terms which are modified in this way should never be matched in queries searching for
the root term; for example, a query for 'coronary diease' (of the patient) should not match 'family
history of coronary disease'.</p>
</div>
</div>
<div class="sect4">
<h5 id="_context_sensitivity"><a class="anchor" href="#_context_sensitivity"></a>4.3.2.2. Context Sensitivity</h5>
<div class="paragraph">
<p>There are many terms whose meaning is changed by the context in which they are stated, such as
within a certain kind of note or test result. Consider the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>a blood sugar level after a 75gm oral loading has a different meaning than a fasting blood sugar;</p>
</li>
<li>
<p>a systolic blood pressure in the pulmonary artery has a different meaning than a systemic arterial blood pressure;</p>
</li>
<li>
<p>'total hip replacement' in the context of a 'planned procedure';</p>
</li>
<li>
<p>'meningitis' in the context of a 'differential diagnosis'.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_negation"><a class="anchor" href="#_negation"></a>4.3.2.3. Negation</h5>
<div class="paragraph">
<p>Negation is a special kind of mode change and has been a serious design challenge in the past,
because modifiers like 'not' or 'no' only make sense when attached to some terms, and create nonsensical
values or ambiguities by arbitrarily association with other terms.</p>
</div>
</div>
<div class="sect4">
<h5 id="_representation_of_meaning_modifying_terms"><a class="anchor" href="#_representation_of_meaning_modifying_terms"></a>4.3.2.4. Representation of Meaning-Modifying Terms</h5>
<div class="paragraph">
<p>Rather than provide explicit features for representing modifier terms within <code>Dv_coded_text</code>, the
general principle underlying representation of all post-coordinations other than qualifications, is that
a higher-level, archetyped structure such as an <code>Entry</code> (defined in the EHR RM), is a <em>minimal indivisible
unit of information</em>. Such higher-level entities can have internal structure, and it is possible (and
desirable) to achieve the effect of combinations of terms through this structure. In the case of <code>Entry</code>,
it will be via structuring of <code>CLUSTER</code>/<code>ELEMENT</code> objects. The general rule is: to obtain the full meaning
of any terms found in the record, all of the node names in any <code>Entry</code> (coded or not) must be considered
from the root to the relevant leaf. Conversely, the "final" meaning of any term in the record
cannot be known in isolation from the rest of the terms in the structure.</p>
</div>
<div class="paragraph">
<p>Accordingly, the concept "family history of coronary disease" is represented as an <code>Entry</code> whose root
is named (for example) "subject family history", and which includes further structure, which may be
in greater of lesser detail; the coded term "coronary disease" would appear somewhere in this structure.
The actual structure is completely defined by appropriate archetypes. Contrary to some perceptions,
there is no general way to represent concepts such as "family history of coronary disease",
since it will vary depending on how much detail is recorded. Where some GPs routinely record just
the simplest form, others may record the details of which family members had heart problems and
exactly what they were.</p>
</div>
<div class="paragraph">
<p>The same approach is used for context-dependent terms. Archetypes defining contexts such as
"planned procedures" or "differential diagnosis" will use these terms as their root nodes; as a result,
the meaning of any term appearing below the root can only be understood by including the root. Once
again, the exact structures are completely dependent upon archetyping, and may be simple or quite
sophisticated.</p>
</div>
<div class="paragraph">
<p>Negations are more complex than might first be apparent and are best handled by good archetype
design. Terminologies might provide a term such as "No known allergies" which is helpful. But if
someone has an allergy of some sort, the medicolegal requirement might be to record that the person
has no known allergies to penicillin or another class of medication that is being prescribed. The often
proposed approach of using a generic negation 'modifier' to deal with such issues results in further
problems. Consider the use of negation with liver - "no liver", "no palpable liver", "no liver disease",
"no history of liver disease", "no liver function", "no liver function tests". The meaning of negated
terms may be non-sensical and difficult to interpret.</p>
</div>
<div class="paragraph">
<p>A basic principle of dealing with negatives is to realise that most nave suggested use cases are quite
ambiguous as stated. Does "no allergies" mean "no reported episode of allergy", "no allergic reactions
ever", "no known allergies to medication" or something else? Does it mean that these statements
are taken as given by the patient, or determined by tests? Like all medical phenomena, allergies
must be described in some detail for the EHR to be of any real use. Almost inevitably, this precludes
the use of negated terms. Since the actual information structure will be determined in advance by
archetype designers, clinicians will almost never be in the situation of having to negate a term. However,
if the need does arise, it should be dealt with by a negative or quantitative answer, i.e. a value
rather than a name. For example, in any <code>Entry</code> describing current problems, the clinician may record
the name/value pair "allergies: NONE". Here, "allergies" will be a <code>Dv_coded_text</code>, and "NONE"
will be either a <code>Dv_coded_text</code> or a <code>Dv_text</code>; the two will be associated by a containing object,
such as an instance of the <code>ELEMENT</code> class from the EHR RM. There is no explicit model of negation
in openEHR.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_mappings"><a class="anchor" href="#_mappings"></a>4.3.3. Mappings</h4>
<div class="paragraph">
<p>In a number of circumstances, both plain text and coded text items are mapped to terms from other
terminologies. In theory, this should never occur, since it means that relationships between terms
which should only be knowable in the knowledge base (in the form of the terminology service, or
something else) are being created and transmitted as part of EHR information, potentially invalidating
or overriding the knowledge base. Where mappings are required, the proper approach is to create thesauri
within the knowledge environment, and map through them. Unfortunately, in some cases, activities
in the real world do not respect the information/knowledge boundary, hence the model described
here includes an explicit mapping concept, which itself includes a "purpose" and a "match" indicator.
Matching corresponds to the categories described below.</p>
</div>
<div class="sect4">
<h5 id="_classification_broader_terms"><a class="anchor" href="#_classification_broader_terms"></a>4.3.3.1. Classification (Broader Terms)</h5>
<div class="paragraph">
<p>Any text item, whether coded or not, may be classified with a coded term, for research, reporting and
decision support purposes. For example, a GP working in tropical Australia may wish to write "Ross
River infection", and be working with ICD9, which does not contain this term (although ICD9-CM
does). He or she will use a plain text item, but will still be able to map it to an ICD9 classifier, such as
the code for "arbovirus infection NOS". The same approach can be used for adding a classifying term
to a coded text item. The utility of classifier terms is various: they allow decision support to make
more powerful inferences; in situations where the available terminologies do not provide the classification
inbuilt, and where it is known that not all users of EHR data will have terminologies available.
In data terms, classification mapping can be visualised as illustrated below.</p>
</div>
<div id="coded_text_mappings" class="imageblock text-center text-center">
<div class="content">
<img src="data_types/diagrams/coded_text_mappings.png" alt="coded text mappings" width="70%">
</div>
<div class="title">Figure 3. Plain Text and Coded Text with Classifier(s)</div>
</div>
<div class="paragraph">
<p>Classifying mappings are represented by adding a term to the mappings list of the original term. Each
mapping is explicitly represented with an instance of <code>TERM_MAPPING</code>, which indicates both the term
being associated with the original text item, and a value of '&gt;' for the match attribute, which indicates
that the mapping is "broader". The possible values of the match attribute are '&gt;' (broader), '&lt;' (narrower),
and '=' (equivalent); they are taken from the ISO standards <a href="https://www.iso.org/standard/7776.html" target="_blank" rel="noopener">ISO 2788 - Guide to Establishment and development of monolingual thesauri</a> and <a href="https://www.iso.org/standard/12159.html" target="_blank" rel="noopener">ISO 5964 - Guide to Establishment and development of multilingual thesauri</a>.</p>
</div>
</div>
<div class="sect4">
<h5 id="_equivalent_synonymous_terms"><a class="anchor" href="#_equivalent_synonymous_terms"></a>4.3.3.2. Equivalent / Synonymous Terms</h5>
<div class="paragraph">
<p>Data from pathology laboratories has often been coded using a terminology local to the laboratory,
due to lack of or economic unfeasibility of using existing widespread terminologies for the job. However,
some laboratories also supply a nearest equivalent code from a well-known terminology such as
<a href="http://loinc.org">LOINC</a>, to enable the receiver of the data to process it in a more standard fashion. Here, "equivalence"
is taken to mean a term of the same meaning but from a different vocabulary.</p>
</div>
<div class="paragraph">
<p>Another instance where equivalent terms might be supplied is to effect the translation of terms across
specialist vocabularies such as nursing vocabularies when sharing EHRs across jurisdictions.</p>
</div>
<div class="paragraph">
<p>In theory, the cleanest way for senders and receivers of data coded with both a local and a more standard
equivalent to deal with the mapping problem is for the originator of the local terminology to provide
a complete thesaurus of translations into one or more recognised terminologies. However, in
practice, laboratories using the HL7 v2.x messaging standard usually encode a primary term and
equivalents with the HL7 CE data type, meaning that equivalents are included only with the term they
are used with. A similar pragmatic approach to mapping equivalent terms in the EHR is likely to be
used with the data types described here, and can be effected with the same mapping approach as for
classification.</p>
</div>
<div class="paragraph">
<p>A further situation in which text values - this time plain text - is mapped to equivalent terms is when
natural language processing is used to generate coded terms for existing free-text prose. The aim of
such processing is to detect word phrases and associate them with a coded term of the same meaning,
without obliterating the original text. In terms of the model described here, a <code>CODE_PHRASE</code> is associated
with a <code>Dv_text</code> instance via the mappings attribute.</p>
</div>
<div class="paragraph">
<p>In all cases with equivalents, the value of the match attribute is '=', indicating that the mapping is a
synonym.</p>
</div>
</div>
<div class="sect4">
<h5 id="_more_specific_mappings_narrower_terms"><a class="anchor" href="#_more_specific_mappings_narrower_terms"></a>4.3.3.3. More Specific Mappings (Narrower Terms)</h5>
<div class="paragraph">
<p>Occasionally, there is a need to create a mapping to a term of narrower meaning than the original text
item. Circumstances in which this occurs include when a clinician wants to record a syndrome such as
"croup" or "influenza", but the terminology does not contain these general terms, although it does
contain more specific terms, e.g. "viral laryngo-tracheitis" or "influenza type A". Clearly the clinician
should be allowed to record what he/she wants (as plain text if necessary), but it should also be possible
to add a mapping to the more precise term. For mappings to narrower terms, the value of the
match attribute is '&lt;'.</p>
</div>
</div>
<div class="sect4">
<h5 id="_the_unified_medical_language_system_umls"><a class="anchor" href="#_the_unified_medical_language_system_umls"></a>4.3.3.4. The Unified Medical Language System (UMLS)</h5>
<div class="paragraph">
<p>It has been argued in GEHR (<a href="#GeHR_Aus2001">Beale &amp; Heard&#44; 2000</a>) that UMLS reference terms should also be supplied with occurrences
of coded terms, in the form of the UMLS concept unique identifier, or "CUI". UMLS is a way
of encoding terms developed at the National Library of Medicine in the United States, and consists of
a meta-thesaurus, in which terms from any extant term set (such as <a href="http://www.who.int/classifications/icd/en/" target="_blank" rel="noopener">ICDx</a>, <a href="http://www.snomed.org" target="_blank" rel="noopener">SNOMED CT</a>, READ) can be
cross-referenced. UMLS CUIs could turn out to be extremely useful for decision support and reporting.</p>
</div>
<div class="paragraph">
<p>The proper use of UMLS is that terms from particular terminologies are passed to a UMLS interface
and a CUI + rubric received in response. However, the mapping approach described above could also
be used to map UMLS CUIs to existing text or terms in an EHR; in this case, a <code>Dv_coded_text</code> is
constructed for each UMLS "term", where the code is the CUI and the rubric is the text rendering of
the CUI (guaranteed unique in UMLS). The same approach can be used for any other thesaurus
which becomes available in the future.</p>
</div>
</div>
<div class="sect4">
<h5 id="_legacy_mapping_scenarios"><a class="anchor" href="#_legacy_mapping_scenarios"></a>4.3.3.5. Legacy Mapping Scenarios</h5>
<div class="paragraph">
<p>In cases where legacy data has to be converted to openEHR-compliant data, and only codes are available,
e.g. ICD or ICPC codes, the following approach is recommended:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>create a new <code>Dv_text</code> whose value is "(not available)"</p>
</li>
<li>
<p>add a mapping to the <code>Dv_text</code>, with:</p>
<div class="ulist">
<ul>
<li>
<p><code><em>purpose</em></code> = <code>"legacy conversion"</code></p>
</li>
<li>
<p><code><em>match</em></code> = <code>"="</code></p>
</li>
<li>
<p><code><em>target</em></code> = <code>CODE_PHRASE</code> object whose <code><em>code_string</em></code> and <code><em>terminology_id</em></code> are set to correspond to the available code in the legacy data.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>This expresses the reality that no text was ever recorded in the legacy system; rather a code was recorded directly in the data field. In the converted data, this code is more correctly considered a mapping.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_language_translations"><a class="anchor" href="#_language_translations"></a>4.3.4. Language Translations</h4>
<div class="paragraph">
<p>In most cases the natural language of a text object is known from the enclosing Entry (i.e. Observation)
or other enclosing context. Where it is different (e.g. a German sentence within an English language
diagnosis), or there is no enclosing context, the <code>Dv_text.<em>language</em></code> attribute can be set to
indicate the language of the text item.</p>
</div>
</div>
<div class="sect3">
<h4 id="_formatting_and_hyperlinking"><a class="anchor" href="#_formatting_and_hyperlinking"></a>4.3.5. Formatting and Hyperlinking</h4>
<div class="paragraph">
<p>Formatted text is represented by <code>Dv_text</code> and <code>Dv_coded_text</code> instances.</p>
</div>
<div class="paragraph">
<p>Formatting of the text in the <code><em>value</em></code> field of <code>Dv_text</code> and <code>Dv_coded_text</code> instances may be indicated via the optional <code><em>formatting</em></code> attribute. How this attribute is used has changed from initial versions of the openEHR Reference Model.</p>
</div>
<div class="paragraph">
<p>A common model of text processing is of a processing pipeline that consumes readable text containing markings, which is then rendered into HTML, PDF or some other rendering format, and then displayed by a tool such as a web browser that consumes the latter format. Historical approaches to marking text were known as 'markup', such as nroff, troff, Latek, and then more recently, numerous formats whose base syntax is XML. These formats all have the disadvantages of poor human readability in raw form, and being specific to particular rendering engines, and are starting to fall out of favour for uses involving human reading of the raw text. Another common approach to formatting text is to use the <em>output format</em>, usually HTML, to express e.g. fonts, bolding etc. This is also problematic for human readability, being complicated by the use of CSS classes in tags, which then need to be defined.</p>
</div>
<div class="paragraph">
<p>The current trend (emerging mainly for documentation in software) is to use 'markdown', which consists of markings in the text that visually indicate the intention: literal newlines, bolding via asterisks etc. No explicit CSS classes are needed, and conversion to rendering form is assumed to be done by an industry-standard markdown-to-HTML or other such converter. This is the approach taken by this specification, and is applied as follows.</p>
</div>
<div class="paragraph">
<p>The <code><em>formatting</em></code> attribute may contain one of the following values, with the associated meaning.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Void</code>:  if no value is supplied, no formatting marks are assumed to exist in the text, other than newlines, and it may safely be passed in a 'straight-through' fashion to a display device with no further processing, if desired;</p>
</li>
<li>
<p><code>"markdown"</code>: the text is assumed to be markdown format, strongly recommended use of the <a href="https://spec.commonmark.org/" target="_blank" rel="noopener">CommonMark</a> form of markdown, and should preferably be rendered via conversion to HTML in the usual way, but <em>may</em> be passed straight through to display if unavoidable, since markdown is acceptably human-readable;</p>
</li>
<li>
<p><code>"plain"</code>: the text is treated as in the unformatted (<code>Void</code>) case above (newlines are allowed); this option is used to enable archetype-based modelling tools to clearly require a text object to be unformatted;</p>
</li>
<li>
<p><code>"plain_no_newlines"</code>: as for the plain case, but newlines are not allowed - the text is a simple 'atom';</p>
</li>
<li>
<p>(legacy - deprecated): for legacy purposes, it remains legal to use a string of the form <code>"name:value; name:value"</code> , e.g. <code>"font-weight : bold; font-family : Arial; font-size : 12pt;"</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Related to the question of formatting, a second optional attribute, <code>Dv_text.<em>hyperlink</em></code> of type <code>DV_URI</code>, exists to specify a web link associated with the whole text represented by the <code>Dv_text</code> instance. Similarly to the case of formatting, the more modern markdown approach to using the <code><em>value</em></code> field is also more flexible with regards to links, since multiple instances of the latter may be used within a single text.</p>
</div>
<div class="paragraph">
<p>Not all CommonMark features are allowed in the <code><em>value</em></code> field, if it contains markdown. The following should not be used:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>HTML 'blocks';</p>
</li>
<li>
<p>raw HTML;</p>
</li>
<li>
<p>images - these may be included in openEHR content via the <code>Dv_multimedia</code> types.</p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_usage_in_dv_text_instances"><a class="anchor" href="#_usage_in_dv_text_instances"></a>4.3.5.1. Usage in Dv_text Instances</h5>
<div class="paragraph">
<p>In a concrete instance of <code>Dv_text</code>, the following are the likely usages of the <code><em>value</em></code> and <code><em>formatting</em></code> attributes.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Requirement</th>
<th class="tableblock halign-left valign-top"><code><em>value</em></code> attribute</th>
<th class="tableblock halign-left valign-top"><code><em>formatting</em></code> attribute</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Plain text 'atom'<br>
 (no formatting, no newlines)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">plain text string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Void</code> or <code>"plain_no_newlines"</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Plain text 'atom' with a hyperlink<br>
 (no formatting, no newlines)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text string of form <code>[text](uri)</code> or other CommonMark link variant</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>"markdown"</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Plain text paragraphs,<br>
 no other formatting</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">plain text string with newlines</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Void</code> or <code>"plain"</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Formatted text with paragraphs, bolding, italics, bullet lists, links etc</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CommonMark text string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>"markdown"</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_usage_in_dv_coded_text_instances"><a class="anchor" href="#_usage_in_dv_coded_text_instances"></a>4.3.5.2. Usage in Dv_coded_text Instances</h5>
<div class="paragraph">
<p>In a concrete instance of <code>Dv_coded_text</code>, the following are the likely usages of the <code><em>value</em></code> and <code><em>formatting</em></code> attributes.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Requirement</th>
<th class="tableblock halign-left valign-top"><code><em>value</em></code> attribute</th>
<th class="tableblock halign-left valign-top"><code><em>formatting</em></code> attribute</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Plain text of coded term</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">plain text string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Void</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Plain text of coded term with a hyperlink</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text string of form <code>[text](uri)</code> or other CommonMark link variant</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>"markdown"</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Plain text of coded term or other text, containing newlines</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Plain formatted text</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Void or <code>"plain"</code></p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_class_descriptions_5"><a class="anchor" href="#_class_descriptions_5"></a>4.4. Class Descriptions</h3>
<div class="sect3">
<h4 id="_dv_text_class"><a class="anchor" href="#_dv_text_class"></a>4.4.1. Dv_text Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong><em>Dv_text (abstract)</em></strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>A text item, which may contain any amount of legal characters arranged as e.g. words, sentences etc (i.e. one <code>DV_TEXT</code> may be more than one word). Visual formatting and hyperlinks may be included via markdown.</p>
</div>
<div class="paragraph">
<p>If the <code><em>formatting</em></code> field is set, the <code><em>value</em></code> field is affected as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code><em>formatting</em> = "plain"</code>: plain text, may contain newlines;</p>
</li>
<li>
<p><code><em>formatting</em> = "plain_no_newlines"</code>: plain text with no newlines;</p>
</li>
<li>
<p><code><em>formatting</em> = "markdown"</code>: text in markdown format; use of CommonMark strongly recommended.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A <code>DV_TEXT</code> can be coded by adding mappings to it.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_data_value_class">Data_value</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>value</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_string_class" target="_blank" rel="noopener">String</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Displayable rendition of the item, regardless of its underlying structure. For <code>DV_CODED_TEXT</code>, this is the rubric of the complete term as provided by the terminology service.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>formatting</strong>: <code><a href="#_text_format_types_enumeration">Text_format_types</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>If set, contains one of the following values:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>"plain"</code>: use for plain text, possibly containing newlines, but otherwise unformatted (same as Void);</p>
</li>
<li>
<p><code>"plain_no_newlines"</code>: use for text containing no newlines or other formatting;</p>
</li>
<li>
<p><code>"markdown"</code>: use for markdown formatted text, strongly recommended in the format of the CommonMark specification.</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>mappings</strong>: <code>List&lt;<a href="#_term_mapping_class">Term_mapping</a>&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Terms from other terminologies most closely matching this term, typically used where the originator (e.g. pathology lab) of information uses a local terminology but also supplies one or more equivalents from well known terminologies (e.g. LOINC).</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>language</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_terminology_code_class" target="_blank" rel="noopener">Terminology_code</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Optional indicator of the localised language in which the value is written. Coded from openEHR Code Set  languages . Only used when either the text object is in a different language from the enclosing <code>Entry</code>, or else the text object is being used outside of an <code>Entry</code> or other enclosing structure which indicates the language.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>encoding</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_terminology_code_class" target="_blank" rel="noopener">Terminology_code</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Name of character encoding scheme in which this value is encoded. Coded from openEHR Code Set  character sets . Unicode is the default assumption in openEHR, with UTF-8 being the assumed encoding. This attribute allows for variations from these assumptions.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Invariants</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><em>Language_valid</em>: <code>language /= Void implies code_set (Code_set_id_languages).has_code (language)</code></p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><em>Encoding_valid</em>: <code>encoding /= Void implies code_set (Code_set_id_character_sets).has_code (encoding)</code></p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><em>Mappings_valid</em>: <code>mappings /= void implies not mappings.is_empty</code></p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><em>Formatting_valid</em>: <code>formatting /= void implies not formatting.is_empty</code></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_dv_plain_text_class"><a class="anchor" href="#_dv_plain_text_class"></a>4.4.2. Dv_plain_text Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>Dv_plain_text</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Plain text.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_dv_text_class">Dv_text</a></code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_dv_coded_text_class"><a class="anchor" href="#_dv_coded_text_class"></a>4.4.3. Dv_coded_text Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>Dv_coded_text</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>A text item whose value must be the rubric from a controlled terminology, the key (i.e. the 'code') of which is the <code><em>defining_code</em></code> attribute. In other words: a <code>DV_CODED_TEXT</code> is a combination of a <code>CODE_PHRASE</code> (effectively a code) and the rubric of that term, from a terminology service, in the language in which the data were authored.</p>
</div>
<div class="paragraph">
<p>Since <code>DV_CODED_TEXT</code> is a subtype of <code>DV_TEXT</code>, it can be used in place of it, effectively allowing the type <code>DV_TEXT</code> to mean  a text item, which may optionally be coded.</p>
</div>
<div class="paragraph">
<p>Misuse: If the intention is to represent a term code attached in some way to a fragment of plain text, <code>DV_CODED_TEXT</code> should not be used; instead use a <code>DV_TEXT</code> and a <code>TERM_MAPPING</code> to a <code>CODE_PHRASE</code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_dv_text_class">Dv_text</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>concept</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_terminology_code_class" target="_blank" rel="noopener">Terminology_code</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The term of which the  <code><em>value</em></code> attribute is the textual rendition (i.e. rubric).</p>
</div>
<div class="paragraph">
<p>TODO: for GCM, default to Graphite Snomed extension</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_term_mapping_class"><a class="anchor" href="#_term_mapping_class"></a>4.4.4. Term_mapping Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>Term_mapping</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Represents a coded term mapped to a <code>DV_TEXT</code>, and the relative match of the target term with respect to the mapped item. Plain or coded text items may appear in the EHR for which one or mappings in alternative terminologies are required. Mappings are only used to enable computer processing, so they can only be instances of <code>DV_CODED_TEXT</code>.</p>
</div>
<div class="paragraph">
<p>Used for adding classification terms (e.g. adding ICD classifiers to SNOMED descriptive terms), or mapping into equivalents in other terminologies (e.g. across nursing vocabularies).</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>match</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_character_class" target="_blank" rel="noopener">Character</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The relative match of the target term with respect to the mapped text item. Result meanings:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>'&gt;'</code>: the mapping is to a broader term e.g. orginal text =  arbovirus infection , target =  viral infection</p>
</li>
<li>
<p><code>'='</code>: the mapping is to a (supposedly) equivalent to the original item</p>
</li>
<li>
<p><code>'&lt;'</code>: the mapping is to a narrower term. e.g. original text =  diabetes , mapping =  diabetes mellitus .</p>
</li>
<li>
<p><code>'?'</code>: the kind of mapping is unknown.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The first three values are taken from the ISO standards 2788 ( Guide to Establishment and development of monolingual thesauri) and 5964 (Guide to Establishment and development of multilingual thesauri).</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>purpose</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_terminology_term_class" target="_blank" rel="noopener">Terminology_term</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Purpose of the mapping e.g. 'automated data mining', 'billing', 'interoperability'.</p>
</div>
<div class="paragraph">
<p>TODO: any vocabulary?</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>target</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_terminology_term_class" target="_blank" rel="noopener">Terminology_term</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The target term of the mapping.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>narrower</strong> (): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code><br>
<br>
<em>Post</em>: <code>match = &lt; implies Result</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The mapping is to a narrower term.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>broader</strong> (): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code><br>
<br>
<em>Post</em>: <code>match = &gt; implies Result</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The mapping is to a broader term.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>equivalent</strong> (): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The mapping is to an equivalent term.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>unknown</strong> (): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code><br>
<br>
<em>Post</em>: <code>match = ? implies Result</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The kind of mapping is unknown.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_valid_match_code</strong> (<br>
c: <code><a href="/releases/BASE/latest/foundation_types.html#_character_class" target="_blank" rel="noopener">Character</a>[1]</code><br>
): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code><br>
<br>
<em>Post</em>: <code>Result := c = &gt; or c = = or c = &lt; or c = ?</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if match valid.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Invariants</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><em>Purpose_valid</em>: <code>purpose /= Void implies terminology (Terminology_id_openehr).has_code_for_group_id (Group_id_term_mapping_purpose, purpose.defining_code)</code></p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><em>Match_valid</em>: <code>is_valid_match_code (match)</code></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ordered_package_quantities"><a class="anchor" href="#_ordered_package_quantities"></a>5. Ordered Package: Quantities</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_overview_3"><a class="anchor" href="#_overview_3"></a>5.1. Overview</h3>
<div class="paragraph">
<p>The <code>data_types.quantity</code> package is illustrated below. Dates and Times are found in the next section.</p>
</div>
<div id="rm_data_types_quantity" class="imageblock text-center text-center">
<div class="content">
<img src="UML/diagrams/GCM-data_types.ordered-quantity.svg" alt="GCM data types.ordered quantity">
</div>
<div class="title">Figure 4. gcm.data_types.ordered package - quantities</div>
</div>
</div>
<div class="sect2">
<h3 id="_requirements_3"><a class="anchor" href="#_requirements_3"></a>5.2. Requirements</h3>
<div class="sect3">
<h4 id="_scores_and_scales"><a class="anchor" href="#_scores_and_scales"></a>5.2.1. Scores and Scales</h4>
<div class="paragraph">
<p>Medicine is a domain in which symbols representing relative magnitudes are commonly used, without exact values being used. The main purpose is usually to classify patients into groups for which different decisions might be made. Such classifications are typically known as <em>scores</em> or <em>scales</em>. For example the characterisation of pain as 'mild', 'medium', 'severe', or the reflex response to tendon percussion as "-", "+/-", "+", "++", "+++", "++++". Many scores such as the Apgar Score, Glasgow Coma Scale (GCS), and Barthel Index are globally known and used.</p>
</div>
<div class="paragraph">
<p>In some cases, there may be no way (or need) to precisely quantify such values because they reflect a subjective experience of the patient or informal judgment by the clinician. However, they are understood as being ordered, e.g. pass: [<code>++</code>] is arithmetically greater than `+`.</p>
</div>
<div class="paragraph">
<p>Similarly, even though the symbolic values for haemolysed blood in a urinalysis have approximate
ranges stated for them, as shown below, these 'values' are not usable in the same way as true quantities.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>"neg"</code>, <code>"trace"</code> (10 cells/&#956;l)</p>
</li>
<li>
<p><code>"small"</code> (&lt;25 cells/&#956;l)</p>
</li>
<li>
<p><code>"moderate"</code> (&lt;80 cells/&#956;l)</p>
</li>
<li>
<p><code>"large"</code> (&gt;200 cells/&#956;l)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A second requirement for score and scale values is that in many cases there is a need to associate numeric values values with the symbols, in order to facilitate ordered comparison, and also to enable longitudinal comparison across results of the same kind (e.g. pain, protein). The majority of scores and scales are limited to Integer values, but some use Real numbers interspersed with Integers e.g. the <a href="https://www.researchgate.net/publication/228089364_Proposing_a_standardized_method_for_evaluating_patient_report_of_the_intensity_of_dyspnea_during_exercise_testing_in_COPD">Borg CR 10 scale</a> for perceived exertion. In both cases, values may be negative, zero or positive.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
an argument sometimes put forward for recording all ordinals in a more precise way is that comparisons might want to be made between the values quoted by two laboratories for the same symbol (e.g. 'moderate'). There are a number of counter-arguments. Firstly, such comparisons are a poor attempt at normalisation, an activity which is the business of pathologists, not EHR users. Secondly, the symbolic values are often arrived at by the tester making a judgement of colour on a strip, which while an adequate (and cost-effective) approach for classifying, is not a valid means of quantifying a value. Lastly, in most cases, if a quantified point value or range is desired, or available, then it will be used - meaning that the appropriate quantitative data type can be used, rather than an the ordinal type.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_countable_things"><a class="anchor" href="#_countable_things"></a>5.2.2. Countable Things</h4>
<div class="paragraph">
<p>A common kind of data value in medicine is the dimensionless countable quantity, e.g.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>number of doses: 2;</p>
</li>
<li>
<p>number of previous pregnancies: 1;</p>
</li>
<li>
<p>number of tablets: 3.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Values of this type are always integral. Countable values need to be convertible to real numbers for statistical purposes, for example for a study of average number of pregnancies per couple.</p>
</div>
<div class="paragraph">
<p>Some countable entities such as tablets are divisible into major fractions, typically halves and occasionally quarters.</p>
</div>
</div>
<div class="sect3">
<h4 id="_dimensioned_quantities"><a class="anchor" href="#_dimensioned_quantities"></a>5.2.3. Dimensioned Quantities</h4>
<div class="paragraph">
<p>The most common kind of quantity is a measured, dimensioned quantity. Anything which is measurable
(rather than countable) involves a number of data aspects, namely:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>a magnitude whose value is a real number;</p>
</li>
<li>
<p>the physical property being measured, with the appropriate units;</p>
</li>
<li>
<p>a concept of precision, i.e. to what number of decimal places the value is recorded;</p>
</li>
<li>
<p>a concept of accuracy, i.e. the known or assumed error in the measurement due to instrumentation or human judgement.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Examples of dimensioned quantities include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>systolic BP: 110 mmHg</p>
</li>
<li>
<p>height: 178 cm</p>
</li>
<li>
<p>rate of asthma attacks: 7 /week</p>
</li>
<li>
<p>weight loss: 2.5 kg</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_ratios_and_proportions"><a class="anchor" href="#_ratios_and_proportions"></a>5.2.4. Ratios and Proportions</h4>
<div class="paragraph">
<p>A common quantitative type in science and medicine is the proportion, or ratio, which is used in situations like the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>1:128 (a titer);</p>
</li>
<li>
<p>Na:K concentration ratio (unitary denominator);</p>
</li>
<li>
<p>albumin:creatinine ratio;</p>
</li>
<li>
<p>% e.g. red cell distribution width (RDW) which is the width of a distribution of RBC widths.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In general ratios have real number values, even if many examples appear to be integer ratios. Proportions with unitary denominator and % (denominator = 100) are common.</p>
</div>
</div>
<div class="sect3">
<h4 id="_formulations"><a class="anchor" href="#_formulations"></a>5.2.5. Formulations</h4>
<div class="paragraph">
<p>A concept superficially similar to proportions and ratios is formulations of materials, such as a solid in a liquid e.g.:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>250 mg / 500 ml (solute/solvent)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Although a single solute/single solvent formulation appears to have the same form as a ratio, the general form is for any number of substances to be mixed together, usually according to a particular procedure. Formulations are therefore not candidates for direct modelling as fine-grained quantities, but instead are constructed by archetyping a higher-level structure, each leaf element of which contains the required kind of Quantity.</p>
</div>
</div>
<div class="sect3">
<h4 id="_quantity_ranges"><a class="anchor" href="#_quantity_ranges"></a>5.2.6. Quantity Ranges</h4>
<div class="paragraph">
<p>Quantity ranges are ubiquitous in science and medicine, and may be defined for any kind of measured
phenomenon. Examples include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>healthy weight range, e.g. 48kg - 60kg</p>
</li>
<li>
<p>normal range for urinalysis in pregnancy - protein, e.g. "nil" - "trace"</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_reference_ranges"><a class="anchor" href="#_reference_ranges"></a>5.2.7. Reference Ranges</h4>
<div class="paragraph">
<p>A reference range is a quantity range attached to a measured value, and is common for laboratory
result values. The typical form of a reference range found in a pathology result indicates what is considered
the 'normal' range for a measured value. Examples of reference ranges:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>normal range for serum Na is 135 - 145 mmol/L.</p>
</li>
<li>
<p>desirable total cholesterol: &lt; 5.5 mmol/L (strictly this probably should be 2.0 - 5.5 mmol/L, but is not usually quoted this way as low cholesterol is not considered a problem.)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Ranges can also be quoted for drug administrations, in which case they are usually thought of as the 'therapeutic' range. For example, the anticonvulsant drug Carbamazepine has a therapeutic range of 20 - 40 &#956;Mol/L. In some cases, there are multiple ranges associated with a drug, for example, Salicylate has a therapeutic range of 1.0 - 2.5 mmol/L and a toxic range &gt; 3.6 mmol/L</p>
</div>
<div class="paragraph">
<p>Various examples occur in which multiple ranges may be stated, including the following.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The administration recommendations for drugs which depend on the particular patient state. For example, the therapeutic range of Cyclosporin (an immunosuppressant) is a function of time post-transplant for the affected organ, e.g. kidney: &lt; 6 months: 250 - 350 &#956;g/L, &gt; 6 months: 100 - 200 &#956;g/L.</p>
</li>
<li>
<p>Normal ranges for blood IgG, IgA, IgM which vary significantly with the age in months from birth.</p>
</li>
<li>
<p>Progesterone and pituitary hormones have ranges which are different for different phases of the menstrual cycle and for menopause. This may result in 4 or 5 ranges given for one result. Only one will apply to any particular patient - but the exact phase of the cycle may be unknown - so the ranges may need to be associated with the value with no 'normal' range.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Where there are multiple ranges, the important question is: <em>which range information is relevant to the actual data being recorded for the patient?</em> In theory, only the range corresponding to the particular patient situation should be used, i.e. the range which applies after taking into account sex, age, smoking status, "professional athlete", organ transplanted, etc. In most cases, this is a single "normal" range, or a pair of ranges, typically "therapeutic" and "critical". However, practical factors complicate things. Firstly, data is sometimes supplied from pathology labs along with some or all of the applicable reference ranges, even though only some could possibly apply. This is particularly the case if the laboratory has no other data on the patient, and cannot evaluate which range applies. The requirement for faithfulness of recording might be extended to reference data supplied by laboratories, regardless of how irrelevant or arbitrarily chosen the reference data is, meaning that such data has to be stored in the record anyway. Secondly, there may be circumstances in which physicians want a number of reference ranges, even while knowing that only one range is applicable to the datum. Ranges above and below the relevant one might be useful to a physician wishing to determine how far out of range the datum is.</p>
</div>
</div>
<div class="sect3">
<h4 id="_normal_range_and_status_in_laboratory_data"><a class="anchor" href="#_normal_range_and_status_in_laboratory_data"></a>5.2.8. Normal Range and Status in Laboratory data</h4>
<div class="paragraph">
<p>It is quite common for laboratories to include a normal range with each measured value, and/or a normal 'status', which indicates where the value lies with respect to the normal range. The latter will commonly take the form of markers like "HHH" (critically high), HH (abnormally high), H (borderline high), L, LL, LLL in HL7v2 messaging, although other schemes are undoubtedly used.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_design"><a class="anchor" href="#_design"></a>5.3. Design</h3>
<div class="sect3">
<h4 id="_basic_semantics"><a class="anchor" href="#_basic_semantics"></a>5.3.1. Basic Semantics</h4>
<div class="paragraph">
<p>In order to make sense of the requirements in a systematic way, a proper typology for quantities is needed. The most basic characteristic of all values typically called 'quantities' is that they are ordered, meaning that the operator "&lt;" (less-than) is defined between any two values in the domain. An ancestor class for all quantities called <code>Dv_ordered</code> is accordingly defined. This type is sub-typed into ordinals, scales and true quantities, represented by the classes <code>Dv_ordinal</code>, <code>DV_SCALE</code> and <code>Dv_quantified</code> respectively.</p>
</div>
<div class="paragraph">
<p><code>Dv_ordinal</code> and <code>DV_SCALE</code> are used for scores and scales as described in the requirements above. <code>Dv_ordinal</code> represents data values whose values are Integers, and which have symbolic or text names instead, such as "+", "++", "+++", or <code>"mild"</code>, <code>"medium"</code>, <code>"severe"</code>. Each symbol can be assigned any Integer value, providing a basis for computable comparison. Typical uses for <code>Dv_ordinal</code> include representing values from the Apgar and Glasgow Coma Scales, e.g. <code>0heart rate absent</code>, <code>4withdraws from pain</code>. <code>DV_SCALE</code> is similar to <code>Dv_ordinal</code>, and was introduced to support scales / scores containing Real values as well as Integers.</p>
</div>
<div class="paragraph">
<p>In contrast to <code>Dv_ordinal</code> and <code>DV_SCALE</code>, instances of <code>Dv_quantified</code> and all its subtypes have precise numeric magnitudes. Accordingly, <code>Dv_quantified</code> introduces the properties <code><em>magnitude</em></code> and <code><em>magnitude_status</em></code>. The <code><em>magnitude</em></code> attribute is guaranteed to be available on any <code>Dv_quantified</code>, carrying the effective value, regardless of the particular subtype. The optional <code><em>magnitude_status</em></code> attribute can be used to provide a non-quantified indication of accuracy, and takes the following values:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>"="</code> : magnitude is a point value</p>
</li>
<li>
<p><code>"&lt;"</code> : value is &lt; magnitude</p>
</li>
<li>
<p><code>"&gt;"</code> : value is &gt; magnitude</p>
</li>
<li>
<p><code>"&lt;="</code> : value is &lt;= magnitude</p>
</li>
<li>
<p><code>"&gt;="</code> : value is &gt;= magnitude</p>
</li>
<li>
<p><code>"~"</code> : value is approximately magnitude</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If not present, the meaning is <code>"="</code>.</p>
</div>
<div class="paragraph">
<p>Logically, an accuracy attribute should also be included in <code>Dv_quantified</code>, but as its modelling is different in the subtypes in a way that does not easily lend itself to a common ancestor, it is only included in the subtypes.</p>
</div>
<div class="paragraph">
<p>The <code>Dv_quantified</code> class has two subtypes: <code>DV_AMOUNT</code> and <code>DV_ABSOLUTE_QUANTITY</code>. The former corresponds to relative 'amounts' of something, either a physical property (such as mass) or items (e.g. cigarettes). Mathematically, the <code>+</code> and <code>-</code> operators (as well as <code>*</code> and <code>/</code>) are defined in the same way as for the real numbers (or any other mathematical 'field'), with the semantics that adding two relative quantities measuring the same thing (i.e. with the same units) produces another relative quantity of the same kind; while the semantics of subtraction are that one relative quantity subtracted from another generates a third.</p>
</div>
<div class="paragraph">
<p>The second subtype of <code>Dv_quantified</code>, <code>DV_ABSOLUTE_QUANTITY</code>, models quantities whose values are absolute along a line having a defined origin. The main example of absolute quantities are the temporal concepts date, time and date/time. These are distinguished from relative quantities in that the normal addition and subtraction operations don&#8217;t apply. Instead, the semantics of such operators are based on the idea of the difference between absolute values being a relative amount. For example, two dates can be subtracted, but the result is a duration, not another date. For this reason, the operations <code><em>add</em></code>, <code><em>subtract</em></code> and <code><em>diff</em></code> are defined rather than <code>+</code> or <code>-</code>. Date/time types, as well as the relative concept duration, are defined in <a href="#_date_time_package">[_date_time_package]</a>.</p>
</div>
<div class="paragraph">
<p>Subtypes of <code>DV_AMOUNT</code> are <code>Dv_ratio</code>, <code>Dv_quantity</code>, <code>Dv_count</code>, and <code>Dv_duration</code> (see date_time package). The type <code>Dv_count</code> has an integer magnitude and is used to record naturally countable things such as number of previous pregnancies, number of steps taken by a recovering stroke victim and so on. There are no units or precision in a <code>Dv_count</code>. Countable quantities can be used to create instances of <code>Dv_quantity</code>, such as during a statistical study which average tobacco
consumption over a time period. Such a computation might cause the creation of <code>Dv_quantity</code> objects representing values like {magnitude = 5.85, units = '/ week'}</p>
</div>
<div class="paragraph">
<p><code>Dv_quantity</code> is used to represent amounts of measurable things, and has a real number magnitude, precision, units and accuracy. The <code><em>units</em></code> attribute contains the scientific unit in a parsable form defined by default by the <a href="http://unitsofmeasure.org/ucum.html" target="_blank" rel="noopener">Unified Code for Units of Measure (UCUM)</a> (case-sensitive form), or by another system or terminology specified in the <code><em>units_system</em></code> attribute. In some cases, such as metric units, the UCUM code and the display form are the same, e.g. 'kg'. However this is not the general case, and many common units have different display and code forms, e.g. degrees Celcius:  'C' and 'Cel'. In general the unit display name should be looked up if it is not known in context that the code is directly displayable. The <code><em>units_display_name</em></code> attribute may be used if the displayable form of the units is required in the data, and/or terminology lookup is not available or desirable. Unit names may be language dependent, particularly older units.</p>
</div>
<div class="paragraph">
<p>A valid units string always implies a measured <em>property</em>, such as force or pressure. If unit strings are compared in the application environment to determine if they measure the same property (e.g. <code>"bar"</code> and <code>"kPa"</code> are both units of 'pressure'), which enables the <code><em>is_strictly_comparable_to()</em></code> function defined on <code>Dv_ordered</code> to be properly specified on <code>Dv_quantity</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
while these semantics will allow comparison of e.g. two pressures recorded in <code>mbar and mmHg, or even two accelerations whose units are `"m.s^-2"</code> and <code>"m/s^2"</code>, they provide no guarantee that this is a sensible thing to do in terms of domain semantics: comparing a blood pressure to an atmospheric pressure for example may or may not make any sense. It is not within the scope of the quantity package to express such semantics - this is up to application software which uses Quantities found in specific places in the data.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_accuracy_and_uncertainty"><a class="anchor" href="#_accuracy_and_uncertainty"></a>5.3.2. Accuracy and Uncertainty</h4>
<div class="paragraph">
<p>Theoretically it might be argued that accuracy should not be included in a model for quantified values, because it is an artifact of a measuring process and/or device, not of a quantity itself. For example, a weight of "82 kg &#177;5%" can be represented in two parts. The "82 kg" is represented as a <code>Dv_quantity</code>, while the "&#177;5%" could be included in the protocol description of the weighing instrument, since this is where the error comes from. For practical purposes however, (in)accuracy in a measured quantity corresponds to a range of possible values. In realistic computing in health, it is quite likely that the accuracy will be required in computations on quantities, especially for statistical population queries in which measurement error must be disambiguated from true correlation.</p>
</div>
<div class="paragraph">
<p>Accuracy is therefore introduced as the abstract feature accuracy of the <code>Dv_quantified</code> class. It is defined concretely in the two descendants, <code>DV_AMOUNT</code>, where it is of type Real, and <code>DV_ABSOLUTE_QUANTITY</code>, where it is of a differential type defined by subtypes. A value of 0 in either case indicates 100% accuracy, i.e. no error in measurement. Where accuracy is not recorded in a quantity, it is represented by a special value. In <code>DV_AMOUNT</code>, a value of -1 for the accuracy attribute
is used for this purpose, and the constant unknown_accuracy_value = -1 is provided within the class to give a symbolic name for the special value. In the <code>DV_ABSOLUTE_QUANTITY</code> class, <code><em>accuracy_unknown</em></code> is represented by a Void (i.e. null) value for the accuracy attribute. An abstract Boolean feature <code><em>accuracy_unknown</em></code> is defined in the parent class <code>Dv_quantified</code> to provide a logical test of accuracy being absent, and is implemented in the respective  descendants by concrete functions that check for the special values.</p>
</div>
<div class="paragraph">
<p>In addition, the class <code>DV_AMOUNT</code>, provides a feature <code><em>accuracy_is_percent</em>: Boolean</code> to indicate if accuracy value is to be understood as a percentage, or an absolute value.</p>
</div>
<div class="paragraph">
<p>When two compatible quantities are added or subtracted using the + or - operators (<code>DV_AMOUNT</code> descendants) or add and substract (<code>DV_ABSOLUTE_QUANTITY</code> class), accuracy behaves in the following way:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>if accuracies are present in both quantities, they are added in the result, for both addition and subtraction operations;</p>
</li>
<li>
<p>if either or both quantities has an unknown accuracy, the accuracy of the result is also unknown;</p>
</li>
<li>
<p>if two <code>DV_AMOUNT</code> descendants are added or subtracted, and only one has <code><em>accuracy_is_percent</em></code> = True, accuracy is expressed in the result in the form used in the larger of the two quantities.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The related notion of 'uncertainty' is understood as a subjective judgement made by the clinician, indicating that he/she is not certain of a particular statement. It is not the same as accuracy: uncertainty may apply to non-quantified values, such as subjective statements, and it is not an aspect of objective measurement processes, but of human confidence. Where the uncertainty is due to subjective memory e.g. "I think my grandfather was 56 when he died", the uncertainty is simply recorded as another value, along with the main data item being recorded. Uncertainty is therefore not directly modelled in the openEHR data types, but appears instead in particular archetypes.</p>
</div>
</div>
<div class="sect3">
<h4 id="_quantity_ranges_2"><a class="anchor" href="#_quantity_ranges_2"></a>5.3.3. Quantity Ranges</h4>
<div class="paragraph">
<p>Ranges are modelled by the generic type <code>Dv_interval&lt;T:Dv_ordered&gt;</code> which enables a range of any of the other quantity types (except ratio) to be constructed. This allows any subtype of <code>Dv_ordered</code> to occur as a range as well.</p>
</div>
</div>
<div class="sect3">
<h4 id="_proportions"><a class="anchor" href="#_proportions"></a>5.3.4. Proportions</h4>
<div class="paragraph">
<p>The <code>Dv_ratio</code> type is provided for representing true ratios, i.e. relative values, and consists of numerator and denominator Real values, and a magnitude function which is computed as the result of the numerator/denominator division. The type attribute is used to indicate the logical type of the proportion. Supported types include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>percent</em>: denominator is 100; usual presentation is "numerator %"</p>
</li>
<li>
<p><em>unitary</em>: denominator is 1; usual presentation is "numerator"</p>
</li>
<li>
<p><em>fraction</em>: numerator and denominator are both integer values; usual presentation is n/d, e.g. such as  or , 1/2, 3/4 etc;</p>
</li>
<li>
<p><em>integer_fraction</em>: numerator and denominator are both integer values; usual presentation is n/d; if numerator &gt; denominator, display as "a b/c", i.e. the integer part followed by the remaining fraction part, e.g. 1; this is the most likely form for expressing a number of tablets;</p>
</li>
<li>
<p><em>ratio</em>: numerator and denominator can take any value; usual presentation is "numerator: denominator"</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Lastly, the <code><em>is_integral</em></code> function indicates that the numerator and denominator are both integer values; this is used for fractions (the fraction and integer_fraction types above) and other commonly occurring ratios where both parts are always integer values.</p>
</div>
</div>
<div class="sect3">
<h4 id="_normal_and_reference_ranges"><a class="anchor" href="#_normal_and_reference_ranges"></a>5.3.5. Normal and Reference Ranges</h4>
<div class="paragraph">
<p>Normal range for any of the quantity types (i.e. any instance of a subtype of <code>Dv_ordered</code>) can be included via the attribute <code>Dv_ordered.<em>normal_range</em></code>, of type <code>REFERENCE_RANGE</code>. Other reference ranges (e.g. sub-critical, critical etc) can be included via the attribute <code>Dv_ordered.<em>other_reference_ranges</em></code>. The separation of normal and other reference range attributes is used because the former constitute the vast majority of ranges quoted for quantitative data.</p>
</div>
<div class="paragraph">
<p>Normal status can be included via the attribute <code>Dv_ordered.<em>normal_status</em></code>, which takes the form of a <code>Dv_ordinal</code>, whose symbol attribute is coded according to the openEHR terminology group "normal status", and takes values "HHH" (critically high), "HH" (abnormally high), "H" (borderline high)", "N" (normal), "L" &#8230;&#8203; "LLL".</p>
</div>
</div>
<div class="sect3">
<h4 id="_recording_time"><a class="anchor" href="#_recording_time"></a>5.3.6. Recording Time</h4>
<div class="paragraph">
<p>Time can be recorded in two ways. Absolute times in the social time domain, such as dates and time of day are recorded using the types in the date_time package. Fine-grained 'time', which is a duration rather than a time, is recorded using a <code>Dv_quantity</code> with units = 's' or another temporal unit ('h', 'ms', 'ns' etc).</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_class_descriptions_6"><a class="anchor" href="#_class_descriptions_6"></a>5.4. Class Descriptions</h3>
<div class="sect3">
<h4 id="_dv_ordinal_class"><a class="anchor" href="#_dv_ordinal_class"></a>5.4.1. Dv_ordinal Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>Dv_ordinal</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>A data type that represents integral score values, e.g. pain, Apgar values, etc, where there is:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>implied ordering,</p>
</li>
<li>
<p>no implication that the distance between each value is constant, and</p>
</li>
<li>
<p>the total number of values is finite;</p>
</li>
<li>
<p>Integer values normally used but Real values are accommodated.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Note that although the term 'ordinal' in mathematics means natural numbers only, here any integer is allowed, since negative and zero values are often used by medical professionals for values around a neutral point. Examples of sets of ordinal values:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>-3, -2, -1, 0, 1, 2, 3 &#8201;&#8212;&#8201;reflex response values</p>
</li>
<li>
<p>0, 1, 2                 &#8201;&#8212;&#8201;Apgar values</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This class is used for recording any clinical datum which is customarily recorded using symbolic values. Example: the results on a urinalysis strip, e.g. <code>{neg, trace, +, ++, \+++}</code> are used for leucocytes, protein, nitrites etc; for non-haemolysed blood <code>{neg, trace, moderate}</code>; for haemolysed blood <code>{small, moderate, large}</code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_dv_ordered_class">Dv_ordered</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>symbol</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_terminology_term_class" target="_blank" rel="noopener">Terminology_term</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Coded textual representation of this value in the enumeration, which may be strings made from  +  symbols, or other enumerations of terms such as  <code>mild</code>, <code>moderate</code>, <code>severe</code>, or even the same number series as the values, e.g. 1, 2, 3.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>value</strong>: <code>Real</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Value in ordered enumeration of values.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>less_than</strong> <em>alias</em> "&lt;" (<br>
other: <code><a href="#_dv_ordinal_class">Dv_ordinal</a>[1]</code><br>
): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code><br>
<br>
<em>Pre_comparable</em>: <code>is_strictly_comparable_to (other)</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>True if this Ordinal value is less than <code><em>other</em></code>.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_dv_quantified_class"><a class="anchor" href="#_dv_quantified_class"></a>5.4.2. Dv_quantified Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong><em>Dv_quantified (abstract)</em></strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Abstract class defining the concept of relative quantified  'amounts'. For relative quantities, the  <code>+</code> and  <code>-</code> operators are defined (unlike descendants of <code>DV_ABSOLUTE_QUANTITY</code>, such as the date/time types).</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_dv_ordered_class">Dv_ordered</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>measured</strong>: <code><a href="#_dv_measured_class">Dv_measured</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>value</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_comparable_numeric_class" target="_blank" rel="noopener">Comparable_Numeric</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(effected)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_equal</strong> (<br>
other: <code><a href="#_dv_quantified_class">Dv_quantified</a>[1]</code><br>
): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Value equality: return True if <code>this</code> and <code><em>other</em></code> are attached to objects considered to be equal in value.</p>
</div>
<div class="hdlist">
<div class="title">Parameters<br></div>
<table>
<tr>
<td class="hdlist1">
<code><em>other</em></code>
</td>
<td class="hdlist2">
<p>Other object for comparison.</p>
</td>
</tr>
</table>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(abstract)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>less_than</strong> <em>alias</em> "&lt;" (<br>
other: <code><a href="#_dv_quantified_class">Dv_quantified</a>[1]</code><br>
): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Arithmetic value comparison. Returns True if current object is less than <code><em>other</em></code>. This operator is effected and/or redefined in descendants to provide the appropriate ordering semantics for concrete types.</p>
</div>
<div class="paragraph">
<p>In conjunction with <code>=</code>, enables the definition of the related functions <code><em>greater_than</em>()</code> etc.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>add</strong> <em>alias</em> "+" (<br>
other: <code><a href="#_dv_quantified_class">Dv_quantified</a>[1]</code><br>
): <code><a href="#_dv_quantified_class">Dv_quantified</a></code><br>
<br>
<em>Pre_comparable</em>: <code>is_strictly_comparable_to (other)</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Sum of this amount and another. The value of accuracy in the result is either:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the sum of the accuracies of the operands, if both present, or;</p>
</li>
<li>
<p>both operand accuracies are unknown_accuracy_value.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If the accuracy value is a percentage in one operand and not in the other, the form in the result is that of the larger operand.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>subtract</strong> <em>alias</em> "-" (<br>
other: <code><a href="#_dv_quantified_class">Dv_quantified</a>[1]</code><br>
): <code><a href="#_dv_quantified_class">Dv_quantified</a></code><br>
<br>
<em>Pre_comparable</em>: <code>is_strictly_comparable_to (other)</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Difference of this amount and another. The value of <code><em>accuracy</em></code> in the result is either:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the sum of the accuracies of the operands, if both present, or;</p>
</li>
<li>
<p>unknown, if either or both operand accuracies are unknown.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If the <code><em>accuracy</em></code> value is a percentage in one operand and not in the other, the form in the result is that of the larger operand.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>multiply</strong> <em>alias</em> "&#42;" (<br>
factor: <code><a href="/releases/BASE/latest/foundation_types.html#_real_class" target="_blank" rel="noopener">Real</a>[1]</code><br>
): <code><a href="#_dv_quantified_class">Dv_quantified</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Product of this Amount and <code><em>factor</em></code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>negative</strong> <em>alias</em> "-" (): <code><a href="#_dv_quantified_class">Dv_quantified</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Negated version of current object, such as used for representing a difference, e.g. a weight loss.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_dv_quantity_class"><a class="anchor" href="#_dv_quantity_class"></a>5.4.3. Dv_quantity Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>Dv_quantity</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Quantitified type representing  scientific  quantities, i.e. quantities expressed as a magnitude and units. Units are expressed in the UCUM syntax (<a href="http://unitsofmeasure.org/ucum.html">Unified Code for Units of Measure (UCUM)</a>, by Gunther Schadow and Clement J. McDonald of The Regenstrief Institute)  (case-sensitive form) by default, or another system if <code><em>units_system</em></code> is set.</p>
</div>
<div class="paragraph">
<p>Can also be used for time durations, where it is more convenient to treat these as simply a number of seconds rather than days, months, years (in the latter case, <code>DV_DURATION</code> may be used).</p>
</div>
<div class="paragraph">
<p>TODO: do we want to have an original_units field.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_dv_quantified_class">Dv_quantified</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>units</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_terminology_term_class" target="_blank" rel="noopener">Terminology_term</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Quantity units, expressed as a code from either UCUM or the units system specified in <code><em>unit_system</em></code>, when set.</p>
</div>
<div class="paragraph">
<p>In either case, the value is the code or syntax - normally formed of standard ASCII - which is in principal not the same as the display string, although in simple cases such as 'm' (for meters) it will be.</p>
</div>
<div class="paragraph">
<p>Code system is a URI identifying a terminology containing units concepts from the  (<a href="https://www.hl7.org/fhir/terminologies-systems.html">HL7 FHIR terminologies list</a>).</p>
</div>
<div class="paragraph">
<p><code>Terminology_term.text</code> field contains the displayable form of the unit, e.g. <code>'C'</code>.</p>
</div>
<div class="paragraph">
<p>Example values from UCUM: "kg/m^2", mm[Hg]", "ms-1", "km/h".</p>
</div>
<div class="paragraph">
<p>TODO: review; status of UCUM in GCM (Stan)</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>value</strong>: <code>Real</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>add</strong> <em>alias</em> "+" (<br>
other: <code><a href="#_dv_quantity_class">Dv_quantity</a>[1]</code><br>
): <code><a href="#_dv_quantity_class">Dv_quantity</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Sum of this <code>DV_QUANTITY</code> and <code><em>other</em></code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>subtract</strong> <em>alias</em> "-" (<br>
other: <code><a href="#_dv_quantity_class">Dv_quantity</a>[1]</code><br>
): <code><a href="#_dv_quantity_class">Dv_quantity</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Difference of this <code>DV_QUANTITY</code> and <code><em>other</em></code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>multiply</strong> <em>alias</em> "&#42;" (<br>
factor: <code><a href="/releases/BASE/latest/foundation_types.html#_real_class" target="_blank" rel="noopener">Real</a>[1]</code><br>
): <code><a href="#_dv_quantity_class">Dv_quantity</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Product of this <code>DV_QUANTITY</code> and <code><em>factor</em></code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(effected)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_equal</strong> (<br>
other: <code><a href="#_dv_quantity_class">Dv_quantity</a>[1]</code><br>
): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Value equality: return True if <code>this</code> and <code><em>other</em></code> are attached to objects considered to be equal in value.</p>
</div>
<div class="hdlist">
<div class="title">Parameters<br></div>
<table>
<tr>
<td class="hdlist1">
<code><em>other</em></code>
</td>
<td class="hdlist2">
<p>Other object for comparison.</p>
</td>
</tr>
</table>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(effected)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>less_than</strong> <em>alias</em> "&lt;" (<br>
other: <code><a href="#_dv_quantity_class">Dv_quantity</a>[1]</code><br>
): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Arithmetic value comparison. Returns True if current object is less than <code><em>other</em></code>. This operator is effected and/or redefined in descendants to provide the appropriate ordering semantics for concrete types.</p>
</div>
<div class="paragraph">
<p>In conjunction with <code>=</code>, enables the definition of the related functions <code><em>greater_than</em>()</code> etc.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_dv_count_class"><a class="anchor" href="#_dv_count_class"></a>5.4.4. Dv_count Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>Dv_count</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Countable quantities. Used for countable types such as pregnancies and steps (taken by a physiotherapy patient), number of cigarettes smoked in a day.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_dv_quantified_class">Dv_quantified</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>value</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_integer_class" target="_blank" rel="noopener">Integer</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Integer value of the count.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_dv_ratio_class"><a class="anchor" href="#_dv_ratio_class"></a>5.4.5. Dv_ratio Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>Dv_ratio</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Models a ratio of values, i.e. where the numerator and denominator are both pure numbers. The <code><em>valid_proportion_kind</em></code> property of the <code>RatioKind</code> class is used to control the type attribute to be one of a defined set.</p>
</div>
<div class="paragraph">
<p>Used for recording titers (e.g. 1:128), concentration ratios, e.g. Na:K (unitary denominator), albumin:creatinine ratio, and percentages, e.g. red cell distirbution width (RDW).</p>
</div>
<div class="paragraph">
<p>Misuse: Should not be used to represent things like blood pressure which are often written using a  '/' character, giving the misleading impression that the item is a ratio, when in fact it is a structured value. Similarly, visual acuity, often written as (e.g.) "6/24" in clinical notes is not a ratio but an ordinal (which includes non-numeric symbols like CF = count fingers etc). Should not be used for formulations.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_dv_quantified_class">Dv_quantified</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>numerator</strong>: <code><a href="#_dv_quantity_class">Dv_quantity</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>TODO: possibly needs to be a Quantified?</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>denominator</strong>: <code><a href="#_dv_quantity_class">Dv_quantity</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Denominator of ratio.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>type</strong>: <code><a href="#_ratio_kind_enumeration">Ratio_kind</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>value</strong>: <code>Real</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Computed value of numerator / denominator.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(effected)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_equal</strong> (<br>
other: <code><a href="#_dv_ratio_class">Dv_ratio</a>[1]</code><br>
): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Value equality: return True if <code>this</code> and <code><em>other</em></code> are attached to objects considered to be equal in value.</p>
</div>
<div class="hdlist">
<div class="title">Parameters<br></div>
<table>
<tr>
<td class="hdlist1">
<code><em>other</em></code>
</td>
<td class="hdlist2">
<p>Other object for comparison.</p>
</td>
</tr>
</table>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(effected)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>less_than</strong> <em>alias</em> "&lt;" (<br>
other: <code><a href="#_dv_ratio_class">Dv_ratio</a>[1]</code><br>
): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Arithmetic value comparison. Returns True if current object is less than <code><em>other</em></code>. This operator is effected and/or redefined in descendants to provide the appropriate ordering semantics for concrete types.</p>
</div>
<div class="paragraph">
<p>In conjunction with <code>=</code>, enables the definition of the related functions <code><em>greater_than</em>()</code> etc.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>add</strong> <em>alias</em> "+" (<br>
other: <code><a href="#_dv_ratio_class">Dv_ratio</a>[1]</code><br>
): <code><a href="#_dv_ratio_class">Dv_ratio</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Sum of two strictly comparable proportions.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>subtract</strong> <em>alias</em> "-" (<br>
other: <code><a href="#_dv_ratio_class">Dv_ratio</a>[1]</code><br>
): <code><a href="#_dv_ratio_class">Dv_ratio</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Difference between two strictly comparable proportions.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>multiply</strong> <em>alias</em> "&#42;" (<br>
factor: <code><a href="/releases/BASE/latest/foundation_types.html#_real_class" target="_blank" rel="noopener">Real</a>[1]</code><br>
): <code><a href="#_dv_ratio_class">Dv_ratio</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Product of this Proportion and <code><em>factor</em></code>.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_ratio_kind_enumeration"><a class="anchor" href="#_ratio_kind_enumeration"></a>5.4.6. Ratio_kind Enumeration</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Enumeration</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>Ratio_kind</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">rational_fraction</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Numerator and denominator are both integers, and value is displayed in form of a fraction, e.g. 1/3, 2 1/4.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">ratio</p></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_dv_measured_class"><a class="anchor" href="#_dv_measured_class"></a>5.4.7. Dv_measured Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>Dv_measured&lt;V&gt;</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Additional data that may be recorded for measured form of a quantified item, including with optional accuracy, normal range and other reference ranges.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>normal_range</strong>: <code><a href="#_dv_range_class">Dv_range</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Optional normal range.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>value_status</strong>: <code><a href="#_comparison_operator_enumeration">Comparison_operator</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Optional status of magnitude with respect to real-world value:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>"="</code>   : real value is equal to recorded value</p>
</li>
<li>
<p><code>"&lt;"</code>   : real value is &lt; recorded value</p>
</li>
<li>
<p><code>"&gt;"</code>   : real value is &gt; recorded value</p>
</li>
<li>
<p><code>"&lt;="</code> : real value is &lt;= recorded value</p>
</li>
<li>
<p><code>"&gt;="</code> : real value is &gt;= recorded value</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If not present, assumed meaning is  <code>"="</code> .</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>precision</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_integer_class" target="_blank" rel="noopener">Integer</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Precision to which the value of the quantity is expressed, in terms of number of decimal places. The value 0 implies an integral quantity.
The value -1 implies no limit, i.e. any number of decimal places.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>accuracy</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_comparable_class" target="_blank" rel="noopener">Comparable</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Accuracy of measurement. A value of zero means no accuracy recorded.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>accuracy_is_percent</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>If <code>True</code>, indicates that when this object was created, <code><em>accuracy</em></code> was recorded as a percent value; if <code>False</code>, as an absolute quantity value.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>other_reference_ranges</strong>: <code>List&lt;<a href="#_reference_range_class">Reference_range</a>&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Optional tagged other reference ranges for this value in its particular measurement context.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_reference_range_class"><a class="anchor" href="#_reference_range_class"></a>5.4.8. Reference_range Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>Reference_range&lt;V&gt;</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Defines a named range to be associated with any <code>DV_ORDERED</code> datum. Each such range is particular to the patient and context, e.g. sex, age, and any other factor which affects ranges. May be used to represent normal, therapeutic, dangerous, critical etc ranges.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>meaning</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_terminology_term_class" target="_blank" rel="noopener">Terminology_term</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Term whose value indicates the meaning of this range, e.g.  normal,  critical,  therapeutic  etc.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>range</strong>: <code><a href="#_dv_range_class">Dv_range</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The data range for this meaning, e.g. critical  etc.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Invariants</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><em>Range_is_simple</em>: <code>(range.lower_unbounded or else range.lower.is_simple) and (range.upper_unbounded or else range.upper.is_simple)</code></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_comparison_operator_enumeration"><a class="anchor" href="#_comparison_operator_enumeration"></a>5.4.9. Comparison_operator Enumeration</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Enumeration</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>Comparison_operator</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Enumeration of value comparators.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Real value is &lt; recorded value.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">&gt;</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Real value is &gt; recorded value.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8656;</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Real value is &lt;= recorded value.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">&gt;=</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Real value is &gt;= recorded value.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">=</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Real value is equal to recorded value.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_dv_range_class"><a class="anchor" href="#_dv_range_class"></a>5.4.10. Dv_range Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>Dv_range&lt;V&gt;</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>A data value in the form of a range of Ordered values, as well as date/times. One-sided ranges are formed when one of the limits is void. The values of the limits, when present, are always understood to be included in the range.</p>
</div>
<div class="paragraph">
<p>At least one limit has to be present.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_data_value_class">Data_value</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>lower</strong>: <code>V</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Lower limit of range.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>upper</strong>: <code>V</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Upper limit of range.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Invariants</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><em>Validity</em>: <code>lower /= Void or upper /= Void</code></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_syntaxes"><a class="anchor" href="#_syntaxes"></a>5.5. Syntaxes</h3>
<div class="sect3">
<h4 id="_units_syntax"><a class="anchor" href="#_units_syntax"></a>5.5.1. Units Syntax</h4>
<div class="paragraph">
<p>The BNF syntax specification of the units string, adapted from <a href="http://unitsofmeasure.org/ucum.html" target="_blank" rel="noopener">UCUM</a> (case-sensitive form) is as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="ebnf"><span></span><span class="tok-k">units </span><span class="tok-o">=</span> <span class="tok-s1">&#39;/&#39;</span> <span class="tok-k">exp_units </span><span class="tok-p">|</span> <span class="tok-k">units </span><span class="tok-s1">&#39;.&#39;</span> <span class="tok-k">exp_units </span><span class="tok-p">|</span> <span class="tok-k">units </span><span class="tok-s1">&#39;/&#39;</span> <span class="tok-k">exp_units </span><span class="tok-p">|</span> <span class="tok-k">exp_units </span><span class="tok-p">;</span>
<span class="tok-k">exp_units </span><span class="tok-o">=</span> <span class="tok-k">unit_group exponent </span><span class="tok-p">|</span> <span class="tok-k">unit_group </span><span class="tok-p">;</span>
<span class="tok-k">unit_group </span><span class="tok-o">=</span> <span class="tok-k">PREFIX annot_unit </span><span class="tok-p">|</span> <span class="tok-k">annot_unit </span><span class="tok-p">|</span> <span class="tok-s1">&#39;(&#39;</span> <span class="tok-k">exp_units </span><span class="tok-s1">&#39;)&#39;</span> <span class="tok-p">|</span> <span class="tok-k">factor </span><span class="tok-p">;</span>
<span class="tok-k">annot_unit </span><span class="tok-o">=</span> <span class="tok-k">unit_name </span><span class="tok-p">[</span> <span class="tok-s1">&#39;{&#39;</span> <span class="tok-k">ANNOTATION </span><span class="tok-s1">&#39;}&#39;</span> <span class="tok-p">]</span> <span class="tok-p">|</span> <span class="tok-s1">&#39;{&#39;</span> <span class="tok-k">ANNOTATION </span><span class="tok-s1">&#39;}&#39;</span> <span class="tok-p">;</span>
<span class="tok-k">factor </span><span class="tok-o">=</span> <span class="tok-k">Integer </span><span class="tok-p">;</span>
<span class="tok-k">exponent </span><span class="tok-o">=</span> <span class="tok-p">[</span> <span class="tok-k">SIGN </span><span class="tok-p">]</span> <span class="tok-k">Integer </span><span class="tok-p">;</span>

<span class="tok-k">PREFIX </span><span class="tok-o">=</span> <span class="tok-s1">&#39;Y&#39;</span> <span class="tok-p">|</span><span class="tok-s1">&#39;Z&#39;</span> <span class="tok-p">|</span> <span class="tok-s1">&#39;E&#39;</span> <span class="tok-p">|</span> <span class="tok-s1">&#39;P&#39;</span> <span class="tok-p">|</span> <span class="tok-s1">&#39;T&#39;</span> <span class="tok-p">|</span> <span class="tok-s1">&#39;G&#39;</span> <span class="tok-p">|</span> <span class="tok-s1">&#39;M&#39;</span> <span class="tok-p">|</span> <span class="tok-s1">&#39;k&#39;</span> <span class="tok-p">|</span> <span class="tok-s1">&#39;h&#39;</span> <span class="tok-p">|</span> <span class="tok-s1">&#39;da&#39;</span> <span class="tok-p">|</span> <span class="tok-s1">&#39;d&#39;</span> <span class="tok-p">|</span> <span class="tok-s1">&#39;c&#39;</span> <span class="tok-p">|</span> <span class="tok-s1">&#39;m&#39;</span> <span class="tok-p">|</span> <span class="tok-s1">&#39;&#39;</span> <span class="tok-p">|</span> <span class="tok-s1">&#39;n&#39;</span> <span class="tok-p">|</span> <span class="tok-s1">&#39;p&#39;</span> <span class="tok-p">|</span> <span class="tok-s1">&#39;f&#39;</span> <span class="tok-p">|</span> <span class="tok-s1">&#39;a&#39;</span> <span class="tok-p">|</span> <span class="tok-s1">&#39;z&#39;</span> <span class="tok-p">|</span> <span class="tok-s1">&#39;y&#39;</span> <span class="tok-p">;</span>
<span class="tok-k">UNIT_NAME </span><span class="tok-o">=</span> <span class="tok-ni">? [a-zA-Z_%]+ ?</span><span class="tok-p">;</span>   <span class="tok-cm">(* replace regex with values from unit tables *)</span>
<span class="tok-k">ANNOTATION </span><span class="tok-o">=</span> <span class="tok-ni">? [a-zA-Z&#39;.]+ ?</span><span class="tok-p">;</span>  <span class="tok-cm">(* replace regex with values from unit tables *)</span>
<span class="tok-k">SUFFIX </span><span class="tok-o">=</span> <span class="tok-ni">? [a-zA-Z0-9&#39;_]+ ?</span><span class="tok-p">;</span>   <span class="tok-cm">(* replace regex with values from unit tables *)</span>
<span class="tok-k">SIGN </span><span class="tok-o">=</span> <span class="tok-s1">&#39;+&#39;</span> <span class="tok-p">|</span> <span class="tok-s1">&#39;-&#39;</span> <span class="tok-p">;</span>
<span class="tok-k">Integer </span><span class="tok-o">=</span> <span class="tok-ni">? [0-9]+ ?</span><span class="tok-p">;</span>          <span class="tok-cm">(* regex *)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This proposal is comprehensive, covering all useful unit systems, including SI, various imperial, customary measures, and some obscure measures, as well as clinically specific additions. Metric prefixes, meaning-changing textual suffixes (e.g. "[Hg]" in "mm[Hg]") and non-meaning-changing annotations (e.g. "kg {total}") are recognised. With this syntax, units can be simply expressed in strings such as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code><span></span>&quot;kg/m^2&quot;, &quot;m.s^-1&quot;, &quot;km/h&quot;, &quot;mm[Hg]&quot;</code></pre>
</div>
</div>
<div class="paragraph">
<p>and so on.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ordered_package_temporal"><a class="anchor" href="#_ordered_package_temporal"></a>6. Ordered Package: Temporal</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_overview_4"><a class="anchor" href="#_overview_4"></a>6.1. Overview</h3>
<div class="paragraph">
<p>The temporal types from the <code>data_types.quantity</code> package are illustrated below.</p>
</div>
<div id="rm_data_types_time" class="imageblock text-center text-center">
<div class="content">
<img src="UML/diagrams/GCM-data_types.ordered-time.svg" alt="GCM data types.ordered time">
</div>
<div class="title">Figure 5. gcm.data_types.ordered package - temporal types</div>
</div>
</div>
<div class="sect2">
<h3 id="_requirements_4"><a class="anchor" href="#_requirements_4"></a>6.2. Requirements</h3>
<div class="sect3">
<h4 id="_standard_datetimes"><a class="anchor" href="#_standard_datetimes"></a>6.2.1. Standard Date/Times</h4>
<div class="paragraph">
<p>The basic requirement is for types which represent the following concepts.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>Date</em>: a type which records year, month and day in month. Examples include date of birth, date of onset of a problem.</p>
</li>
<li>
<p><em>Time</em>: a type which records hour, minute, second, and timezone. Examples include time of meal, time of day when a problem recurs. Timezone is required in a shared EHR repository so that times of clinical events which occurred in different timezones are comparable; this includes specialised pathology tests which might be done in another country.</p>
</li>
<li>
<p><em>Date_time</em>: a type which records year, month, day, hour, minute, second, and timezone. Examples include date &amp; time of death, timestamp of any observation. Timezone is required for the same reason as in Time.</p>
</li>
<li>
<p><em>Duration</em>: a type which records duration of an event or (in)activity, as days, hours, minutes, and seconds. A duration is understood as being relative to an unstated origin point (such as birth), and may take a negative value, indicating prior to the origin.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_partial_datetimes"><a class="anchor" href="#_partial_datetimes"></a>6.2.2. Partial Date/Times</h4>
<div class="paragraph">
<p>Partial or uncertain date/times have to be supported in clinical medicine. It is common for patients to
be unsure about dates and durations. Requirements for partial date/times include the following.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>For dates, one of the following rules applies to any instance:</p>
<div class="ulist">
<ul>
<li>
<p>only the year is known</p>
</li>
<li>
<p>only the year and month are known</p>
</li>
<li>
<p>If not even the year is known, then the date is obviously extremely approximate and it would
probably be unsafe to represent it computationally. However, if computable representation
was needed in this case, a date interval can be used. A pedantic example which breaks these
rules is someone who claims to be born on "a Monday at the start of May in 1934" (i.e. day
but not date unknown). Either the clinician determines what date the first Monday in May
1934 actually was and record that (assuming the patient&#8217;s way of accurately remembering
just happens to be via day rather than date), or else records a partial date of the form "May
1934" (in ISO 8601 form, <code>"1934-05"</code>) if they determine that the patient really is unsure.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Sometimes incomplete times are recorded, which follow the same rule that either the hours
or both the hours and minutes are present. Examples:</p>
<div class="ulist">
<ul>
<li>
<p>recordings by instruments which only generate hh:mm values (i.e. no seconds);</p>
</li>
<li>
<p>recordings by patients who report approximate times of events;</p>
</li>
<li>
<p>recordings by clinicians who use approximate times in administrations, e.g. "take insulin at 8am" really means something like 8 am +/- 30 mins.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Imprecise durations such as '2 - 3 hrs' need to be recordable in a computable form.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To satisfy the faithfulness requirement for health record recording it should always be possible to
record the narrative form of the datum provided by the patient as well as the formal form.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_design_2"><a class="anchor" href="#_design_2"></a>6.3. Design</h3>
<div class="sect3">
<h4 id="_general_approach"><a class="anchor" href="#_general_approach"></a>6.3.1. General Approach</h4>
<div class="paragraph">
<p>Date/time values are somewhat special in the realm of data types in that they are expressed in their
'customary' form, in which the standard structure of <code>{value, unit}</code> and metric relationships between
orders of magnitude do not hold. The customary form is what we are used to using in the social time
domain, such as births, deaths, ages, and times and durations of events which we remember. In all
these cases it is expressed using the familiar year/month/date/hour/minute/second system, in which
the relationships between each successive unit of time is non-metric. The customary form can be converted
to a magnitude since an origin point, and many date/time libraries do this in order to implement
various operations, particularly comparison.</p>
</div>
<div class="paragraph">
<p>The date/time types fall into two categories: <em>absolute</em> and <em>relative</em>. The absolute category comprises
the Date, Date/time and Time concepts, each of which measure time from a known origin. Date and
Date/time measure calendrical time from the date <code>0001-01-01</code>, while Time measures clock time from
midnight. Both Date/time and Time can include timezone information, ensuring that their instances
are correctly situated on the same timeline. All absolute time types inherit from the <code>Dv_temporal</code>
type, which provides the appropriate signature for the <code><em>diff()</em></code> function.</p>
</div>
<div class="paragraph">
<p>The relative category contains only the Duration concept, which expresses elapsed time between two
time points. The <code>Dv_duration</code> class is used for expressing durations of clinical phenomena and differences
between absolute times.</p>
</div>
<div class="paragraph">
<p>With two exceptions, all four concepts conform to the <a href="https://www.iso.org/iso-8601-date-and-time-format.html" target="_blank" rel="noopener">ISO 8601:2019 standard</a>, which is accordingly used as the primary definitional basis of the openEHR date/time types. The two exceptions are as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>a negative sign may be used before a Duration, for example '-P10D', meaning '10 days before [origin]', where the 'origin' is a time-point understood as the origin for the duration;</p>
</li>
<li>
<p>the  W' designator may be mixed with other designators.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The first exception allows the expression of negative durations, indicating an elapsed time prior to an origin point. An example from clinical medicine is the notion of 'adjusted age', whereby the true developmental age of a very premature newborn is computed with respect to the origin point of birth after a nominal gestation period (usually 9 months). A baby born at 6 months would therefore have an adjusted age of '-3 months', or '-P3M' in the format used by the <code>Dv_duration</code> type. The use of the negative enables correctly computed developmental age comparisons of newborns, regardless of prematurity. Negation for ISO 8601 durations is also supported by <a href="https://www.w3.org/XML/Schema" target="_blank" rel="noopener">W3C XML-schema</a> and various programming languages.</p>
</div>
<div class="paragraph">
<p>See the <a href="https://specifications.openehr.org/releases/BASE/latest/foundation_types.html#_time_types" target="_blank" rel="noopener">Time Types section in the openEHR Foundation Types specification</a> for conformance details.</p>
</div>
</div>
<div class="sect3">
<h4 id="_partial_datetimes_2"><a class="anchor" href="#_partial_datetimes_2"></a>6.3.2. Partial Date/Times</h4>
<div class="paragraph">
<p>The types defined in this specification support the notion of partially specified dates and times. The
modelling approach used here takes into account the known needs for representing partial date/time
data, while balancing that with the need to avoid incomprehensibly complex types whose generality
would only apply to a tiny percent of difficult cases. Thus, the basis for modelling incomplete
date/times is as follows.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The modelling problem relates only to date/time quantities that need to be computable. For extremely imprecise date/times, if the clinician feels the need, she can record it as narrative text.</p>
</li>
<li>
<p>For imprecise durations, an interval should be used, i.e. <code>Dv_interval&lt;Dv_duration&gt;</code>. In this way durations like '2 - 3 hrs' can be represented, and still be computable.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Based on the above considerations, the requirements for partial types are satisfied by the semantics of
ISO 8601:2004 for 'reduced accuracy' date/times, in which parts of a date, time or date/time can be
missing from the right hand end of the string. This models the reasonable situation where e.g. day
may be unknown in a date, but a date cannot have month unknown and day known.</p>
</div>
</div>
<div class="sect3">
<h4 id="_calendars"><a class="anchor" href="#_calendars"></a>6.3.3. Calendars</h4>
<div class="paragraph">
<p>A comment on calendars is in order. In this specification, all date/time types currently modelled are
Gregorian calendar based. This is the same assumption made by ISO 8601, and most technical
computing systems today in many parts of the world. At first glance this may seem like a culturally
insensitive approach, but in fact it makes sense in computational terms, for both users of the Gregorian and other calendars, e.g. Julian, Islamic, Baha&#8217;i, etc. Arguments against trying to use the
date/time classes defined here to represent date/times from any calendar include the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Almost all dates on computer systems, including in regions such as the Indian sub-continent,
Turkey and the middle east, where alternate calendars are in use, are in the Gregorian system.
This is likely to be the case for some time, and may always be the case, regardless of
the continued use of other calendars for religious or other purposes (outside of health);</p>
</li>
<li>
<p>If a calendar indicator were used in date quantities, all software, to be correct, would have to
check the value to verify that it is in the expected calendar system, and to do something special
if it is not - an added cost which is a possible source of bugs and which would rarely be
used. The reality is that most software produced in the western world, India etc (possibly
excepting open source software) would automatically assume the Gregorian calendar, and
would be in error if ever it did receive EHR data containing dates from alternate calendars.</p>
</li>
<li>
<p>If/when other calendars are used in EHR or related systems, the users of those calendars will
be aware of it, and include the appropriate conversion logic between Gregorian dates and
their own, limiting the extra software work and quality issues to those users who actually
need alternate calendars. If EHRs from such places are sent to a health care facility where
Gregorian is the default, nothing special is needed to ensure that those records will contain
dates comprehensible to the receiver.</p>
</li>
<li>
<p>The detailed model of date/times in some other calendars is not the same as in the Gregorian
calendar, so they would require different classes anyway - the classes defined here would
not necessarily function correctly simply by adding a calendar field.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For users requiring non-Gregorian dates in EHR and other health systems there are two approaches.
One is to treat non-Gregorian dates as a localisation issue, to be handled inside the application and
GUI environment. The other is to actually add further sibling packages to the openEHR date/time
package, for each new calendar or calendar group required. Conversion algorithms would most likely
be needed in and out of the Gregorian types to enable interoperability of information drawn from different
applications or sources. This approach may require a substantial modelling effort.</p>
</div>
<div class="paragraph">
<p>Algorithms for conversion between the Egyptian, Armenian, Khwarizmian, Persian, Ethiopian, Coptic,
Republican, Macedonian, Syrian, Julian Roman, Gregorian, Islamic A, Islamic B, Baha&#8217;i and
Saka calendars are described by (<a href="#Richards1998">Richards&#44; 1998</a>) and are based on the work of D. A. Hatcher (1986).</p>
</div>
</div>
<div class="sect3">
<h4 id="_representation"><a class="anchor" href="#_representation"></a>6.3.4. Representation</h4>
<div class="paragraph">
<p>All of the date/time classes described here are defined so as to have an attribute called value of type
String, in the form of an <a href="https://www.iso.org/iso-8601-date-and-time-format.html">ISO 8601:2019</a> string, with the two above-described deviations allowed. ISO 8601 is convenient for this purpose, as it is a simple
syntax, and covers not only all four variants of fully-specified date/time described here, but also
the partial varieties. The deviations support common use cases in healthcare, without compromising the semantics. Using a single string attribute significantly simplifies persistence as well as mapping
to XML-based formalisms, which use a mostly ISO 8601 compliant date/time representation.
The ISO 8601 semantics assumed by EHR are defined in classes found in the classes
<code>Iso8601_date</code>, <code>Iso8601_time</code>, <code>Iso8601_date_time</code>, <code>Iso8601_duration</code>, from the
<a href="https://specifications.openehr.org/releases/BASE/latest/foundation_types.html#_time_types"><code>base.foundation_types.time</code> package</a>. These classes are inherited into the corresponding classes
defined below.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
it is strongly recommended that where possible, the <em>extended</em> form of the ISO 8601 date/time syntax is used, i.e. the use of dashes in dates (e.g. <code>2018-03-14</code> rather than <code>20180314</code>) and colons for times (i.e. <code>14:24:00</code> instead of <code>142400</code>). This greatly aids human readability, and reduces the need for special date/time display rendering.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_class_descriptions_7"><a class="anchor" href="#_class_descriptions_7"></a>6.4. Class Descriptions</h3>
<div class="sect3">
<h4 id="_dv_temporal_class"><a class="anchor" href="#_dv_temporal_class"></a>6.4.1. Dv_temporal Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong><em>Dv_temporal&lt;T&gt; (abstract)</em></strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Parent of Data value types based on the primitive Temporal types. Uses a direct String representation and a function to generate the relevant Temporal instance.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_dv_ordered_class">Dv_ordered</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1<br>
(redefined)</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>value</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_string_class" target="_blank" rel="noopener">String</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>as_temporal</strong> (): <code>T</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_dv_date_class"><a class="anchor" href="#_dv_date_class"></a>6.4.2. Dv_date Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>Dv_date</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_dv_temporal_class">Dv_temporal</a></code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_dv_time_class"><a class="anchor" href="#_dv_time_class"></a>6.4.3. Dv_time Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>Dv_time</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_dv_temporal_class">Dv_temporal</a></code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_dv_date_time_class"><a class="anchor" href="#_dv_date_time_class"></a>6.4.4. Dv_date_time Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>Dv_date_time</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_dv_temporal_class">Dv_temporal</a></code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_dv_duration_class"><a class="anchor" href="#_dv_duration_class"></a>6.4.5. Dv_duration Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>Dv_duration</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_dv_temporal_class">Dv_temporal</a></code></p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_encapsulated_package"><a class="anchor" href="#_encapsulated_package"></a>7. Encapsulated Package</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_overview_5"><a class="anchor" href="#_overview_5"></a>7.1. Overview</h3>
<div class="paragraph">
<p>The <code>data_types.encapsulated</code> package contains classes representing data values whose internal
structure is defined outside the EHR model, such as multimedia and parsable data. It is illustrated below.</p>
</div>
<div id="rm_data_types_encapsulated" class="imageblock text-center text-center">
<div class="content">
<img src="UML/diagrams/GCM-data_types.encapsulated.svg" alt="GCM data types.encapsulated">
</div>
<div class="title">Figure 6. gcm.data_types.encapsulated package</div>
</div>
<div class="sect3">
<h4 id="_requirements_5"><a class="anchor" href="#_requirements_5"></a>7.1.1. Requirements</h4>
<div class="paragraph">
<p>There is a need to be able to include content in the EHR whose interior structure is not modelled in
the EHR reference model, but instead documented by sufficient meta-data attributes for specific tools
to process the data. Types of content in this category are as follows.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Images, including images which are themselves a compressed version of one image from a
high-resolution image set stored elsewhere. Such images may be in any of the well-known
compressed or uncompressed formats, and may have their own thumbnail image attached, to
facilitate web-viewing.</p>
</li>
<li>
<p>Bio-signal data series, such as a set of values representing a diagnostic part of an ECG trace.
This might be represented as DICOM content.</p>
</li>
<li>
<p>Content which is textual (or nearly so) which is essentially a parsable language file of some
kind. This includes all XML instance, HTML, and any other EHR content which happens to
be represented in syntax form - such as the unit strings used in quantities. The name of the
formalism should be stored as meta-data.</p>
</li>
<li>
<p>Binary content which is processed by a work processor or other dedicated tool.</p>
</li>
<li>
<p>Digital signatures.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Sufficient meta-data must be included with all of these types to enable a way for the content to be
processed, typically by indicating either its type (e.g. "jpeg", "word document") or the name of a tool
which can be used to process it. Important meta-data include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>size of the content;</p>
</li>
<li>
<p>natural language, if any.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Any encapsulated data item may be a summary, "thumbnail" or otherwise reduced form of an original
content item found outside the EHR, in some other system or file-system.
Checksums must be expressible for those items for which a checksum is available, or for which the
system generates checksums to improve the quality of its internal data transmissions.</p>
</div>
</div>
<div class="sect3">
<h4 id="_design_3"><a class="anchor" href="#_design_3"></a>7.1.2. Design</h4>
<div class="paragraph">
<p>The design approach used here is based on the following analysis.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Any encapsulated data item may be in some particular language, even if it is an image or other graphic form such as a bio-signal with axis markings in a particular language;</p>
</li>
<li>
<p>The general structure of encapsulated content data items includes a block of bytes or characters representing the content, and various meta-data as appropriate, including:</p>
<div class="ulist">
<ul>
<li>
<p>size</p>
</li>
<li>
<p>character encoding</p>
</li>
<li>
<p>compression type/algorithm</p>
</li>
<li>
<p>name of formalism for parsable content</p>
</li>
</ul>
</div>
</li>
<li>
<p>For encapsulated items that have a counterpart in another system, the standard means of portable address is the W3C URI;</p>
</li>
<li>
<p>For items may that have an associated integrity checksum, the checksum is itself a series of bytes, and the type of checksum must also be specified, e.g. "md5".</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>These observations lead naturally to an abstract <code>Dv_encapsulated</code> class, with two subtypes,
<code>Dv_parsable</code>, for all content which is syntactic in nature, and <code>Dv_multimedia</code> for everything else.
Note that it is possible to imagine parsable content items which are large, stored in compressed form,
and are themselves a summary of another item elsewhere on the web; such items can for practical
purposes be represented as instances of <code>Dv_multimedia</code>, rather than <code>Dv_parsable</code>. The vast
majority of parsable encapsulated data are expected to be short and stored in native textual form, e.g.
fragments of XML or HTML.</p>
</div>
<div class="paragraph">
<p>The formal model of the classes <code>Dv_encapsulated</code> and <code>Dv_multimedia</code> are closely based on the
ED type from the HL7v3 data types specification.</p>
</div>
</div>
<div class="sect3">
<h4 id="_examples"><a class="anchor" href="#_examples"></a>7.1.3. Examples</h4>
<div class="paragraph">
<p>The following examples show how to use the classes to represent some common encapsulated data types.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 16.6666%;">
<col style="width: 50.0001%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Data format</th>
<th class="tableblock halign-left valign-top">Class</th>
<th class="tableblock halign-left valign-top">Attributes</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">inline JSON</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Dv_parsable</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>value</em></code> = JSON string<br>
                                             <code><em>formalism</em> = "json"</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">inline JSON, minified<br>
 (white space removed)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Dv_parsable</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>value</em></code> = minified JSON string<br>
                                             <code><em>formalism</em> = "json"</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">JSON document</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Dv_multimedia</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>uri</em></code> = URI at which document is located<br>
                                             <code><em>media_type</em> = "IANA::application/json"</code><br>
                                             <code><em>size</em></code> = Integer indicating number of bytes of target.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">inline JPG</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Dv_multimedia</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>data</em></code> = byte array carrying JPG<br>
                                             <code><em>media_type</em> = "IANA::image/jpeg"</code><br>
                                             <code><em>size</em></code> = Integer indicating number of bytes of <code><em>data</em></code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">inline JPG, Base64<br>
 encoded</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Dv_multimedia</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>data</em></code> = byte array carrying Base64 string of JPG<br>
                                             <code><em>media_type</em> = "IANA::image/jpeg;base64"</code><br>
                                             <code><em>size</em></code> = Integer indicating number of bytes of <code><em>data</em></code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">inline JPG with<br>
 SHA-2 hash</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Dv_multimedia</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><em>data</em></code> = byte array carrying JPG<br>
                                             <code><em>media_type</em> = "IANA::image/jpeg"</code><br>
                                             <code><em>integrity_check</em></code> = byte array containing SHA-2 hash<br>
                                             <code><em>integrity_check_algorithm</em> = "openehr::SHA-2"</code><br>
                                             <code><em>size</em></code> = Integer indicating number of bytes of <code><em>data</em></code>.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_class_descriptions_8"><a class="anchor" href="#_class_descriptions_8"></a>7.2. Class Descriptions</h3>
<div class="sect3">
<h4 id="_dv_encapsulated_class"><a class="anchor" href="#_dv_encapsulated_class"></a>7.2.1. Dv_encapsulated Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong><em>Dv_encapsulated (abstract)</em></strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Abstract class defining the common meta-data of all types of encapsulated data.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_data_value_class">Data_value</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>encoding</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_terminology_code_class" target="_blank" rel="noopener">Terminology_code</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Name of character encoding scheme in which this value is encoded. Coded from openEHR Code Set  character sets . Unicode is the default assumption in openEHR, with UTF-8 being the assumed encoding. This attribute allows for variations from these assumptions.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>language</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_terminology_code_class" target="_blank" rel="noopener">Terminology_code</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Optional indicator of the localised language in which the data is written, if relevant. Coded from openEHR Code Set <code>languages</code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Invariants</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><em>Language_valid</em>: <code>language /= Void implies code_set (Code_set_id_languages).has_code (language)</code></p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><em>Charset_valid</em>: <code>charset /= Void implies code_set (Code_set_id_character_sets).has_code (charset)</code></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_dv_multimedia_class"><a class="anchor" href="#_dv_multimedia_class"></a>7.2.2. Dv_multimedia Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>Dv_multimedia</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>A specialisation of <code>Dv_encapsulated</code> for audiovisual and bio-signal types. Includes further metadata relating to multimedia types which are not applicable to other subtypes of <code>Dv_encapsulated</code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_dv_encapsulated_class">Dv_encapsulated</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>alternate_text</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_string_class" target="_blank" rel="noopener">String</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Text to display in lieu of multimedia display/replay.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>uri</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_uri_class" target="_blank" rel="noopener">Uri</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>URI reference to electronic information stored outside the record as a file, database entry etc, if supplied as a reference.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>data</strong>: <code>List&lt;<a href="/releases/BASE/latest/foundation_types.html#_byte_class" target="_blank" rel="noopener">Byte</a>&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The actual data found at <code><em>uri</em></code>, if supplied inline, base64 encoded.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>media_type</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_terminology_code_class" target="_blank" rel="noopener">Terminology_code</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Data media type coded from openEHR code set  media types  (interface for the IANA MIME types code set).
Example: image/jpeg; text/json.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>hash</strong>: <code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>SHA-1 integrity checksum as a Base64 string.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>0..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>thumbnail</strong>: <code><a href="#_dv_multimedia_class">Dv_multimedia</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The thumbnail for this item, if one exists; mainly for graphics formats.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>size</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_integer_class" target="_blank" rel="noopener">Integer</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Original size in bytes of unencoded encapsulated data. I.e. coding in base64, hexadecimal etc. do not change the value of this attribute.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_external</strong> (): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Computed from the value of the <code><em>uri</em></code> attribute: True if  the data is stored externally to the record, as indicated by <code><em>uri</em></code>. A copy may also be stored internally, in which case <code><em>is_expanded</em></code> is also true.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>is_inline</strong> (): <code><a href="/releases/BASE/latest/foundation_types.html#_boolean_class" target="_blank" rel="noopener">Boolean</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Computed from the value of the data attribute. True if  the  data is stored  in  expanded  form, ie within the EHR itself.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Invariants</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><em>Not_empty</em>: <code>is_inline or is_external</code></p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><em>Media_type_valid</em>: <code>media_type /= Void and then code_set (Code_set_id_media_types).has_code (media_type)</code></p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><em>Compression_algorithm_validity</em>: <code>compression_algorithm /= Void implies code_set (Code_set_id_compression_algorithms).has_code (compression_algorithm)</code></p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><em>Integrity_check_validity</em>: <code>integrity_check /= Void implies integrity_check_algorithm /= Void</code></p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><em>Integrity_check_algorithm_validity</em>: <code>integrity_check_algorithm /= Void implies code_set (Code_set_id_integrity_check_algorithms).has_code (integrity_check_algorithm)</code></p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><em>Size_valid</em>: <code>size &gt;= 0</code></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_dv_parsable_class"><a class="anchor" href="#_dv_parsable_class"></a>7.2.3. Dv_parsable Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>Dv_parsable</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>Encapsulated data expressed as a parsable String, such as HTML5, a programming language source file etc.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_dv_encapsulated_class">Dv_encapsulated</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>formalism</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_string_class" target="_blank" rel="noopener">String</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Name of the formalism, e.g.  GLIF 1.0 ,  Proforma  etc.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>value</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_string_class" target="_blank" rel="noopener">String</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The string, which may validly be empty in some syntaxes.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>size</strong> (): <code><a href="/releases/BASE/latest/foundation_types.html#_integer_class" target="_blank" rel="noopener">Integer</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Size in bytes of value.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Invariants</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><em>Formalism_valid</em>: <code>not formalism.is_empty</code></p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><em>Size_valid</em>: <code>size &gt;= 0</code></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_uri_package"><a class="anchor" href="#_uri_package"></a>8. Uri Package</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_overview_6"><a class="anchor" href="#_overview_6"></a>8.1. Overview</h3>
<div class="paragraph">
<p>The <code>data_types.uri</code> package includes two types used for referring to information resources. The
<code>DV_URI</code> type allows data values which are references to objects on the world wide web to be created.
Its specialisation, <code>DV_EHR_URI</code>, enables any element in an openEHR record to be identified in the
same way as other objects on the web. The <code>DV_EHR_URI</code> type is convenient, because it is a string,
like any other URI, and is therefore easily transportable and processable. Because it has its own
scheme space, 'ehr', instances can be globally unique, as long as EHR identification is globally
unique. <code>DV_EHR_URIs</code> are used to express all runtime paths in the EHR. The <code>uri</code> Package is illustrated
below.</p>
</div>
<div id="rm_data_types_uri" class="imageblock text-center text-center">
<div class="content">
<img src="UML/diagrams/GCM-data_types.uri.svg" alt="GCM data types.uri">
</div>
<div class="title">Figure 7. gcm.data_types.uri package</div>
</div>
<div class="sect3">
<h4 id="_requirements_6"><a class="anchor" href="#_requirements_6"></a>8.1.1. Requirements</h4>
<div class="paragraph">
<p>This package meets the requirement for a <code>DATA_VALUE</code> subtype which represents a W3C Uniform
Resource Identifier (URI). A common example of where this might be used is to represent a reference
to a clinical guideline or other justifying document associated with an intervention or treatment plan
recorded in the EHR.</p>
</div>
<div class="paragraph">
<p>URIs are a superset of Uniform Resource Locators (URLs) (although the two are often confused,
even within the W3C), and can be used to specify the location of any information item, regardless of
its type, location or storage method, as long as a URI "scheme" exists for that type of information.</p>
</div>
<div class="paragraph">
<p>There is an additional requirement for a kind of URI that can point at an EHR data item, either inside
the same EHR containing the link, or in another EHR. This is the basis of implementing logical references
in the EHR and between EHRs.</p>
</div>
</div>
<div class="sect3">
<h4 id="_design_4"><a class="anchor" href="#_design_4"></a>8.1.2. Design</h4>
<div class="paragraph">
<p>A simple design approach is used whereby a URI is represented as a String, and appropriate functions are defined to extract the various parts according to the syntax of URIs defined by Tim Berners-Lee (<a href="https://tools.ietf.org/html/rfc3986" target="_blank" rel="noopener">IETF RFC 3986</a>). An EHR specific subtype is defined, whose scheme is 'ehr', and which contains further attributes enabling the instances of the type to record what kind of object they are referring to.</p>
</div>
<div class="paragraph">
<p>So-called 'plain-text URIs' that contain RFC-3986 forbidden characters such as spaces etc, are allowed on the basis of human readability, but must be RFC-3986 encoded prior to use in e.g. REST APIs or other contexts relying on machine-level conformance.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_definitions"><a class="anchor" href="#_definitions"></a>8.2. Definitions</h3>
<div class="paragraph">
<p>The following symbolic definitions are used in the classes below.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code><em>Ehr_scheme</em></code>: <code>String</code> = "ehr"</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_class_descriptions_9"><a class="anchor" href="#_class_descriptions_9"></a>8.3. Class Descriptions</h3>
<div class="sect3">
<h4 id="_dv_uri_class"><a class="anchor" href="#_dv_uri_class"></a>8.3.1. Dv_uri Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>Dv_uri</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>A reference to an object which structurally conforms to the Universal Resource Identifier (URI) RFC-3986 standard. The reference is contained in the <code><em>value</em></code> attribute, which is a <code>String</code>. So-called 'plain-text URIs' that contain RFC-3986 forbidden characters such as spaces etc, are allowed on the basis that they need to be RFC-3986 encoded prior to use in e.g. REST APIs or other contexts relying on machine-level conformance.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_data_value_class">Data_value</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Attributes</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>value</strong>: <code><a href="/releases/BASE/latest/foundation_types.html#_string_class" target="_blank" rel="noopener">String</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Value of URI as a String. 'Plain-text' URIs are allowed, enabling better readability, but must be RFC-3986 encoded in use.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Functions</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Signature</strong></p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Meaning</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>scheme</strong> (): <code><a href="/releases/BASE/latest/foundation_types.html#_string_class" target="_blank" rel="noopener">String</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>A distributed information 'space' in which  information objects  exist. The scheme simultaneously specifies an information space and a mechanism for accessing objects in  that  space.  For  example  if  scheme  = "ftp", it identifies the information space in which  all  ftp-able objects  exist,  and also the application - ftp - which can be used to access them. Values may include: "ftp", "telnet", "mailto", etc. Refer to RFC-3986 for a full list.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>path</strong> (): <code><a href="/releases/BASE/latest/foundation_types.html#_string_class" target="_blank" rel="noopener">String</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>A string whose format is  a  function  of  the  scheme. Identifies   the   location  in  &lt;scheme&gt;-space  of  an information entity. Typical values include hierarchical directory  paths  for  any  machine.  For example, with scheme = "ftp", path might be <code>"/pub/images/image_01"</code>. The strings "." and ".." are reserved for use in the path. Paths may include internet/intranet location identifiers of the form: <code>sub_domain&#8230;&#8203;domain</code>, e.g. <code>"info.cern.ch"</code>.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>fragment_id</strong> (): <code><a href="/releases/BASE/latest/foundation_types.html#_string_class" target="_blank" rel="noopener">String</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>A part of, a  fragment  or  a  sub-function  within  an object. Allows references to sub-parts of objects, such as a certain line and character  position  in  a  text object. The  syntax  and semantics are defined by the application responsible for the object.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>1..1</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>query</strong> (): <code><a href="/releases/BASE/latest/foundation_types.html#_string_class" target="_blank" rel="noopener">String</a></code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Query string to send to application implied  by  scheme and  path.  Enables  queries  to applications, including databases  to  be  included in  the  URI. Supports any query meaningful to the server, including SQL.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Invariants</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><em>Value_valid</em>: <code>not value.is_empty</code></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_dv_ehr_uri_class"><a class="anchor" href="#_dv_ehr_uri_class"></a>8.3.2. Dv_ehr_uri Class</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 55.5556%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Class</strong></p></th>
<th class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>Dv_ehr_uri</strong></p></th>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Description</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p>A <code>DV_EHR_URI</code> is a <code>DV_URI</code> which has the scheme name 'ehr', and which can only reference items in EHRs.</p>
</div>
<div class="paragraph">
<p>Used to reference items in an EHR, which may be the same as the current EHR (containing this link), or another.</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Inherit</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code><a href="#_dv_uri_class">Dv_uri</a></code></p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock"><strong>Invariants</strong></p></th>
<td class="tableblock halign-left valign-top" colspan="2"><div class="content"><div class="paragraph">
<p><em>Scheme_valid</em>: <code>scheme.is_equal (Ehr_scheme)</code></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_syntaxes_2"><a class="anchor" href="#_syntaxes_2"></a>8.4. Syntaxes</h3>
<div class="sect3">
<h4 id="_dv_ehr_uri_syntax"><a class="anchor" href="#_dv_ehr_uri_syntax"></a>8.4.1. DV_EHR_URI Syntax</h4>
<div class="paragraph">
<p>The syntax of a <code>DV_EHR_URI</code> is an openEHR path, inside the 'ehr' URI scheme-space, and is one of the forms:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>ehr://system_id/ehr_id/top_level_structure_locator/path_inside_top_level_structure
ehr:/ehr_id
ehr:/ehr_id/top_level_structure_locator
ehr:/ehr_id/top_level_structure_locator/path_inside_top_level_structure</pre>
</div>
</div>
<div class="paragraph">
<p>The syntax is described in more detail in the <a href="https://specifications.openehr.org/releases/BASE/latest/architecture_overview.html#_ehr_uris">openEHR Architecture Overview</a>. <code>DV_EHR_URIs</code> are used as a mechanism for referencing in the EHR, ensuring readability by humans, as well as validity when extracts are transmitted elsewhere: even if the target of a path is not present, the path can be used to locate the missing item on demand.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_strategies"><a class="anchor" href="#_implementation_strategies"></a>9. Implementation Strategies</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_overview_7"><a class="anchor" href="#_overview_7"></a>9.1. Overview</h3>
<div class="paragraph">
<p>This section notes a few of the general challenges for mapping the openEHR data types to implementation
technologies such as programming languages and XML. For specific guidelines, Implementation
Technology Specification (ITS) document for each target formalism should be consulted.</p>
</div>
</div>
<div class="sect2">
<h3 id="_quantities_and_ordered_numeric"><a class="anchor" href="#_quantities_and_ordered_numeric"></a>9.2. Quantities and Ordered_numeric</h3>
<div class="paragraph">
<p>In the quantity package, the type <code>Dv_quantified</code> is shown having an abstract property of type
Ordered_numeric. This is intended to indicate that the type <code>Dv_quantified</code> is distinguished by
the magnitude property (compared to say <code>Dv_ordered</code>, which describes ordered things without having
magnitudes). The type Ordered_numeric be mapped to various types in implementation technologies
as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Java: <code>java.lang.Number</code></p>
</li>
<li>
<p>C#: <code>System.IComparable</code></p>
</li>
<li>
<p>Eiffel: <code>NUMERIC</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>All of these type systems currently suffer from not having a single type whose meaning is both
"ordered" (having the function '&lt;') and "numeric" (having the functions '+', '-', '*', '/') but in practice
it does not matter much. For type systems with no convenient supertype of the numeric concrete
types <code>Real</code>, <code>Integer</code>, <code>Double</code>, the <code><em>magnitude</em></code> property can safely be left out of <code>Dv_quantified</code>;
the only drawback is that code cannot call <code>Dv_quantified</code>.<code><em>magnitude</em></code> polymorphically, e.g. in a
statistical application processing <code>Dv_quantity</code> and <code>Dv_count</code> objects.</p>
</div>
</div>
<div class="sect2">
<h3 id="_unicode"><a class="anchor" href="#_unicode"></a>9.3. Unicode</h3>
<div class="paragraph">
<p>Unicode is supported in various ways in different languages. In Java, since JDK 1.1, unicode support
is implicit in the base classes. From the documentation:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>the classes java.io.InputStreamReader, java.io.OutputStreamWriter, and
java.lang.String can convert between Unicode and a number of other character
encodings. More information is available at:
http://java.sun.com/j2se/1.3/docs/guide/intl/encoding.doc.html.</pre>
</div>
</div>
<div class="paragraph">
<p>In the C# language, conversion can be done between Unicode and other codepages using the System.
<code>Text.UnicodeEncoding</code> (for UTF-16) and <code>System.Text.UTF8Encoding</code> (for UTF-8) classes.</p>
</div>
<div class="paragraph">
<p>In XML unicode is handled by specifying the encoding of the document in the XML declaration, e.g.
<code>&lt;?xml version="1.0" encoding="UTF-16"?&gt;</code>.</p>
</div>
<div class="paragraph">
<p>In the Eiffel language, unicode is available in the Gobo public domain library (see
<a href="http://www.gobosoft.com" class="bare">http://www.gobosoft.com</a>), in the <code>UC_STRING</code> class, which inherits from the String class.
The support in other languages varies, and may require a special type like the <code>UC_STRING</code> used in
Eiffel.</p>
</div>
</div>
<div class="sect2">
<h3 id="_dates_and_times"><a class="anchor" href="#_dates_and_times"></a>9.4. Dates and Times</h3>
<div class="paragraph">
<p>In some formalisms, dates and times are represented using a single calendar-like class. This is not
considered to be good practice from the point of specification, since it is more difficult to state proper
invariants for such a class used to represent a particular logical type such as a <code>DATE</code> or <code>TIME</code>, however,
its utility in implementation is recognised.</p>
</div>
<div class="paragraph">
<p>Where implementors want to use such a class (call it <code>CALENDAR</code> here for the sake of discussion) the
recommended approach is to wrap the class <code>CALENDAR</code> with classes representing the types described
in this specification, i.e. <code>DATE</code> etc. This enables the addition of any necessary functionality in the
wrapper for example, for serialising and deserialising in and out of XML.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_references"><a class="anchor" href="#_references"></a>References</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a id="GeHR_Aus2001"></a>Beale, T., &amp; Heard, S. (2000). <em>GEHR Technical Requirements</em>. Australia: GEHR Foundation. Retrieved from <a href="https://www.openehr.org/resources/related_projects/gehr_requirements.pdf" class="bare">https://www.openehr.org/resources/related_projects/gehr_requirements.pdf</a></p>
</div>
<div class="paragraph">
<p><a id="Richards1998"></a>Richards, E. G. (1998). <em>Mapping Time - The Calendar and its History</em>. Oxford University Press.</p>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2023-04-28 16:31:50 -0600
</div>
</div>
</body>
</html>